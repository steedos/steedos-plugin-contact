{"version":3,"sources":["webpack:///../builder-object/src/components/ObjectExpandTable.less?23a1","../../builder-object/src/components/ObjectExpandTable.less","webpack:///../builder-object/src/valueTypes/lookup.less?be1a","../../builder-object/src/valueTypes/lookup.less","webpack:///../builder-object/src/valueTypes/aggrid.less?7516","../../builder-object/src/valueTypes/aggrid.less","../../builder-sdk/src/fetch_etag.ts","../../builder-sdk/src/utils/helpers.ts","../../builder-sdk/src/sobject.ts","../../builder-sdk/src/graphql.ts","../../builder-sdk/src/client4.ts","../../builder-sdk/src/utils/sentry.ts","../../builder-store/src/Settings.tsx","../../builder-store/src/API.tsx","../../builder-store/src/Form.tsx","../../builder-store/src/Object.tsx","../../builder-store/src/Apps.tsx","../../builder-store/src/User.tsx","../../builder-store/src/Queries.tsx","../../builder-store/src/index.tsx","../../builder-form/src/components/Form.tsx","../../builder-form/src/components/Form.config.tsx","../../builder-form/src/components/Field.tsx","../../builder-form/src/components/FieldSection.tsx","../../builder-form/src/components/FieldObject.config.tsx","../../builder-form/src/providers/FormContext.tsx","../../builder-form/src/valueTypes/index.tsx","../../builder-form/src/valueTypes/href.tsx","../../builder-form/src/valueTypes/email.tsx","../../builder-form/src/providers/FormProvider.tsx","../../builder-locale/src/zh_CN.tsx","../../builder-locale/src/en_US.tsx","../../builder-object/src/components/ObjectField.tsx","../../builder-object/src/components/ObjectForm.tsx","../../builder-object/src/components/ObjectTable.tsx","../../builder-object/src/components/ObjectTree.tsx","../../builder-object/src/components/ObjectList.tsx","../../builder-object/src/components/ObjectExpandTable.tsx","../../builder-object/src/components/SelectUserInput.tsx","../../builder-object/src/utils/index.tsx","../../builder-object/src/components/ObjectListView.tsx","../../builder-object/src/components/Iframe.tsx","../../builder-object/src/components/ObjectGrid.tsx","../../builder-object/src/providers/ObjectContext.tsx","../../builder-object/src/valueTypes/boolean.tsx","../../builder-object/src/valueTypes/currency.tsx","../../builder-object/src/valueTypes/datetime.tsx","../../builder-object/src/valueTypes/email.tsx","../../builder-object/src/valueTypes/number.tsx","../../builder-object/src/valueTypes/percent.tsx","../../builder-object/src/valueTypes/select.tsx","../../builder-object/src/valueTypes/toggle.tsx","../../builder-object/src/valueTypes/url.tsx","../../builder-lightning/src/components/AppLauncher.jsx","../../builder-lightning/src/components/ListView.jsx","../../builder-lightning/src/components/Icon.jsx","../../builder-lightning/src/components/IconSettings.jsx","../../builder-object/src/valueTypes/lookup.tsx","../../builder-object/src/valueTypes/master_detail.tsx","../../builder-object/src/valueTypes/object.tsx","../../builder-object/src/valueTypes/aggrid.tsx","../../builder-object/src/valueTypes/image.tsx","../../builder-object/src/valueTypes/index.tsx","../../builder-object/src/valueTypes/avatar.tsx","../../builder-object/src/valueTypes/formula.tsx","../../builder-object/src/valueTypes/summary.tsx","../../builder-object/src/valueTypes/autonumber.tsx","../../builder-object/src/providers/ObjectProvider.tsx","../../builder-object/src/providers/SteedosProvider.tsx","../../builder-object/src/providers/SteedosContext.tsx","cookie.ts","App.tsx","accounts.ts","reportWebVitals.ts","index.tsx","../../builder-store/src/utils/index.tsx","webpack:///../builder-form/src/components/Field.less?123a","../../builder-form/src/components/Field.less","webpack:///../builder-object/src/components/ObjectForm.less?cadb","../../builder-object/src/components/ObjectForm.less","webpack:///../builder-object/src/components/ObjectTable.less?92b8","../../builder-object/src/components/ObjectTable.less","webpack:///../builder-object/src/components/ObjectTree.less?e376","../../builder-object/src/components/ObjectTree.less","webpack:///../builder-object/src/components/ObjectList.less?284d","../../builder-object/src/components/ObjectList.less"],"names":["api","content","__esModule","default","module","i","options","exports","locals","___CSS_LOADER_EXPORT___","push","etags","url","headers","method","etag","fetch","then","response","status","clone","responseEtag","get","Reflect","apply","undefined","buildQueryString","parameters","keys","Object","length","query","key","encodeURIComponent","client","objectName","this","getFilter","filters","isArray","userContext","userId","getUserId","spaceId","getSpaceId","user","getSelect","fields","toString","getQueryParams","params","$filter","$select","pageSize","$top","current","$skip","sortIsNull","sort","map","value","join","$orderby","getConfig","getUrl","doFetch","getRecordPermissions","recordId","find","getBaseRoute","concat","findOne","record","id","retrieve","ids","insert","data","body","JSON","stringify","update","delete","count","_data","isString","console","log","_id","HEADER_X_CLUSTER_ID","HEADER_X_VERSION_ID","LOGIN_TOKEN_KEY","LOGIN_TOKEN_EXPIRES_KEY","USER_ID_KEY","logToConsole","_lastLoginTokenWhenPolled","loginExpirationInDays","serverVersion","clusterId","token","authToken","csrf","urlVersion","userAgent","enableLogging","defaultHeaders","diagnosticId","includeCookies","isRudderKeySet","translations","connectionError","unknownError","sobjects","graphql","getTranslations","logClientError","message","level","login","password","deviceId","trackEvent","device_id","locale","getAccountsRoute","createUser","inviteId","redirect","queryParams","t","iid","r","createSpace","name","sendVerificationToken","getSettings","getMe","getMySpaces","logout","doFetchWithResponse","ok","getOptions","originalHeaders","Map","nestedHeaders","forEach","val","capitalizedKey","replace","l","toUpperCase","realVal","match","nestedHeaderStrings","split","shift","moreNestedHeaders","h","set","parseAndMergeNestedHeaders","json","intl","defaultMessage","has","error","msg","server_error_id","status_code","code","changePassword","oldPassword","newPassword","verifyEmail","email","verifyMobile","mobile","sobject","foo","URL","window","location","href","pathname","ROOT_URL_PATH_PREFIX","getAbsoluteUrl","baseUrl","startsWith","setUrl","setUserAgent","getToken","setToken","setSpaceId","getAuthToken","setCSRF","csrfToken","setAcceptLanguage","setEnableLogging","enable","setIncludeCookies","include","setUserId","setUserRoles","roles","userRoles","setDiagnosticId","enableRudderEvents","getServerVersion","getUrlVersion","getBootstrapRoute","getCSRFFromCookie","document","cookie","cookies","trim","newOptions","HEADER_BEARER","toLowerCase","credentials","assign","category","event","props","type","user_actual_id","apiUrl","index","substring","indexOf","whitelist","part","cleanUrlForLogging","defineProperty","enumerable","Error","env","localStorage","getItem","config","rootUrl","tenantId","Settings","model","isProd","maybeNull","string","currentObjectApiName","currentRecordId","frozen","actions","self","setRootUrl","setTenantId","setItem","removeItem","setAuthToken","setLocale","setCurrentObjectApiName","setCurrentRecordId","create","API","requestObject","objectApiName","object","requestRecordPermissions","requestRecords","updateRecord","objectRecordId","insertRecord","deleteRecord","FormModel","identifier","required","boolean","readonly","mode","union","setMode","newMode","setValue","Forms","items","optional","loadById","form","newForm","put","RecordCache","array","permissions","isLoading","loadRecord","RecordListCache","recordsJson","views","parse","loadRecords","ObjectModel","schema","recordCaches","recordListCaches","loadObject","Creator","Objects","getRecord","newRecord","getRecordList","stringifyFilters","stringifyOptions","recordListId","recordList","newRecordList","objects","getObject","newObject","AppMenuModel","path","icon","target","description","children","Apps","menus","currentAppId","currentApp","loadMenus","each","menu","setMenus","getMenus","size","getCurrentApp","app","toJSON","setCurrentAppId","appId","User","me","isLoginFailed","setMe","goLogin","loadMe","spaces","userInput","passowrd","username","Number","afterCreate","QueryModel","loadData","queryId","results","columns","rows","result","column","Queries","getData","newQuery","stores","Form","formId","layout","submitter","isModalForm","isDrawerForm","trigger","rest","formItemLayout","labelAlign","labelCol","span","wrapperCol","defSubmitter","searchConfig","resetText","submitText","resetButtonProps","onClick","_submitter","isBoolean","formProps","className","contentRender","FormComponent","BaseForm","ModalForm","DrawerForm","initialValues","context","useContext","attributes","valueType","isWide","showInlineIcon","formItemProps","formItemPropsMerged","style","gridColumn","vertical","ProFieldWrap","fieldSchema","fieldProps","dependFieldValues","proFieldProps","emptyText","field_schema","depend_field_values","onInlineEdit","inlineIcon","iconCategory","iconName","iconSize","iconVariant","iconClassName","variant","role","onDoubleClick","flex","width","ProFormField","createField","label","FieldSection","colSize","title","titleHidden","boxOptions","templateColumns","gap","FormContext","createContext","render","text","renderFormItem","_","placeholder","link","FormProvider","valueTypeMap","proContextValues","getProLocale","valueTypes","antdContextValues","getAntdLocale","getSteedosIntl","Provider","a","getMessageFromLocaleMap","source","defaultValue","paths","p","createSteedosIntl","localeMap","getMessage","zhCNIntl","save","cancel","enUSIntl","ObjectField","fieldName","disableMobile","is_wide","formFieldProps","help","hidden","omit","rules","colon","dependOn","depend_on","objectSchema","afterUpdate","afterInsert","visible","proForm","useForm","fieldNames","fieldSchemaArray","mergedSchema","defaultsDeep","field","group","isObjectField","test","isOmitField","defaults","recordCache","setFieldsValue","onFinish","values","sections","groupBy","dom","sectionName","sectionFields","filter","getSection","getSections","columnFields","defaultFilters","onChange","toolbar","search","totalRecords","setTotalRecords","isMobile","selfTableRef","defaultSort","proColumns","columnItem","columnOption","defaultSortOrder","sortDirection","sortValue","ele","getDefaultSortOrder","proColumn","fieldType","proColumnProps","dataIndex","sortable","sorter","multiple","getObjectTableProColumn","searchOptions","filterType","proSearch","toolbarOptions","subTitle","settings","proToolbar","request","searchFilters","__objectApiName","__columnFields","__defaultFilters","restFilters","keyFilters","includes","odataKeyFilters","n","isEmpty","sk","success","total","rowKey","rowSelection","pagination","hideOnSinglePage","columnEmptyText","actionRef","reload","nameField","parentField","rootNodeValue","checkable","treeData","setTreeData","expandedKeys","setExpandedKeys","records","useQuery","objectFields","enabled","d","parent","onExpand","onSelect","selectedNodes","listData","setListData","selectedData","setSelectedData","dataSource","itemLayout","renderItem","Item","e","tmpSelectedData","isCheckedIndex","findIndex","splice","handleItemClick","some","checked","selectedExpandNode","setSelectedExpandNode","handleExpandContentChange","tmpTreeNodes","uniq","tableRef","expandProps","setExpandProps","expandDefine","expandType","expandReference","expandNameField","expandParentField","releatedColumnField","colSpan","ghost","selectedRowKeys","selectedRows","getObjectRecordUrl","redordId","getTreeDataFromRecords","tempParentValue","rootNode","getChildrenNodes","nodes","tempNode","tempChildren","isRoot","item","getTreeNode","listName","listView","list_views","listViewColumns","nameFieldKey","master","isObject","to","columnField","relatedFieldApiName","getListViewColumnFields","NAME_FIELD_KEY","getListviewColumns","filter_scope","isFunction","warn","filtersOwner","getListViewFilters","ProFieldRenderer","ProFieldEditor","ref","getValue","isPopup","newValue","currentTarget","assistiveText","menuPosition","option","columnDefs","resizable","maxWidth","minWidth","checkboxSelection","headerName","cellRenderer","cellRendererParams","cellEditor","cellEditorParams","editable","getColumns","rowModelType","paginationPageSize","modules","stopEditingWhenGridLosesFocus","serverSideDatasource","getRows","rowData","frameworkComponents","proFieldRenderer","proFieldEditor","rowActions","ObjectContext","formData","Check","currency","datetime","number","percent","realValue","tags","optionsFunction","optionItem","Fragment","tagItem","open","openTag","setParams","__keyWords","keyWords","onDropdownVisibleChange","Date","showSearch","optionFilterProp","toggle","state","onSearch","setState","triggerOnClick","history","appApiName","src","onClose","apps","tabs","tab","unionBy","getTabs","actionSprite","standardSprite","customSprite","utilitySprite","region","triggerName","isOpen","iconNode","displayName","Component","iconPath","info","nameSwitcherDropdown","buttonClassName","buttonVariant","onRenderActions","align","onRenderControls","truncate","LookupField","defaultReferenceTo","reference_to","reference_sort","reference_limit","showIcon","reference_to_field","fieldFilters","filtersFunction","referenceTos","o","referenceToObject","referenceToObjectSchema","referenceToLableField","referenceToObjectIcon","referenceTo","setReferenceTo","selectItemLabel","setSelectItemLabel","recordListData","selectItem","recordItem","labelInValue","requestFun","__referenceTo","textFilters","filtersOfField","odataTextFilters","newFieldProps","optionItemRender","isLookupTree","enable_tree","showArrow","SelectProFieldProps","needReferenceToSelect","isLoadingReferenceTosObject","fieldWidth","FieldTreeSelect","dropdownStyle","maxHeight","overflow","master_detail","ObjectFieldObject","sub_fields","component","onValuesChange","changedValues","allValues","fieldItemProps","getFields","ObjectFieldGrid","initialValue","row","gridApi","setGridApi","immutableData","getRowNodeId","rowDragManaged","animateRows","rowDrag","hide","onRowDragEnd","forEachNode","node","bind","onCellClicked","$event","startEditingCell","rowIndex","colKey","colId","onGridReady","sizeColumnsToFit","suppressNoRowsOverlay","selectedId","dataItem","setRowData","deleteRow","iconPosition","newRow","addRow","ImageField","fileType","alt","proProps","fileList","propsOther","action","listType","onPreview","file","Promise","resolve","reader","FileReader","readAsDataURL","originFileObj","onload","image","Image","write","outerHTML","accept","space","owner","newFileList","select","lookup","avatar","grid","formula","summary","autonumber","defaultQueryClientConfig","defaultOptions","queries","refetchOnWindowFocus","ObjectProvider","queryClient","QueryClientProvider","SteedosProvider","objectProviderProps","SteedosContext","getCookie","pattern","RegExp","matched","App","queryObject","queryString","slice","providerProps","rooturl","spaceid","userid","authtoken","useState","selectedUser","setSelectedUsers","selectedUserInTab1","setSelectedUsersInTab1","selectedUserInTab2","setSelectedUsersInTab2","useEffect","useAntdMediaQuery","organizationColumns","hideInSearch","hideInTable","groupColumns","bordered","headerBordered","TabPane","users","height","bodyStyle","display","justifyContent","alignItems","disabled","opener","postMessage","selection","close","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","getElementById","saveEval","js","eval","getFieldSchema","objectConfig","fieldNameForReg","fieldItem","matches","lastFieldKey","_reference_to","getFieldsSchema","fieldsSchema","getListViewSchema","_filters","_index","pop","_value","_is_date","getListViewsSchema","listViewsSchema","listViewSchema","convertObjectSchema","getObjectOdataExpandFields","expand_fields","ref1","ref2","convertRecordsForLookup","recoreds","fieldValue","fieldReferenceTo","labels","_NAME_FIELD_VALUE"],"mappings":"6HAAA,IAAIA,EAAM,EAAQ,IACFC,EAAU,EAAQ,MAIC,kBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAIK,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAEPN,EAAIC,EAASK,GAI1BF,EAAOG,QAAUN,EAAQO,QAAU,I,kCClBnC,mBAEIC,EAFJ,MAE8B,IAA4B,GAE1DA,EAAwBC,KAAK,CAACN,EAAOC,EAAI,mbAAob,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,qEAAqE,MAAQ,GAAG,SAAW,8HAA8H,eAAiB,CAAC,mtCAAmtC,WAAa,MAEp7D,a,qBCNf,IAAIL,EAAM,EAAQ,IACFC,EAAU,EAAQ,MAIC,kBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAIK,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAEPN,EAAIC,EAASK,GAI1BF,EAAOG,QAAUN,EAAQO,QAAU,I,kCClBnC,mBAEIC,EAFJ,MAE8B,IAA4B,GAE1DA,EAAwBC,KAAK,CAACN,EAAOC,EAAI,k6BAAm6B,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,0DAA0D,MAAQ,GAAG,SAAW,uPAAuP,eAAiB,CAAC,s9CAA2uC,WAAa,MAEziF,a,qBCNf,IAAIL,EAAM,EAAQ,IACFC,EAAU,EAAQ,MAIC,kBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAIK,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAEPN,EAAIC,EAASK,GAI1BF,EAAOG,QAAUN,EAAQO,QAAU,I,kCClBnC,mBAEIC,EAFJ,MAE8B,IAA4B,GAE1DA,EAAwBC,KAAK,CAACN,EAAOC,EAAI,ooCAAqoC,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,0DAA0D,MAAQ,GAAG,SAAW,0SAA0S,eAAiB,CAAC,q3BAAq3B,WAAa,MAEx8E,a,oMCLT,EAAO,GACPM,EAAQ,GAEC,WAACC,EAAgBN,GAG5B,QAHY,IAAAM,MAAA,WAAgB,IAAAN,MAAA,CAAeO,QAAS,KACpDD,EAAMA,GAAON,EAAQM,IAEE,QAAnBN,EAAQQ,SAAqBR,EAAQQ,OAAQ,CAC7C,IAAMC,EAAOJ,EAAMC,GACb,EAAiB,EAAK,GAAGA,EAAMG,GAKrC,OAJIA,IACAT,EAAQO,QAAQ,iBAAmBE,GAGhCC,MAAMJ,EAAKN,GACdW,MAAK,SAACC,GACF,GAAwB,MAApBA,EAASC,OACT,OAAO,EAAeC,QAG1B,GAAwB,MAApBF,EAASC,OAAgB,CACzB,IAAME,EAAeH,EAASL,QAAQS,IAAI,QAEtCD,IACA,EAAK,GAAGT,EAAMS,GAAkBH,EAASE,QACzCT,EAAMC,GAAOS,GAIrB,OAAOH,KAKnB,OAAOK,QAAQC,MAAMR,WAAOS,EAAW,CAACb,EAAKN,KChC1C,SAASoB,EAAiBC,GAC7B,IAAMC,EAAOC,OAAOD,KAAKD,GACzB,GAAoB,IAAhBC,EAAKE,OACL,MAAO,GAIX,IADA,IAAIC,EAAQ,IACH1B,EAAI,EAAGA,EAAIuB,EAAKE,OAAQzB,IAAK,CAClC,IAAM2B,EAAMJ,EAAKvB,GACjB0B,GAASC,EAAM,IAAMC,mBAAmBN,EAAWK,IAE/C3B,EAAIuB,EAAKE,OAAS,IAClBC,GAAS,KAIjB,OAAOA,E,s2CCZX,WAII,WAAYG,EAAQC,GAChBC,KAAKF,OAASA,EACdE,KAAKD,WAAaA,EA+J1B,OA5JY,YAAAE,UAAR,SAAkBC,GACd,GAAG,UAAEC,QAAQD,GAAS,CAClB,IAAIE,EAAmB,GAIvB,OAHAA,EAAYC,OAASL,KAAKF,OAAOQ,YACjCF,EAAYG,QAAUP,KAAKF,OAAOU,aAClCJ,EAAYK,KAAO,GACZ,oCAA0BP,EAASE,GAE9C,OAAOF,GAGH,YAAAQ,UAAR,SAAkBC,GACd,OAAG,UAAER,QAAQQ,GACFA,EAAOC,WAEXD,GAGH,YAAAE,eAAR,SAAuBX,EAAkBS,EAAgBzC,GACrD,IAAI4C,EAAqB,GACnBC,EAAUf,KAAKC,UAAUC,GAC5Ba,IACCD,EAAOC,QAAUA,GAErB,IAAMC,EAAUhB,KAAKU,UAAUC,GAO/B,GANGK,IACCF,EAAOE,QAAUA,GAKlB9C,EAAQ,CACJA,EAAQ+C,WACPH,EAAOI,KAAOhD,EAAQ+C,UAGvB/C,EAAQiD,SAAWjD,EAAQ+C,WAC1BH,EAAOM,OAASlD,EAAQiD,QAAU,GAAKjD,EAAQ+C,UAEnD,IAAII,OAAU,EACd,GAA2B,kBAAjBnD,EAAQoD,KACdD,EAAWnD,EAAQoD,UACjB,GAAG,UAAEnB,QAAQjC,EAAQoD,MAAM,CAK7BD,EAJY,UAAEE,IAAIrD,EAAQoD,MAAK,SAACE,GAE5B,MADwB,SAAXA,EAAM,GAAcA,EAAM,GAAK,QAAUA,EAAM,MAE7DC,KAAK,KAGTJ,IACCP,EAAOY,SAASL,GAGxB,OAAOP,GAGL,YAAAa,UAAN,W,gGAGW,OADDnD,EAASwB,KAAKF,OAAO8B,SAAQ,iBAAiB5B,KAAKD,WAAU,YAC5D,GAAMC,KAAKF,OAAO+B,QAAQrD,EAAK,CAACE,OAAQ,S,OAA/C,MAAO,CAAP,EAAO,kBAGL,YAAAoD,qBAAN,SAA2BC,G,gGAEhB,OADDvD,EAASwB,KAAKF,OAAO8B,SAAQ,iBAAiB5B,KAAKD,WAAU,sBAAsBgC,EAClF,GAAM/B,KAAKF,OAAO+B,QAAQrD,EAAK,CAACE,OAAQ,S,OAA/C,MAAO,CAAP,EAAO,kBAeL,YAAAsD,KAAN,SAAW9B,EAAkBS,EAAgBzC,G,kGAG5B,OAFT4C,EAASd,KAAKa,eAAeX,EAASS,EAAQzC,GAC9CM,EAAMwB,KAAKF,OAAOmC,eAAiB,WAAWC,OAAOlC,KAAKD,YAAcT,EAAiBwB,GAChF,GAAMd,KAAKF,OAAO+B,QAAQrD,EAAK,CAACE,OAAQ,S,OACrD,MAAO,CAAP,EADa,kBAWX,YAAAyD,QAAN,SAAcjC,EAAkBS,EAAgBzC,G,oFAS1C,YAAAkE,OAAN,SAAaC,EAAY1B,G,oFASnB,YAAA2B,SAAN,SAAeC,EAAoB5B,G,oFAQ7B,YAAA6B,OAAN,SAAaC,G,gGAEI,OADTjE,EAASwB,KAAKF,OAAOmC,eAAc,WAAWjC,KAAKD,WAC1C,GAAMC,KAAKF,OAAO+B,QAAQrD,EAAK,CAACE,OAAQ,OAAQgE,KAAMC,KAAKC,UAAUH,M,OAClF,MAAO,CAAP,EADa,SACCjB,eAQZ,YAAAqB,OAAN,SAAaR,EAAYI,G,gGAER,OADTjE,EAASwB,KAAKF,OAAOmC,eAAc,WAAWjC,KAAKD,WAAU,IAAIsC,EACxD,GAAMrC,KAAKF,OAAO+B,QAAQrD,EAAK,CAACE,OAAQ,MAAOgE,KAAMC,KAAKC,UAAUH,M,OACjF,MAAO,CAAP,EADa,SACCjB,eAOZ,YAAAsB,OAAN,SAAaT,G,gGAEI,OADT7D,EAASwB,KAAKF,OAAOmC,eAAc,WAAWjC,KAAKD,WAAU,IAAIsC,EACxD,GAAMrC,KAAKF,OAAO+B,QAAQrD,EAAK,CAACE,OAAQ,Y,OACrD,MAAO,CAAP,EADa,kBAQX,YAAAqE,MAAN,SAAY7C,G,oFAMhB,EArKA,G,g1CCJA,WAEI,WAAYJ,GACRE,KAAKF,OAASA,EAmDtB,OAhDU,YAAAH,MAAN,SAAYA,G,kGAKD,OAJHnB,EAAMwB,KAAKF,OAAOmC,eAAiB,WACnCS,EAAO,CACP/C,MAAOA,GAEJ,GAAMK,KAAKF,OAAO+B,QAAQrD,EAAK,CAACE,OAAQ,OAAQgE,KAAMC,KAAKC,UAAUF,M,OAA5E,MAAO,CAAP,EAAO,kBAGL,YAAAF,OAAN,SAAazC,EAAoB0C,G,oGAYtB,OAXHjE,EAAMwB,KAAKF,OAAOmC,eAAiB,WACnCe,EAAQP,EACR,UAAEQ,SAASD,KACXA,EAAQL,KAAKC,UAAUH,IAEvBC,EAAO,CACP/C,MAAO,+BACDI,EAAU,iBAAiBiD,EAAK,oBAG1CE,QAAQC,IAAI,cAAeT,GACpB,GAAM1C,KAAKF,OAAO+B,QAAQrD,EAAK,CAACE,OAAQ,OAAQgE,KAAMC,KAAKC,UAAUF,M,OAA5E,MAAO,CAAP,EAAO,kBAGL,YAAAG,OAAN,SAAa9C,EAAoBqD,EAAaX,G,oGAWnC,OAVHjE,EAAMwB,KAAKF,OAAOmC,eAAiB,WACnCe,EAAQP,EACR,UAAEQ,SAASD,KACXA,EAAQL,KAAKC,UAAUH,IAEvBC,EAAO,CACP/C,MAAO,+BACDI,EAAU,iBAAiBqD,EAAG,WAAWJ,EAAK,oBAGjD,GAAMhD,KAAKF,OAAO+B,QAAQrD,EAAK,CAACE,OAAQ,OAAQgE,KAAMC,KAAKC,UAAUF,M,OAA5E,MAAO,CAAP,EAAO,kBAGL,YAAAI,OAAN,SAAa/C,EAAoBqD,G,kGAOtB,OANH5E,EAAMwB,KAAKF,OAAOmC,eAAiB,WACnCS,EAAO,CACP/C,MAAO,+BACDI,EAAU,iBAAiBqD,EAAG,qBAGjC,GAAMpD,KAAKF,OAAO+B,QAAQrD,EAAK,CAACE,OAAQ,OAAQgE,KAAMC,KAAKC,UAAUF,M,OAA5E,MAAO,CAAP,EAAO,kBAIf,EAtDA,G,o2ECeMW,EAAsB,eAEfC,EAAsB,e,EASnC,mCACI,KAAAC,gBAAkB,oBAClB,KAAAC,wBAA0B,2BAC1B,KAAAC,YAAc,gBACd,KAAAC,cAAe,EACf,KAAAC,0BAA2B,KAC3B,KAAAC,sBAAwB,KACxB,KAAAC,cAAgB,GAChB,KAAAC,UAAY,GACZ,KAAAC,MAAQ,GACR,KAAAxD,QAAU,GACV,KAAAyD,UAAY,GACZ,KAAAC,KAAO,GACP,KAAAzF,IAA0H,GAC1H,KAAA0F,WAAa,GACb,KAAAC,UAAyB,KACzB,KAAAC,eAAgB,EAChB,KAAAC,eAAwC,CACpC,eAAgB,oBAEpB,KAAAhE,OAAS,GACT,KAAAiE,aAAe,GACf,KAAAC,gBAAiB,EACjB,KAAAC,gBAAiB,EACjB,KAAAC,aAAe,CACXC,gBAAiB,+DACjBC,aAAc,0DAIlB,KAAAC,SAAW,GACX,KAAAC,QAAU,IAAI,EAAQ7E,MA6JtB,KAAA8E,gBAAkB,SAACtG,GACf,OAAO,EAAKqD,QACRrD,EACA,CAACE,OAAQ,SAKjB,KAAAqG,eAAiB,SAACC,EAAiBC,QAAA,IAAAA,MAAA,UAkBnC,KAAAC,MAAQ,SAACzE,EAAuB0E,EAAkBpB,EAAYqB,QAAZ,IAAArB,MAAA,SAAY,IAAAqB,MAAA,IAC1D,EAAKC,WAAW,MAAO,mBAEvB,IAAM3C,EAAY,CACd4C,UAAWF,EACX3E,KAAI,EACJ0E,SAAQ,EACRpB,MAAK,EACLwB,OAAQ,SAGZ,OAAO,EAAK1D,QACL,EAAK2D,mBAAkB,kBAC1B,CAAC9G,OAAQ,OAAQgE,KAAMC,KAAKC,UAAUF,MAM9C,KAAA+C,WAAa,SAAChF,EAAmBsD,EAAe2B,EAAkBC,GAC9D,EAAKN,WAAW,MAAO,wBAEvB,IAAMO,EAAmB,GAmBzB,OAjBI7B,IACA6B,EAAYC,EAAI9B,GAGhB2B,IACAE,EAAYE,IAAMJ,GAGlBC,IACAC,EAAYG,EAAIJ,GAGH,EAAK9D,QACf,EAAK2D,mBAAkB,qBAAqBlG,EAAiBsG,GAChE,CAAClH,OAAQ,OAAQgE,KAAMC,KAAKC,UAAUnC,MAM9C,KAAAuF,YAAc,SAACC,GACX,EAAKZ,WAAW,MAAO,0BASvB,OALiB,EAAKxD,QACf,EAAKI,eAAc,iCAAiC3C,EAHlC,IAIrB,CAACZ,OAAQ,OAAQgE,KAAMC,KAAKC,UAAU,CAACqD,KAAMA,OAMrD,KAAAC,sBAAwB,SAACzF,GACrB,EAAK4E,WAAW,MAAO,oBAEvB,IAAM3C,EAAY,CACdjC,KAAMA,GAGV,OAAO,EAAKoB,QACL,EAAK2D,mBAAkB,iCAC1B,CAAC9G,OAAQ,OAAQgE,KAAMC,KAAKC,UAAUF,MAI9C,KAAAyD,YAAc,WACV,OAAO,EAAKtE,QACL,EAAK2D,mBAAkB,YAC1B,CAAC9G,OAAQ,SAIjB,KAAA0H,MAAQ,WACJ,OAAO,EAAKvE,QACL,EAAK2D,mBAAkB,QAC1B,CAAC9G,OAAQ,SAIjB,KAAA2H,YAAc,WACV,OAAO,EAAKxE,QACL,EAAK2D,mBAAkB,eAC1B,CAAC9G,OAAQ,SAIjB,KAAA4H,OAAS,gD,wDAGc,OAFnBtG,KAAKqF,WAAW,MAAO,oBAEJ,GAAMrF,KAAKuG,oBACvBvG,KAAKwF,mBAAkB,UAC1B,CAAC9G,OAAQ,U,OASb,OAXOI,EAAY,SAGlB,UAEY0H,KACTxG,KAAK+D,MAAQ,IAGjB/D,KAAK6D,cAAgB,GAEd,CAAP,EAAO/E,WAKX,KAAA+C,QAAU,SAAUrD,EAAaN,GAAgB,qC,kDAC9B,SAAM8B,KAAKuG,oBAAuB/H,EAAKN,I,OAEtD,MAAO,CAAP,EAFe,SAA+C,cAKlE,KAAAqI,oBAAsB,SAAU/H,EAAaN,GAAgB,qC,oEACxC,SAAM,EAAMM,EAAKwB,KAAKyG,WAAWvI,K,OAA5CY,EAAW,SACXL,EAkKd,SAAoCiI,GAChC,IAAMjI,EAAU,IAAIkI,IAChBC,EAAgB,IAAID,IAcxB,OAbAD,EAAgBG,SAAQ,SAACC,EAAalH,GAClC,IAAMmH,EAAiBnH,EAAIoH,QAAQ,YAAY,SAACC,GAAM,OAAAA,EAAEC,iBACpDC,EAAUL,EACd,GAAIA,GAAOA,EAAIM,MAAM,eAAgB,CACjC,IAAMC,EAAsBP,EAAIQ,MAAM,MACtCH,EAAUE,EAAoBE,QAC9B,IAAMC,EAAoB,IAAIb,IAC1BU,EAAoB9F,KAAI,SAACkG,GAAW,OAAAA,EAAEH,MAAM,WAEhDV,EAAgB,IAAID,IAAI,EAAD,OAAKC,IAAa,EAAKY,KAElD/I,EAAQiJ,IAAIX,EAAgBI,MAEzB,IAAIR,IAAI,EAAD,OAAKlI,IAAO,EAAKmI,KAlLXe,CAA2B7I,EAASL,S,iBAIzC,O,sBAAA,GAAMK,EAAS8I,Q,cAAtBnF,EAAO,S,aAEP,M,SAAM,IAAI,EAAYzC,KAAK4B,SAAU,CACjCoD,QAAS,6CACT6C,KAAM,CACFxF,GAAI,kCACJyF,eAAgB,8CAEpBtJ,IAAG,I,OAkBX,GAdIC,EAAQsJ,IAAIzE,KAAyB7E,EAAQS,IAAI,mBAC3C2E,EAAgBpF,EAAQS,IAAIoE,KACbtD,KAAK6D,gBAAkBA,IACxC7D,KAAK6D,cAAgBA,GAIzBpF,EAAQsJ,IAAI1E,KACNS,EAAYrF,EAAQS,IAAImE,KACbrD,KAAK8D,YAAcA,IAChC9D,KAAK8D,UAAYA,GAIrBhF,EAAS0H,GACT,MAAO,CAAP,EAAO,CACH1H,SAAQ,EACRL,QAASA,EACTgE,KAAI,IAYZ,MAPMuF,EAAQvF,GAAQA,EAAKuF,MAAQvF,EAAKuF,MAAQvF,EAC1CwF,EAAMD,EAAMhD,SAAW,GAEzBhF,KAAK0D,cACLR,QAAQ8E,MAAMC,GAGZ,IAAI,EAAYjI,KAAK4B,SAAU,CACjCoD,QAASiD,EACTC,gBAAiBzF,EAAKJ,GACtB8F,YAAaH,EAAMI,KACnB5J,IAAG,YAgCX,KAAA6J,eAAiB,SAACC,EAAqBC,GACnC,OAAO,EAAK1G,QACL,EAAK2D,mBAAkB,2BAC1B,CAAC9G,OAAQ,OAAQgE,KAAMC,KAAKC,UAAU,CAClC0F,YAAaA,EACbC,YAAaA,OAKzB,KAAAC,YAAc,SAACC,EAAeL,GAC1B,OAAO,EAAKvG,QACL,EAAK2D,mBAAkB,yBAC1B,CAAC9G,OAAQ,OAAQgE,KAAMC,KAAKC,UAAU,CAClC6F,MAAOA,EACPL,KAAMA,OAKlB,KAAAM,aAAe,SAACC,EAAgBP,GAC5B,OAAO,EAAKvG,QACL,EAAK2D,mBAAkB,0BAC1B,CAAC9G,OAAQ,OAAQgE,KAAMC,KAAKC,UAAU,CAClC+F,OAAQA,EACRP,KAAMA,OAKlB,KAAAQ,QAAU,SAAS7I,GAGf,OAFAC,KAAK4E,SAAW5E,KAAK4E,UAAY,GACnB5E,KAAK4E,SAAS7E,GAAcC,KAAK4E,SAAS7E,IAAe,IAAI,EAAQC,KAAMD,IA8CjG,OA3cI,YAAA6B,OAAA,WACI,IAAI5B,KAAKxB,IAAI,CACT,IACIqK,EADO,IAAIC,IAAIC,OAAOC,SAASC,MACpBC,SAAS5B,MAAM,aAC1B6B,EAAuB,GAI3B,OAHGN,EAAInJ,OAAS,IACZyJ,EAAuBN,EAAI,IAExBM,EAEX,OAAOnJ,KAAKxB,KAGhB,YAAA4K,eAAA,SAAeC,GACX,MAAuB,kBAAZA,GAAyBA,EAAQC,WAAW,KAGhDtJ,KAAK4B,SAAWyH,EAFZA,GAKf,YAAAE,OAAA,SAAO/K,GACHwB,KAAKxB,IAAMA,GAGf,YAAAgL,aAAA,SAAarF,GACTnE,KAAKmE,UAAYA,GAGrB,YAAAsF,SAAA,WACI,OAAOzJ,KAAK+D,OAGhB,YAAA2F,SAAA,SAAS3F,GACL/D,KAAK+D,MAAQA,GAGjB,YAAAzD,UAAA,WACI,OAAON,KAAKK,QAGhB,YAAAG,WAAA,WACI,OAAOR,KAAKO,SAGhB,YAAAoJ,WAAA,SAAWpJ,GACPP,KAAKO,QAAUA,GAGnB,YAAAqJ,aAAA,WACI,OAAI5J,KAAKQ,cAAgBR,KAAKyJ,WACnBzJ,KAAKQ,aAAe,IAAMR,KAAKyJ,WAE/BzJ,KAAKyJ,YAGpB,YAAAI,QAAA,SAAQC,GACJ9J,KAAKiE,KAAO6F,GAGhB,YAAAC,kBAAA,SAAkBxE,GACdvF,KAAKqE,eAAe,mBAAqBkB,GAG7C,YAAAyE,iBAAA,SAAiBC,GACbjK,KAAKoE,cAAgB6F,GAGzB,YAAAC,kBAAA,SAAkBC,GACdnK,KAAKuE,eAAiB4F,GAG1B,YAAAC,UAAA,SAAU/J,GACNL,KAAKK,OAASA,GAGlB,YAAAgK,aAAA,SAAaC,GACTtK,KAAKuK,UAAYD,GAGrB,YAAAE,gBAAA,SAAgBlG,GACZtE,KAAKsE,aAAeA,GAGxB,YAAAmG,mBAAA,WACIzK,KAAKwE,gBAAiB,GAG1B,YAAAkG,iBAAA,WACI,OAAO1K,KAAK6D,eAGhB,YAAA8G,cAAA,WACI,OAAO3K,KAAKkE,YAGhB,YAAAjC,aAAA,WACI,MAAO,GAAGjC,KAAK4B,SAAW5B,KAAKkE,YAGnC,YAAAsB,iBAAA,WACI,OAAUxF,KAAKiC,eAAc,aAGjC,YAAA2I,kBAAA,WACI,OAAU5K,KAAK4B,SAAQ,kBAAkB5B,KAAKQ,cAGlD,YAAAqK,kBAAA,WACI,GAAwB,qBAAbC,UAAuD,qBAApBA,SAASC,OAEnD,IADA,IAAMC,EAAUF,SAASC,OAAOzD,MAAM,KAC7BrJ,EAAI,EAAGA,EAAI+M,EAAQtL,OAAQzB,IAAK,CACrC,IAAM8M,EAASC,EAAQ/M,GAAGgN,OAC1B,GAAIF,EAAOzB,WAAW,WAClB,OAAOyB,EAAO/D,QAAQ,UAAW,IAI7C,MAAO,IAGX,YAAAP,WAAA,SAAWvI,G,MACDgN,EAAU,KAAgBhN,GAE1BO,EAAO,UAzKS,oBA0KO,iBAAgB,GACtCuB,KAAKqE,gBAGRrE,KAAK4J,iBACLnL,EAAmB,cAAO0M,UAAiBnL,KAAK4J,gBAGpD,IAAME,EAAY9J,KAAKiE,MAAQjE,KAAK6K,oBAiBpC,OAhBI3M,EAAQQ,QAA2C,QAAjCR,EAAQQ,OAAO0M,eAA2BtB,IAC5DrL,EAjLgB,gBAiLeqL,GAG/B9J,KAAKuE,iBACL2G,EAAWG,YAAc,WAGzBrL,KAAKmE,YACL1F,EA3Lc,cA2LeuB,KAAKmE,WAGlC+G,EAAWzM,SACXgB,OAAO6L,OAAO7M,EAASyM,EAAWzM,SAG/B,EAAP,KACOyM,GAAU,CACbzM,QAAO,KA0Mf,YAAA4G,WAAA,SAAWkG,EAAkBC,EAAeC,GACxC,GAAKzL,KAAKwE,eAIS/E,OAAO6L,OAAO,CAC7BC,SAAQ,EACRG,KAAMF,EAENG,eAAgB3L,KAAKK,QACtBoL,IAgGX,EA5eA,GAigBA,kBAUI,WAAYpC,EAAiB5G,GAA7B,MACI,YAAMA,EAAKuC,QAAU,KCliBtB,SAA4BqE,EAASuC,GACxC,IAAIpN,EAAMoN,EAMJC,GAHNrN,EAAMA,EAAIsN,UAAUzC,EAAQ3J,SAGVqM,QAAQ,MACX,IAAXF,IACArN,EAAMA,EAAIsN,UAAU,EAAGD,IAQ3B,IAAMG,EAAY,CACd,MAAO,KAAM,QAAS,QAAS,SAAU,OAAQ,UAAW,WAAY,QAAS,YAAa,WAC9F,QAAS,cAAe,QAAS,WAAY,WAAY,QAAS,OAAQ,QAAS,QAAS,QAC5F,iBAAkB,OAAQ,UAAW,QAAS,SAAU,YAAa,UAAW,oBAAqB,QACrG,MAAO,WAAY,QAAS,OAAQ,SAAU,SAAU,mBAAoB,QAAS,SAAU,MAC/F,YAAa,KAAM,WAAY,QAAS,UAAW,WAAY,SAAU,MAAO,SAAU,SAAU,SACpG,SAAU,SAAU,aAAc,YAAa,cAAe,SAAU,UAAW,SAAU,SAAU,SACvG,SAAU,QAAS,QAAS,SAAU,cAAe,SAAU,QAAS,UAAW,OAAQ,sBAC3F,SAAU,OAAQ,UAAW,SAAU,MAAO,QAAS,YAAa,UAAW,YAAa,UAAW,OACvG,SAAU,OAAQ,OAAQ,SAAU,SAAU,UAAW,YAAa,SAAU,QAAS,cACzF,eAAgB,UAAW,eAAgB,SAAU,OAAQ,SAAU,SAAU,cAAe,UAAW,OAC3G,SAAU,aAAc,WAAY,UAAW,aAAc,UAAW,UAAW,OAAQ,OAAQ,OAAQ,OAC3G,cAAe,SAAU,UAAW,MAAO,gBAAiB,gBAAiB,YAAa,MAAO,SAAU,QAgB/G,OAbAxN,EAAMA,EAAI8I,MAAM,KAAK/F,KAAI,SAAC0K,GACtB,MAAa,KAATA,IAA4C,IAA7BD,EAAUD,QAAQE,GAC1B,aAGJA,KACRxK,KAAK,MAEO,IAAXoK,IAEArN,GAAO,eAGJA,EDqfyB0N,CAAmB7C,EAAS5G,EAAKjE,KAAO,MAAI,K,OAExE,EAAKwG,QAAUvC,EAAKuC,QACpB,EAAKxG,IAAMiE,EAAKjE,IAChB,EAAKqJ,KAAOpF,EAAKoF,KACjB,EAAKK,gBAAkBzF,EAAKyF,gBAC5B,EAAKC,YAAc1F,EAAK0F,YAIxB1I,OAAO0M,eAAe,EAAM,UAAW,CAACC,YAAY,I,EAE5D,OAvBiC,OAuBjC,EAvBA,CAAiCC,O,SEzhB7B,EAAmB,IACnBC,EAAW,mIACX,EAAWC,aAAaC,QAAQ,mBAChC,EAASD,aAAaC,QAAQ,kBAC9B,EAAYD,aAAaC,QAAQ,iBACjC,EAAS,QAETC,EAAS,cAAI1D,OAAQ,kBAAmB,IAC5C,EAAU0D,EAAOC,SAAW,EAC5B,EAAWD,EAAOE,UAAY,EAC9B,EAASF,EAAOpM,QAAU,EAC1B,EAAYoM,EAAOzI,WAAa,EAChC,EAASyI,EAAOlH,QAAU,EAC1B+G,EAAMG,EAAOH,KAAOA,EAEb,IAAMM,EAAW,IACvBC,MAAM,WAAY,CACjBC,OAlBa,KAmBbJ,QAAO,EACPC,SAAU,IAAMI,UAAU,IAAMC,QAChC3M,OAAQ,IAAM0M,UAAU,IAAMC,QAC9BhJ,UAAW,IAAM+I,UAAU,IAAMC,QACjCzH,OAAQ,IAAMwH,UAAU,IAAMC,QAC9BC,qBAAsB,IAAMF,UAAU,IAAMC,QAC5CE,gBAAiB,IAAMH,UAAU,IAAMC,QACvCV,IAAK,IAAMa,WAEZC,SAAQ,SAAAC,GACP,MAAO,CACLC,WAAY,SAACZ,GACTW,EAAKX,QAAUA,GAEnBa,YAAa,SAACZ,GACVU,EAAKV,SAAWA,EACZA,EACFJ,aAAaiB,QAAQ,kBAAmBb,GAExCJ,aAAakB,WAAW,oBAE9BrD,UAAW,SAAC/J,GACRgN,EAAKhN,OAASA,EACVA,EACFkM,aAAaiB,QAAQ,iBAAkBnN,GAErCkM,aAAakB,WAAW,mBAEhCC,aAAc,SAAC1J,GACXqJ,EAAKrJ,UAAYA,EACbA,EACFuI,aAAaiB,QAAQ,gBAAiBxJ,GAEtCuI,aAAakB,WAAW,kBAE9BE,UAAS,SAACpI,GACN8H,EAAK9H,OAASA,GAElBqI,wBAAA,SAAwB3H,GACtBoH,EAAKJ,qBAAuBhH,GAE9B4H,mBAAA,SAAmBxL,GACjBgL,EAAKH,gBAAkB7K,OAI5ByL,OAAO,CACNpB,QAAO,EACPC,SAAQ,EACRtM,OAAM,EACN2D,UAAS,EACTuB,OAAM,EACN+G,IAAG,I,80CClECxM,EAAS,IAAI,EAEnBA,EAAOyJ,OAAOqD,EAASF,SACvB5M,EAAOsK,UAAUwC,EAASvM,QAC1BP,EAAO4J,SAASkD,EAAS5I,WACzBlE,EAAO6J,WAAWiD,EAASD,UAE3B,YAAWC,GAAU,WACnB9M,EAAOyJ,OAAOqD,EAASF,SACvB5M,EAAOsK,UAAUwC,EAASvM,QAC1BP,EAAO4J,SAASkD,EAAS5I,WACzBlE,EAAO6J,WAAWiD,EAASD,aAK7B,IAyCaoB,EAAM,CACjBjO,OAAM,EACNkO,cA3CoB,SAAOC,GAAqB,0C,wDAEhD,OAAKA,EAGU,GAAMnO,EAAO8I,QAAQqF,GAAetM,aAFjD,I,OAMF,OAJMuM,EAAS,SAGf,YAAoBA,GACb,CAAP,EAAOA,WAmCPC,yBAhC+B,SAAOF,EAAuBlM,GAAgB,0C,kDAC7E,OAAKkM,GAAkBlM,EAGhB,GAAMjC,EAAO8I,QAAQqF,GAAenM,qBAAqBC,IAF9D,I,OAEF,MAAO,CAAP,EAAO,kBA6BPqM,eA1BqB,SAAOH,EAAuB/N,EAAcS,EAAazC,GAAa,0C,kDAC3E,SAAM4B,EAAO8I,QAAQqF,GAAejM,KAAK9B,EAASS,EAAQzC,I,OAC1E,MAAO,CAAP,EADgB,kBA0BhBmQ,aAtBmB,SAAOJ,EAAuBK,EAAwB7L,GAAS,0C,kDACnE,SAAM3C,EAAO8I,QAAQqF,GAAepL,OAAOyL,EAAgB7L,I,OAE1E,MAAO,CAAP,EAFe,kBAsBf8L,aAjBmB,SAAON,EAAuBxL,GAAS,0C,kDAC3C,SAAM3C,EAAO8I,QAAQqF,GAAezL,OAAOC,I,OAC1D,MAAO,CAAP,EADe,kBAiBf+L,aAbmB,SAAOP,EAAuBK,GAAsB,0C,kDACxD,SAAMxO,EAAO8I,QAAQqF,GAAenL,OAAOwL,I,OAE1D,MAAO,CAAP,EAFe,mBCnDJG,IAPiB,IAAM5B,MAAM,CACxCxK,GAAI,IAAMqM,WACVzI,KAAM,IAAM+G,OACZ2B,SAAU,IAAMC,QAChBC,SAAU,IAAMD,UAGO,IAAM/B,MAAM,CACnCxK,GAAI,IAAMqM,WAGVI,KAAM,IAAMC,MAAM,IAAM/B,OAAQ,IAAM3N,WACtCmC,MAAO,IAAM2L,WACZC,SAAQ,SAAAC,GAAQ,OAEjB2B,QAAA,SAAQC,GACN5B,EAAKyB,KAAOG,GAEdC,SAAQ,SAAC1N,GACP6L,EAAK7L,MAAQA,QAIJ2N,GAAQ,IAAMtC,MAAM,CAC/BuC,MAAO,IAAMC,SAAS,IAAM9N,IAAIkN,IAAY,MAE7CrB,SAAQ,SAACC,GAeR,MAAO,CACLiC,SAfe,SAACjN,GAChB,IAAKA,EACH,OAAO,KACT,IAAMkN,EAAOlC,EAAK+B,MAAMlQ,IAAImD,GAC5B,GAAIkN,EACF,OAAOA,EAET,IAAMC,EAAUf,GAAUX,OAAO,CAC/BzL,GAAE,EACFyM,KAAM,SAGR,OADAzB,EAAK+B,MAAMK,IAAID,GACRA,OAKR1B,S,yiCCzCU4B,GAAc,IAAM7C,MAAM,CACrCxK,GAAI,IAAMqM,WACVT,cAAe,IAAMjB,OACrBrM,OAAQ,IAAMgP,MAAM,IAAM3C,QAC1BvK,KAAM,IAAM0K,SACZyC,YAAa,IAAMzC,SACnB0C,WAAW,IAEZzC,SAAQ,SAACC,GA8BR,MAAO,CACLyC,WA7BiB,aAAK,W,+DAUR,O,sBARN5P,EAAU,CAAC,MAAO,IAAKmN,EAAKhL,IAQlC,EAAAgL,EAAY,GAAMU,EAAIK,eAAef,EAAKY,cAAe/N,EAASmN,EAAK1M,S,OAEpD,OAFnB,EAAK8B,KAAO,SAEZ,EAAA4K,EAAmB,GAAMU,EAAII,yBAAyBd,EAAKY,cAAeZ,EAAKhL,K,cAA/E,EAAKuN,YAAc,SACnBvC,EAAKwC,WAAY,E,+BAEjB3M,QAAQ8E,MAAM,yBAAyBqF,EAAKhL,GAAE,IAAK,G,8BAerDmM,aAXmB,aAAK,W,yDAEf,O,sBAAA,GAAMT,EAAIS,aAAanB,EAAKY,cAAeZ,EAAKhL,K,OAAvD,MAAO,CAAP,EAAO,U,yBAGPa,QAAQ8E,MAAM,2BAA2BqF,EAAKhL,GAAE,IAAK,G,kCAU9C0N,GAAkB,IAAMlD,MAAM,CACzCxK,GAAI,IAAMqM,WACVT,cAAe,IAAMjB,OACrB9M,QAAS,IAAM8M,OACfrM,OAAQ,IAAMgP,MAAM,IAAM3C,QAC1B9O,QAAS,IAAM6Q,MAAM,IAAM/B,OAAQ,IAAM3N,WACzC2Q,YAAa,IAAMhD,OACnB6C,WAAW,IAEZI,OAAM,SAAC5C,GAAS,OACf,WACE,OAAKA,EAAK2C,YAEHrN,KAAKuN,MAAM7C,EAAK2C,aADd,UAIZ5C,SAAQ,SAACC,GAaR,MAAO,CACL8C,YAbkB,aAAK,W,+DAIR,O,sBAFPjQ,EAAUyC,KAAKuN,MAAM7C,EAAKnN,SAC1BhC,EAAUmP,EAAKnP,QAAUyE,KAAKuN,MAAM7C,EAAKnP,cAAWmB,EAC7C,GAAM0O,EAAIK,eAAef,EAAKY,cAAe/N,EAASmN,EAAK1M,OAAQzC,I,cAA1E0J,EAAO,SACbyF,EAAK2C,YAAcrN,KAAKC,UAAUgF,GAClCyF,EAAKwC,WAAY,E,+BAEjB3M,QAAQ8E,MAAM,yBAAyBqF,EAAKhL,GAAE,IAAK,G,kCAS5C+N,GAAc,IAAMvD,MAAM,CACrCxK,GAAI,IAAMqM,WACV2B,OAAQ,IAAMlD,SACdmD,aAAc,IAAM/O,IAAImO,IACxBa,iBAAkB,IAAMhP,IAAIwO,IAC5BF,WAAW,IAEZzC,SAAQ,SAACC,GAkER,MAAO,CACLmD,WAjEiB,aAAK,W,2DAEN,O,sBAAd,EAAAnD,EAAc,GAAMU,EAAIC,cAAcX,EAAKhL,K,OAI3C,OAJA,EAAKgO,OAAS,SACdhD,EAAKwC,WAAY,EACD9G,OAAO0H,QACfC,QAAQrD,EAAKhL,IAAMgL,EAAKgD,OACzB,CAAP,EAAOhD,G,yBAEPnK,QAAQ8E,MAAM,yBAAyBqF,EAAKhL,GAAE,IAAK,G,8BA0DrDsO,UAtDgB,SAAC5O,EAAkBpB,GACnC,IAAKoB,EACH,OAAO,KACT,IAAMK,EAASiL,EAAKiD,aAAapR,IAAI6C,GACrC,GAAIK,EACF,OAAOA,EACT,IAAMwO,EAAYlB,GAAY5B,OAAO,CACnCzL,GAAIN,EACJkM,cAAeZ,EAAKhL,GACpB1B,OAAM,EACN8B,KAAM,GACNoN,WAAW,IAIb,OAFAxC,EAAKiD,aAAab,IAAImB,GACtBA,EAAUd,aACHc,GAwCPpC,aArCmB,SAACzM,GACpB,IAAKA,EACH,OAAO,KAET,IAAMK,EAASiL,EAAKiD,aAAapR,IAAI6C,GACjCK,IACFA,EAAOoM,eACPnB,EAAKiD,aAAaxN,OAAOf,KA+B3B8O,cA3BoB,SAAC3Q,EAAcS,EAAazC,GAChD,IAAM4S,EAAmBnO,KAAKC,UAAU1C,GAElC6Q,GADkBpO,KAAKC,UAAUjC,GACdzC,EAAUyE,KAAKC,UAAU1E,GAAW,IACvD8S,EAAeF,EACfG,EAAa5D,EAAKkD,iBAAiBrR,IAAI8R,GAC7C,GAAIC,EACF,OAAOA,EAET,IAAMC,EAAgBnB,GAAgBjC,OAAO,CAC3CzL,GAAI2O,EACJ/C,cAAeZ,EAAKhL,GACpBnC,QAAS4Q,EACTnQ,OAAM,EACNzC,QAAS6S,EACTf,YAAa,GACbH,WAAW,IAIb,OAFAxC,EAAKkD,iBAAiBd,IAAIyB,GAC1BA,EAAcf,cACPe,OAWER,GAAU,IAAM7D,MAAM,CACjCsE,QAAS,IAAM9B,SAAS,IAAM9N,IAAI6O,IAAc,MAEjDhD,SAAQ,SAACC,GAiBR,MAAO,CACL+D,UAjBgB,SAACnD,GACjB,IAAKA,EACH,OAAO,KACT,IAAMC,EAASb,EAAK8D,QAAQjS,IAAI+O,GAChC,GAAIC,EACF,OAAOA,EAET,IAAMmD,EAAYjB,GAAYtC,OAAO,CACnCzL,GAAI4L,EACJoC,OAAQ,GACRR,WAAW,IAIb,OAFAxC,EAAK8D,QAAQ1B,IAAI4B,GACjBA,EAAUb,aACHa,OAKRvD,S,yiCCvLUwD,GAAe,IAAMzE,MAAM,CACpCxK,GAAI,IAAMqM,WACVzI,KAAM,IAAM8G,UAAU,IAAMC,QAC5BuE,KAAM,IAAMxE,UAAU,IAAMC,QAC5BwE,KAAM,IAAMzE,UAAU,IAAMC,QAC5ByE,OAAQ,IAAM1E,UAAU,IAAMC,QAC9B0E,YAAa,IAAM3E,UAAU,IAAMC,QACnC2E,SAAU,IAAMxE,WAGPyE,GAAO,IAAM/E,MAAM,CAC5BgF,MAAO,IAAMxC,SAAS,IAAM9N,IAAI+P,IAAe,IAC/CQ,aAAc,IAAM/E,UAAU,IAAMC,QACpC+E,WAAY,IAAMhF,UAAUuE,MAC7BlE,SAAQ,SAACC,GACR,IAAM2E,EAAY,aAAK,W,yDAED,O,sBAAA,GAAMjE,EAAIjO,OAAO+B,QAAQkM,EAAIjO,OAAO8B,SAAW,0BAA2B,CAAElD,OAAQ,S,OAElG,OAKR,SAAkBmT,GACd,IAAEI,KAAKJ,GAAO,SAASK,GACnB7E,EAAKwE,MAAMpC,IAAIyC,MARfC,CADc,UAEP,CAAP,EAAO9E,EAAKwE,O,yBAEZ3O,QAAQ8E,MAAM,6BAA8B,G,8BAQpD,IAAMoK,EAAW,WACb,GAAI/E,EAAKwE,OAASxE,EAAKwE,MAAMQ,KACzB,OAAOhF,EAAKwE,MAEEG,IACd,OAAO3E,EAAKwE,OAgBpB,MAAO,CACHO,SAAQ,EACRE,cAfkB,WAClB,IAAMT,EAAQO,IACVG,EAAMV,EAAM3S,IAAImO,EAAKyE,cASzB,OARIS,GACGV,EAAMQ,KAAO,KACZE,EAAMV,EAAM3S,IAAImO,EAAKyE,iBAEjBS,EAAMV,EAAM3S,IAAI,IAAEM,KAAKqS,EAAMW,UAAU,MAI5CD,GAKPE,gBAAiB,SAASC,GACtBrF,EAAKyE,aAAeY,OAI7B5E,S,yiCC1DU6E,GAAO,IAAM9F,MAAM,CAC9B+F,GAAI,IAAM7F,UAAU,IAAMI,UAC1B0C,WAAW,EACXgD,eAAe,IAEhBzF,SAAQ,SAAAC,GACP,IAAMyF,EAAQ,SAACrS,GACb4M,EAAKuF,GAAKnS,GAENsS,EAAU,WACdnG,EAASxC,UAAU,MACnBwC,EAASc,aAAa,OAGlBsF,EAAS,aAAK,W,2DAKL,O,sBAHX3F,EAAKwC,WAAY,EAEjB9B,EAAIjO,OAAO6J,WAAW,MACX,GAAMoE,EAAIjO,OAAOsG,S,OAS5B,OATMwM,EAAK,SACXhG,EAASxC,UAAUwI,EAAGxP,KAClBwP,EAAGK,OAAOvT,OAAO,IACnBqO,EAAIjO,OAAO6J,WAAWiJ,EAAGK,OAAO,GAAG7P,KACnCwJ,EAASW,YAAYqF,EAAGK,OAAO,GAAG7P,MAEpC0P,EAAMF,GACNvF,EAAKwC,WAAY,EACjBxC,EAAKwF,eAAgB,EACd,CAAP,EAAOD,G,OAMP,O,WAJAvF,EAAKwC,WAAY,EACjBxC,EAAKwF,eAAgB,EACrBC,EAAM,MACN5P,QAAQ8E,MAAM,2BAA4B,GACnC,CAAP,EAAO,M,wBAQX,MAAO,CACLgL,OAAM,EACN5M,MAPY,WAGZ,OAFKiH,EAAKuF,IAAOvF,EAAKwF,eACpBG,IACK3F,EAAKuF,IAKZ1N,MAAO,aAAK,SAAgBgO,EAAWC,G,qEACrC9F,EAAKwC,WAAY,EACbpH,EAAQ,GACRE,EAAS,GACTyK,EAAW,GACXF,IACIA,EAAUnH,QAAQ,KAAO,EACzBtD,EAAQyK,EACoB,KAArBA,EAAUxT,QAAiB,IAAI2T,OAAOH,GAAa,KAC1DvK,EAASuK,EAETE,EAAWF,GAIbzS,EAAO,CAAEgI,MAAOA,EAAOE,OAAQA,EAAQyK,SAAUA,EAAU7S,QAAS,I,iBAGzD,O,sBAAA,GAAMwN,EAAIjO,OAAOoF,MAAMzE,EAAM0S,I,OAQ1C,OARM1Q,EAAO,UACJsB,QACPgK,EAAIjO,OAAO4J,SAASjH,EAAKsB,OACzB6I,EAASc,aAAajL,EAAKsB,QAEvB6O,EAAKD,GAAKK,SAChB3F,EAAKwC,WAAY,EACjBxC,EAAKwF,eAAgB,EACd,CAAP,EAAOD,G,yBAETvF,EAAKwC,WAAY,EACjBxC,EAAKwF,eAAgB,EACrB3P,QAAQ8E,MAAM,2BAA4B,GAC1C+K,I,8BAGJzM,OAAQ,aAAK,W,yDAEL,O,sBAAA,GAAMyH,EAAIjO,OAAOwG,U,cAAjB,SACAwM,EAAM,MACNlG,EAASxC,UAAU,MACnBwC,EAASc,aAAa,MACtBd,EAASW,YAAY,MACrBwF,I,+BAEA7P,QAAQ8E,MAAM,2BAA4B,GAC1C+K,I,8BAGRO,YAAW,iBAIZxF,S,yiCC/FUyF,GAAa,IAAM1G,MAAM,CAClCxK,GAAI,IAAMqM,WACVmB,WAAW,EACXpN,KAAM,IAAM0K,WACbC,SAAQ,SAACC,GAsBR,MAAO,CACHmG,SAtBa,aAAK,SAAmBC,G,+DAEjB,O,sBAAA,GAAM1F,EAAIjO,OAAO+B,QAAQkM,EAAIjO,OAAO8B,SAAW,0DAA0D6R,EAAO,WAAY,CAAE/U,OAAQ,U,cAAhJgV,EAAU,SACZ,EAAO,CACPC,QAAS,GACTC,KAAMF,GAEN,EAAU,GACd,IAAEzB,KAAKyB,GAAS,SAASG,GACrB,EAAU,IAAE9E,MAAM,IAAE7M,OAAO,EAAS,IAAE1C,KAAKqU,QAG/C,IAAE5B,KAAK,GAAS,SAAS6B,GACrB,EAAKH,QAAQrV,KAAK,CAACoN,KAAM,GAAIzF,KAAM6N,OAEvCzG,EAAK5K,KAAO,EACZ4K,EAAKwC,WAAY,E,+BAEjB3M,QAAQ8E,MAAM,6BAA8B,G,kCAQ3C+L,GAAU,IAAMlH,MAAM,CAC/BkH,QAAS,IAAM1E,SAAS,IAAM9N,IAAIgS,IAAa,MAChDnG,SAAQ,SAACC,GACR,MAAO,CACH2G,QAAS,SAASP,GACd,IAAIA,EACA,OAAO,KAEX,IAAM9T,EAAQ0N,EAAK0G,QAAQ7U,IAAIuU,GAC/B,GAAG9T,EACC,OAAOA,EAEX,IAAMsU,EAAWV,GAAWzF,OAAO,CAC/BzL,GAAIoR,EACJhR,KAAM,GACNoN,WAAW,IAIf,OAFAxC,EAAK0G,QAAQtE,IAAIwE,GACjBA,EAAST,SAASC,GACXQ,OAGhBnG,SCnDGoG,GAAS,CACb/E,MAAK,GACLuB,QAAO,GACP9D,SAAQ,EACRmB,IAAG,EACH6D,KAAI,GACJe,KAAI,GACJoB,QAAO,IAINhL,OAAemL,OAASA,GAqB3BnL,OAAO0H,QAAU,GACjB1H,OAAO0H,QAAQC,QAAU,G,miBClBZyD,GAAO,aAAS,SAAC1I,GAE1B,MASEA,EAAK,KATD2I,OAAM,IAAG,YAAS,EAExBC,GAOE5I,EAAK,KAALA,EAAK,QANPkG,EAMElG,EAAK,SALP6I,EAKE7I,EAAK,UAJP8I,EAIE9I,EAAK,YAHP+I,EAGE/I,EAAK,aAFPgJ,EAEEhJ,EAAK,QADJiJ,EAAI,GACLjJ,EAVE,wFAYA8D,EAAOJ,GAAMG,SAAS8E,GAEtBO,EACO,eAAXN,EACI,CACEO,WAAY,OACZC,SAAU,CAAEC,KAAM,GAClBC,WAAY,CAAED,KAAM,KAEtB,KAEAE,EAA4B,SAAbzF,EAAKT,MAAwB,CAEhDmG,aAAc,CACZC,UAAW,eACXC,WAAY,gBAEdC,iBAAkB,CAChBC,QAAS,WACP9F,EAAKP,QAAQ,WAKfsG,GAAa,EACF,QAAZ/F,EAAKT,OACNwG,EAAa,IAAEC,UAAUjB,GAAaA,EAAYA,GAAaU,GAGjE,IAQMQ,EAAY,UAChBvP,KAAMmO,EACNqB,UAAW,eACX3G,KAAMS,EAAKT,KACXuF,OAAM,GACHM,GACAD,GAAI,CACPJ,UAAWgB,EACXb,QAAO,EACPiB,cAjBoB,SAACtG,EAAWkF,GAChC,OACE,cADK,CACL,sBACGlF,EACAkF,SAAS,MAgBZqB,EAAgBC,EAAA,EASpB,OARGrB,IACDoB,EAAgBE,EAAA,GAGfrB,IACDmB,EAAgBG,EAAA,GAId,aADG,CACFH,EAAa,MAAKH,EAAS,UACvB7D,SAAQ,MAMnBwC,GAAgB,UAAI,CAClBlO,KAAM,SACN6I,KAAM,SACNuF,OAAQ,SACR0B,cAAe,UCzGV,I,mmBCiBM,GAAQ,aAAS,SAACtK,GAC7B,IAAMuK,EAAU,IAAMC,WAAW,MAC3B7B,EAAS4B,EAAQ/P,KAAO+P,EAAQ/P,KAAO,UAE3CiQ,EAqBEzK,EAAK,WAdPoD,EAcEpD,EAAK,SAVP0K,GAUE1K,EAAK,KAALA,EAAK,WATP,EASEA,EAAK,OATP2K,OAAM,IAAG,GAAK,EACd,EAQE3K,EAAK,eARP4K,OAAc,IAAG,GAAI,EACrB,EAOE5K,EAAK,cAPP6K,OAAa,IAAG,KAAE,EAMf5B,EAAI,GACLjJ,EAtBE,wFAwBAqD,EAAOK,GAAMG,SAAS8E,GAAQtF,KAC9ByH,EAAsB,YACvBL,GACAI,GAAa,CAChBb,UAAW,cAAcU,EAAS,SAASrH,IAYzCsH,GACFG,EAAoBC,MAAQ,CAACC,WAAY,iBACrCT,EAAQU,UACVH,EAAoB1B,SAAW,CAAEC,KAAM,GACvCyB,EAAoBxB,WAAa,CAAED,KAAM,MAEzCyB,EAAoB3B,WAAa,OACjC2B,EAAoB1B,SAAW,CAAEC,KAAM,GACvCyB,EAAoBxB,WAAa,CAAED,KAAM,MAGvCkB,EAAQU,UACVH,EAAoB1B,SAAW,CAAEC,KAAM,GACvCyB,EAAoBxB,WAAa,CAAED,KAAM,MAEzCyB,EAAoB3B,WAAa,OACjC2B,EAAoB1B,SAAW,CAAEC,KAAM,GACvCyB,EAAoBxB,WAAa,CAAED,KAAM,KAK7C,IAAM6B,EAAe,aAAS,SAAClL,GAG3B,IAAAoD,EAImEpD,EAAK,SAHxEqD,EAGmErD,EAAK,KAFxEmL,EAEmEnL,EAAK,YADxEoL,EACmEpL,EAAK,WAAxEqL,EAAmErL,EAAK,kBAAdiJ,GAASjJ,EAAK,cAAV,GAAKA,EAL/D,qFAOAsL,EAAgB,IACpBC,UAAW,GACXH,WAAYpX,OAAO6L,OAAO,GAAIuL,EAAY,CACxCI,aAAcL,EACdM,oBAAqBJ,KAEpBpC,GAGL,IAAK7F,GAAqB,SAATC,EACf,OAAO,cAAC,KAAQ,IAACA,KAAK,QAAWiI,QAAa,GAIhD,IAAMI,EAAe,WACnBhI,GAAMG,SAAS8E,GAAQpF,QAAQ,SAG3BoI,EAAavI,EACjB,cAAC,KAAM,CACLwI,aAAa,UACbC,SAAS,OACTC,SAAS,QACTC,YAAY,YACZC,cAAc,2CACdC,QAAQ,aAAM,GAChB,cAAC,KAAM,CACLL,aAAa,UACbC,SAAS,OACTC,SAAS,QACTC,YAAY,YACZC,cAAc,2CACdC,QAAQ,OAERrC,QAAS,WACP8B,WACD,GAOL,OACE,cADK,CACJ,KAAI,MAJkB,GAKD,CACpBQ,KAAK,QACLC,cAAe,WAAa/I,GAAUsI,MAAiB,WAEvD,cAAC,KAAG,IAACU,KAAK,KAAG,UAAC,cAAC,KAAQ,IAAC/I,KAAK,QAAWiI,QAAa,UAAI,GACxDV,GAAmB,aAAD,CAAE,KAAG,IAACyB,MAAM,QAAM,UAAEV,SAAU,WAAQ,MAKzDW,EAAe,OAAAC,GAAA,IAEnB,SAACvM,GACC,OACE,aADK,CACJkL,EAAY,IAACR,UAAWA,GAAe1K,EAAK,CAAEqD,KAAMA,EAAMD,SAAUA,SAAQ,KAGjF,CACEsH,UAAS,IAGb,OAAQ,aAAD,CAAE4B,EAAY,MAAKrD,EAAI,CAAE5F,KAAMA,EAAMwH,cAAeC,SAAmB,MAGhF,GAAiB,UAAI,CACnBtQ,KAAM,SACNgS,MAAO,SACP9B,UAAW,U,oPC3JA+B,GAAe,aAAS,SAACzM,GAEpC,IAAM0M,EAAU,eAIdC,GAIE3M,EAAK,WAALA,EAAK,OAHP,EAGEA,EAAK,YAHP4M,OAAW,IAAG,GAAK,EACnB,EAEE5M,EAAK,QAFPkI,OAAO,IAAG,EAAa,OAAZwE,GAAgC,OAAZA,EAAmB,EAAG,EAAC,EACtDxG,EACElG,EAAK,SAEH6M,EAAa,CACjBC,gBAAiB,CAAC,iBAAkB,UAAU5E,EAAO,UACrD6E,IAAK,aAYP,OAAIH,EAEA,aADK,CACJ,KAAI,MAAKC,EAAU,UACjB3G,SAAQ,GAKX,aADK,CACJ,KAAiB,IAChBtP,GAAG,6BACH+V,MAAOA,GAAK,UAEZ,cAAC,KAAI,MAAKE,EAAU,UACjB3G,SAAQ,UACJ,M,gBChDR,I,UCGM8G,GAAc,IAAMC,cAAmB,I,4aCApC,IACZzP,KCDgB,CAClB0P,OAAQ,SAACC,EAAW,GAAY,aAC9B,OAAQ,aAAD,CAAC,QAAG3P,KAAM2P,GAAI,UAAGA,SAAI,IAE9BC,eAAgB,SAACC,EAAQrN,GAAe,OACtC,aADsC,CACrC,KAAK,IAACsN,YAAY,kCAAiB,OAALtN,QAAK,IAALA,OAAK,EAALA,EAAOoL,iBAAU,KDHhDpO,MEFiB,CACnBkQ,OAAQ,SAACC,EAAW,GAAY,a,IACxBI,EAAO,UAAYJ,EACzB,OAAQ,aAAD,CAAC,QAAG3P,KAAM+P,GAAI,UAAGJ,SAAI,IAE9BC,eAAgB,SAACC,EAAQrN,GAAe,OACtC,aADsC,CACrC,KAAK,IAACsN,YAAY,8CAAmB,OAALtN,QAAK,IAALA,OAAK,EAALA,EAAOoL,iBAAU,M,4jBCiB/C,SAASoC,GAAaxN,GAEzB,IAAAlG,EAGEkG,EAAK,OAFPyN,EAEEzN,EAAK,aADPkG,EACElG,EAAK,SAEH0N,EAAmB,CACvBtR,KAAM,MACDuR,GAAa7T,IAElB2T,aAAc,SAAKG,IAAeH,IAG9BI,EAAoB,CACxB/T,OAAQgU,GAAchU,IAGlBsC,EAAO2R,GAAejU,GAC5B,OACE,aADK,CACJkT,GAAYgB,SAAQ,IAACjY,MAAO,CAC3BqG,KAAI,EACJqR,aAAY,IACb,UACC,cAAC,WAAkB,MAAKI,EAAiB,UACvC,cAAC,WAAWG,SAAQ,IAACjY,MAAO2X,GAAgB,UACzCxH,SAAQ,UACW,UACH,GAMpB,IAAM4H,GAAoB,SAAChU,GAChC,OAAQA,GACN,IAAK,QACL,IAAK,QAAS,OAAO,GAAAmU,EACrB,IAAK,QAAS,OAAO,GAAAA,EACrB,QAAS,OAAO,GAAAA,IAIPN,GAAe,SAAC7T,GAC3B,OAAQA,GACN,IAAK,QAAS,OAAO,YACrB,IAAK,QAAS,OAAO,YACrB,IAAK,QAAS,OAAO,YACrB,QAAS,OAAO,cAIpB,SAASoU,GACPC,EACArI,EACAsI,G,QAGMC,EAAQvI,EAAKvK,QAAQ,aAAc,OAAOM,MAAM,KAClDuM,EAAS+F,EACT5U,EAAU6U,E,IAEd,IAAgB,SAAAC,GAAK,8BAAE,CAAlB,IAAMC,EAAC,QAGV,GAFA/U,EAAUvF,OAAOoU,GAAQkG,GACzBlG,EAASpU,OAAOoU,GAAQkG,QACR1a,IAAZ2F,EACF,OAAO6U,G,iGAGX,OAAO7U,EAST,IAAMgV,GAAoB,SAACzU,EAAgB0U,GAA6C,OACtFC,WAAY,SAAC7X,EAAYyF,GACvB,IAAI9C,EAAU2U,GAAwBM,EAAW5X,EAAIyF,GAKrD,OAJK9C,IACHA,EAAUoU,GAAa7T,GAAQ2U,WAAW7X,EAAI,KACzC2C,IACHA,EAAU2U,GAAwBJ,GAAchU,GAASlD,IACtD2C,GAAW8C,GAEpBvC,OAAM,IAGF4U,GAAWH,GAAkB,QCpHpB,CACbzK,KAAM,CACJ6K,KAAM,eACNC,OAAQ,kBDkHNC,GAAWN,GAAkB,QErHpB,CACbzK,KAAM,CACJ6K,KAAM,OACNC,OAAQ,YFoHNb,GAAiB,SAACjU,GACtB,OAAQA,GACN,IAAK,QAAS,OAAO+U,GACrB,IAAK,QACL,IAAK,QACL,QAAS,OAAOH,K,+NG3GPI,GAAc,aAAS,SAAC9O,GACnC,IAAMuK,EAAU,qBAAW,MACrB5B,EAAS4B,EAAQ/P,KAAK+P,EAAQ/P,KAAK,UAClBuU,GAA2B/O,EAAK,cAALA,EAAK,WAArBmL,EAAgBnL,EAAK,YAEjD0M,EAAU,gBACc,OAAZA,GAAgC,OAAZA,KAAsB1M,EAAMgP,gBAEhE7D,EAAY8D,SAAU,GAMxB,IAAI5L,EAAOK,GAAMG,SAAS8E,GAAQtF,KAC9B6L,EAAsB,CACxB1U,KAAMuU,EACN1L,KAAI,EACJmJ,MAAOrB,EAAYqB,MAAOrB,EAAYqB,MAAOuC,EAC7CzB,YAAanC,EAAYgE,KACzBC,OAAQjE,EAAYiE,OACpB1E,UAAWS,EAAYlL,KACvBiD,SAAUiI,EAAYjI,SAEtBE,SAAU+H,EAAY/H,SACtBuH,OAAQQ,EAAY8D,QACpB9D,YAAW,GAGD,QAAR9H,EAEE8H,EAAYkE,OACdH,EAAeE,QAAS,GAET,QAAR/L,GACL8H,EAAYkE,OACdH,EAAe9L,UAAW,GAI1B8L,EAAehM,WACjBgM,EAAeI,MAAQ,CACrB,CACEpM,UAAU,EACV3J,QAAS,qBAAM2V,EAAe1C,MAAK,SAKzC,IAAM3B,EAAoB,CACxB0E,OAAO,GAGHC,EAAWrE,EAAYsE,UAAYtE,EAAYsE,UAAY,GAEjE,OACE,aADK,CACJ,KAAiB,IAACjV,KAAMgV,GAAQ,UAC9B,SAACnE,GACA,OACE,aADK,CACJ,GAAK,IACJR,cAAeA,EACfQ,kBAAmBA,GACf6D,QAAc,WAEvB,M,8pECzCmB,aAAS,SAAClP,GAEhC,MAgBEA,EAAK,cAhBPwC,OAAa,IAAG,EAAArB,EAASK,qBAAoB,EAC7C,EAeExB,EAAK,cAfPsK,OAAa,IAAG,KAAE,EAClB,EAcEtK,EAAK,aAdP0P,OAAY,IAAG,KAAE,EACjB,EAaE1P,EAAK,SAbP1J,OAAQ,IAAG,EAAA6K,EAASM,gBAAe,EACnC,EAYEzB,EAAK,KAZD2I,OAAM,IAAG,YAAS,EACxB,EAWE3I,EAAK,KAXPqD,OAAI,IAAG,SAAM,EACb,EAUErD,EAAK,OAVP4I,OAAM,IAAG,aAAU,EACnB1C,EASElG,EAAK,SARP6I,EAQE7I,EAAK,UAPP8I,EAOE9I,EAAK,YANP+I,EAME/I,EAAK,aALP2P,EAKE3P,EAAK,YAJP4P,EAIE5P,EAAK,YAHPgJ,EAGEhJ,EAAK,QAFP6P,EAEE7P,EAAK,QADJiJ,EAAI,GACLjJ,EAjBE,wLAkBC8P,EAAD,GAAY,WAAQC,UAAS,GAArB,GAEDrM,GAAMG,SAAS8E,GACvBpF,QAAQF,GAIb,IAAM2M,EAAa,GACbC,EAAmB,GAGzB,IAAKzN,EACH,OAAO,KACT,IAAMC,EAASwC,GAAQU,UAAUnD,GACjC,GAAIC,EAAO2B,UAAW,OAAQ,aAAD,CAAC,gBAAK,cAAC,KAAI,iBAAE,GAE1C,GAAI3B,EAAOmC,OAAQ,CACjB,IAAMsL,EAAe,IAAEC,aAAa,GAAI1N,EAAOmC,OAAQ8K,GAoBvD,GAnBAO,EAAiBhc,OAAS,EAC1B,IAAEmH,QAAQ8U,EAAahb,QAAQ,SAACkb,EAAOrB,GAChCqB,EAAMC,OAAwB,QAAfD,EAAMC,OAAkC,KAAfD,EAAMC,QACjDD,EAAMC,MAAQ,gBAChB,IAAIC,EAAgB,WAAWC,KAAKxB,GAClB,QAAdqB,EAAMnQ,MAAgC,UAAdmQ,EAAMnQ,OAEhCmQ,EAAMnB,SAAU,GAGlB,IAAIuB,EAAc1H,GAAe,CAAC,aAAc,UAAW,WAAWxI,QAAQ8P,EAAMnQ,OAAS,EACxFmQ,EAAMhB,QAAWkB,GAAkBE,GACtCP,EAAiBpd,KAAK,IAAE4d,SAAS,CAACjW,KAAMuU,GAAYqB,OAGxD,IAAEhV,QAAQ6U,GAAkB,SAACG,GAC3BJ,EAAWnd,KAAKud,EAAM5V,SAGpBlE,EAAU,CACZ,IAAMoa,EAAcjO,EAAOyC,UAAU5O,EAAU0Z,GAC/C,GAAIU,EAAYtM,UACd,OAAQ,aAAD,CAAC,gBAAK,cAAC,KAAI,iBAAE,GAEtB,GAAGsM,EAAY1Z,MAAQ0Z,EAAY1Z,KAAKjB,OAAS2a,EAAY1Z,KAAKjB,MAAM9B,OAAS,EAAE,CACjF,IAAM,EAASyc,EAAY1Z,KAAKjB,MAAM,GACtC,IAAEqF,QAAQ4U,GAAY,SAACjB,GACjB,EAAOA,KACTzE,EAAcyE,GAAa,EAAOA,SA6D5C,OADAe,EAAQa,eAAerG,GAErB,cADK,CACJ5B,G,IAEClO,KAAMmO,EACNqB,UAAU,2BACVM,cAAeA,EACfjH,KAAMA,EACNS,KAAMgM,EACNlH,OAAQA,EACRC,UAAWA,EACXC,YAAaA,EACbC,aAAcA,EACdC,QAASA,EACT4H,SAjEa,SAAMC,GAAU,2C,gEAE3Bva,EAAD,MACQ,GAAMgM,EAAIQ,aAAaN,EAAeqO,I,OAC/C,OADAzI,EAAS,SACNwH,EACM,CAAP,EAAOA,EAAYxH,IAEZ,CAAP,IAAOA,G,OAGA,SAAM9F,EAAIM,aAAaJ,EAAelM,EAAUua,I,OACzD,OADAzI,EAAS,SACNuH,EACM,CAAP,EAAOA,EAAYvH,IAEZ,CAAP,IAAOA,G,yBAoDTyH,QAASA,GACL5G,EAAI,WAEP/C,EA7Be,WACjB,IAAM4K,EAAW,IAAEC,QAAQd,EAAkB,SACvCe,EAAM,GACNve,EAA2C,GAAhCuB,OAAOD,KAAK+c,GAAU7c,OAAa,CAAC2Y,aAAa,GAAO,GAI1E,OAHC,IAAExR,QAAQ0V,GAAU,SAAC/a,EAAO5B,GAC3B6c,EAAIne,KA1BW,SAACoe,EAAaxe,GAC/B,IAAMye,EAAgB,IAAEC,OAAOlB,EAAkB,CAAE,MAASgB,IACtD/I,EAAUY,EAAc,OAAIlV,EAClC,OACE,aADK,CACJ6Y,GAAY,IAACE,MAAOsE,EAA+B/I,QAASA,GAAazV,EAAO,UAC9E,IAAEqD,IAAIob,GAAe,SAACd,GACrB,IAAMhF,EAAa,CACjBjX,IAAKic,EAAM5V,KACXA,KAAM4V,EAAM5V,KACZgI,cAAa,EACbuM,UAAWqB,EAAM5V,KACjBgS,MAAO4D,EAAM5D,MACbrB,YAAaiF,EACb/M,KAAI,GAEN,OAAQ,aAAD,CAAEyL,GAAW,MAAK1D,QAAU,QAXA6F,GAsB9BG,CAAWjd,EAAK1B,OAEpBue,EAuBJK,WAAa,MAOE,UAAI,CACxB7O,cAAe,SACfa,KAAM,U,spEC/DD,IAAM,GAAc,aAAS,SAACrD,GAGjC,IAAAwC,EASExC,EAAK,cARP,EAQEA,EAAK,aARPsR,OAAY,IAAG,KAAE,EACRC,EAOPvR,EAAK,QANPnK,EAMEmK,EAAK,KAJPwR,GAIExR,EAAK,iBAALA,EAAK,UAHPyR,EAGEzR,EAAK,QAFP0R,EAEE1R,EAAK,OADJiJ,EAAI,GACLjJ,EAVE,oGAYA,KAAkC,mBAAS,GAAE,GAA5C2R,EAAY,KAAEC,EAAe,KAE9BlF,EAAU,eACVmF,GAAwB,OAAZnF,GAAgC,OAAZA,KAAsB1M,EAAMgP,cAE5DvM,EAASwC,GAAQU,UAAUnD,GAC3BsP,EAAe,iBAAO,MAC5B,GAAIrP,EAAO2B,UAAW,OAAQ,aAAD,CAAC,gBAAK,cAAC,KAAI,iBAAE,GAE1C,IAAI2N,EAAmB,GACjBC,EAAa,GACfvP,EAAOmC,QAAUnC,EAAOmC,OAAO1P,QACjC,IAAEkG,QACAkW,GACA,SAAC,GAAE,IAAAvC,EAAS,YAAKkD,EAAU,KAA1B,eAEKC,EAAoB,GAClBC,EA3Dd,SAA6BpD,EAAgBlZ,GAC3C,IAAIuc,EACAC,EACJ,GAAIxc,EAAM,CACR,GAAoB,kBAATA,GAAqBA,EAAK5B,OAAS,EAAG,CAC/C,IAAI,EAAM,GACV,EAAM4B,EAAKgG,MAAM,KACjBwW,EAAY,IAAEvc,IAAI,GAAK,SAACC,EAAO5B,GAC7B,OAAI4B,EAAMuK,QAAQ,KACT,EAAInM,GAAO4B,EAAM8F,MAAM,KAEvB,EAAI1H,GAAO,CAAC4B,WAIvBsc,EAAYxc,EAEVwc,EAAUpe,OAAS,GACrB,IAAEmH,QAAQiX,GAAW,SAACC,GAChBA,EAAI,KAAOvD,IACbqD,EAA2B,SAAXE,EAAI,GAAgB,UAAY,aAKxD,OAAOF,EAkCwBG,CAAoBxD,EAAUlZ,GACpDsc,IACDD,EAAaC,iBAAmBA,EAChCJ,EAAYhD,GAAaoD,GAE3B,IAAOK,EAnHwB,SAACpC,EAAY8B,GAElD,IAAK9B,EACH,OAAO,KAGT,IAAMqC,EAAoBrC,EAAMnQ,KAC5ByS,EAAsB,CACxB/F,MAAOyD,EAAM5D,MACbmG,UAAWvC,EAAM5V,KACjBqQ,cAAe,GACfO,WAAY,CACVI,aAAc4E,IAmBlB,OAhBIA,EAAMlN,WACRwP,EAAe7H,cAAc3H,UAAW,GAGtCkN,EAAMwC,WACRF,EAAeG,OAAS,CACpBC,SAAU,IAIhBJ,EAAehI,UAAY+H,EAExBP,IACDQ,EAAiB1e,OAAO6L,OAAO,GAAI6S,EAAgBR,IAG9CQ,EAoFkBK,CAAwBtQ,EAAOmC,OAAO1P,OAAO6Z,GAAYmD,GACxEM,GACFR,EAAWnf,KAAK,SAAK2f,GAAcP,OAM3C,IAwFIe,EAAsB,CACxBC,WAAY,SAEXpB,IACDmB,GAAgB,GAElB,IAAME,EAAYxB,GAAkBsB,EAEhCG,EAAuB,CACzBC,SAAazB,EAAY,uBAExBE,IACDsB,EAAeE,UAAW,GAE5B,IAAMC,EAAatf,OAAO6L,OAAO,GAAIsT,EAAgB1B,GAErD,OACE,aADK,CACJ,KAAQ,IACP8B,QA1GY,SACdle,EAKAQ,EACAsb,GAAyC,2C,2EA0D1B,OApCiC9b,EAAM,QAANA,EAAM,SAAxBme,EAAa,GAAKne,EAA1C,wBACFZ,EAAe,GAAsB,GAElCgf,EAAqED,EAAa,gBAAjEE,EAAoDF,EAAa,eAAjDG,EAAoCH,EAAa,iBAA5BI,EAAW,GAAIJ,EAAtE,yDACNK,EAAa7f,OAAOD,KAAK6f,GAAa9d,KAAI,SAAC3B,GACzC,IAtHmC8L,EAsH7BmQ,EAAQ3N,EAAOmC,OAAO1P,OAAOf,GACnC,MAAO,CAACA,GAvH2B8L,EAuHGmQ,GAASA,EAAMnQ,KAnHlD,CAAC,WAAY,OAAQ,QAAQ6T,SAAS7T,GACtC,WAGA,KA+GyDuT,EAAcrf,OAGxEwf,GAAoBA,EAAiB1f,OACpC4f,GAAcA,EAAW5f,OACtB,IAAES,QAAQif,GACVlf,EAAU,CAACkf,EAAkBE,IAGvBE,EAAkB,oCAA0BF,GAClDpf,EAAU,IAAIkf,EAAgB,UAAUI,EAAe,KAI3Dtf,EAAUkf,EAIZlf,EAAUof,EAIN3e,EAASwe,EAAe5d,KAAI,SAACke,GACjC,OAAOA,EAAEjF,aAIR,IAAEkF,QAAQpe,KAAU,IAAEoe,QAAQlC,KAC/Blc,EAAOkc,GAEM,GAAMzP,EAAIK,eACvB8Q,EACAhf,EACAS,EACA,CACEM,SAAUH,EAAOG,SACjBE,QAASL,EAAOK,QAChBG,KAAMA,EACF7B,OAAOD,KAAK8B,GAAMC,KAAI,SAACoe,GAAO,OAC5BA,EACY,UAAZre,EAAKqe,GAAkB,MAAQ,WAEjC,M,OAIR,OAhBM9L,EAAS,SAefwJ,EAAgBxJ,EAAO,iBAChB,CAAP,EAAO,CACLpR,KAAMoR,EAAOrS,MACboe,SAAS,EACTC,MAAOhM,EAAO,0BAuBdF,QAAS8J,EACTqC,OAAQpL,EAAKoL,QAAU,MACvBC,aAAcrL,EAAKqL,cAAgB,CAAE9C,SAAQ,GAC7C+C,WAAU,SAAOtL,EAAKsL,YAAU,CAAEC,kBAAkB,IACpDC,iBAAiB,EACjBC,UAAWzL,EAAKyL,WAAa5C,EAC7BN,SAAU,YACNvI,EAAKyL,WAAa5C,GAAcpc,QAAQif,UAE5Ctf,OAAQ,CACNoe,gBAAiBjR,EACjBkR,eAAgBpC,EAChBqC,iBAAkBpC,GAEpBG,OAAQwB,EACRzB,QAAS6B,EACT1M,KAAK,QACLoD,UAAW,CAAC,eAAgBf,EAAKe,WAAWhU,KAAK,MAC7CiT,QAAI,M,yqECvQD,GAAa,aAAS,SAACjJ,GAa9BA,EAAK,KAVP,IACAwC,EASExC,EAAK,cARP4U,EAQE5U,EAAK,UAPP6U,EAOE7U,EAAK,YALP8U,GAKE9U,EAAK,oBAALA,EAAK,eAJPvL,EAIEuL,EAAK,QAHP+U,EAGE/U,EAAK,UAFPwR,EAEExR,EAAK,SADJiJ,EAAI,GACLjJ,EAXA,gIAYapM,GAAbmhB,IAAwBA,GAAY,GAExC,IAAMtS,EAASwC,GAAQU,UAAUnD,GAK3B,KAA0B,mBAAS,IAAG,GAArCwS,EAAQ,KAAEC,EAAW,KACtB,KAAkC,mBAAS,IAAG,GAA7CC,EAAY,KAAEC,EAAe,KACxBC,EAAY,OAAAC,GAAA,GACtB,CACE7S,EAAgB,WAChBoS,EACAC,EACAC,EACArgB,EACAsgB,IAEF,sD,yDAKS,OADDO,EAAe,CAACV,EAAWC,GAC1B,GAAMvS,EAAIK,eACfH,EACA/N,EACA6gB,I,OAHF,MAAO,CAAP,EAAO,mBAMT,CAAEC,SAAU9S,EAAO2B,YACpB,KAuCD,OArCA,qBAAU,WACR,GAAIgR,EAAS,CACX,IAAI,EAAU,GACV,EAAU,GACV,EAAU,GACV,EAAiBN,EACnBM,EAAQrf,MAAgBqF,SAAQ,SAACoa,GAC3B,IAAA7d,EAAiB6d,EAAC,IAAVvM,EAAI,GAAKuM,EAAnB,SACAC,EAASxM,EAAK4L,GAAe,UACjC,EAAGld,GAAO,OACR5B,MAAO4B,EACPxD,IAAKwD,EACLgV,MAAO6I,EAAEZ,GAAa,QACtB1O,SAAU,GACVvO,IAAG,GACAsR,GACC,EAAGtR,IAAQ,IAEjB,EAAG9E,KAAK8E,GACJ8d,EACE,EAAGA,GACL,EAAGA,GAAQvP,SAASrT,KAAK,EAAG8E,IACvB,EAAG8d,GAAU,CAAEvP,SAAU,CAAC,EAAGvO,KAC1B8d,IACV,EAAK,CAAC,EAAG9d,IACT,EAAiBA,MAGjB,IACF,EAAM,EAAG,IAAmB,CAAC,EAAG,KAAqB,IAEvDsd,EAAY,GAEZE,EAAgB,CAAC,OAElB,CAACC,IAEA3S,EAAO2B,UAAmB,aAAD,CAAC,8CAE5B,aADK,CACJ,KAAI,IACH2G,MAAO,CAAEsB,MAAO,QAEhB6I,aAAcA,EACdF,SAAUA,EACVU,SAAU,SAACR,EAAc,GAAU,WAAM,OACvCC,EAAgBD,IAElBS,SAAU,SAAC9E,EAAQ,G,IAAE+E,EAAa,gBAChCpE,GAAYA,EAASoE,KAMnB3M,QAAI,M,4vEC3GD,GAAa,aAAS,SAACjJ,GAW9BA,EAAK,KAPP,IACAwC,EAMExC,EAAK,cALP4U,EAKE5U,EAAK,UAJPvL,EAIEuL,EAAK,QAHP+U,EAGE/U,EAAK,UAFPwR,EAEExR,EAAK,SADJiJ,EAAI,GACLjJ,EARA,uEAWJwC,EAAgBA,EACV,MAAuD,OAAA6S,GAAA,GAC3D7S,EAAgB,WAChB,sD,mDACS,SAAMF,EAAIC,cAAcC,I,OAA/B,MAAO,CAAP,EAAO,oBAHqBkN,GAAf,YAAO,QAAoB,QAUtC,GAVkD,aAUlD,GAA0B,mBAAS,IAAG,IAArCmG,EAAQ,KAAEC,EAAW,KAEtB,KAAkC,mBAAS,IAAG,GAA7CC,EAAY,KAAEC,EAAe,KAExBZ,EAAY,OAAAC,GAAA,GACtB,CAAC7S,EAAgB,WAAYoS,EAAWngB,EAASsgB,IACjD,sD,yDAIS,OAHDO,EAAethB,OAAO6c,OAAOnB,EAAaxa,QAC7Cic,QAAO,SAAC,GAAe,OAAP,YAChBrb,KAAI,SAAC,GAAa,OAAP,UACP,GAAMwM,EAAIK,eACfH,EACA/N,EACA6gB,I,OAHF,MAAO,CAAP,EAAO,mBAMT,CAAEC,UAAW7F,IACd,KAED,qBAAU,WACJ0F,GACFU,EAAYV,EAAQrf,SAErB,CAACqf,IAoBJ,OACE,aADK,CACJ,KAAI,IACHrK,MAAO,CAAEsB,MAAO,QAChB4J,WAAYJ,EACZK,WAAW,WACXC,WAAY,SAACxf,GACX,OACE,cADK,CACJ,KAAKyf,KAAI,IACRxM,QAAS,SAACyM,IA1BI,SAAC1f,GACvB,IAAI2f,EAAkB,SAAIP,IACtBQ,EAAiBD,EAAgBE,WACnC,SAAC,GAAY,OAAP,OAAc7f,EAAOgB,OAEzB4e,GAAkB,EACpBD,EAAgBG,OAAOF,EAAgB,GAEnCxB,EACFuB,EAAgBzjB,KAAK8D,GAErB2f,EAAkB,CAAC3f,GAGvBqf,EAAgBM,GAChB9E,GAAYA,EAAS8E,GAYXI,CAAgB/f,IAElBqT,UACE,qBACC+L,EAAaY,MAAK,SAAC,GAAY,OAAP,OAAchgB,EAAOgB,OAC1C,WACA,KAAG,WAGRod,EACC,aADW,CACV,KAAQ,CACP6B,QAASb,EAAaY,MAAK,SAAC,GAAY,OAAP,OAAchgB,EAAOgB,aAAI,GAG5D,aADE,CACF,sBAQDhB,EAAOie,WAAU,KAKpB3L,QAAI,M,i6BChFP,IAAM,GAAoB,aAAS,SAACjJ,GAOrCA,EAAK,KAJP,IAEAwR,EAEExR,EAAK,SADJiJ,EAAI,GACLjJ,EALE,qBAOA,KAAoC,mBAAS,IAAG,GAChD,GADc,KAAkB,KAChC,GAA8C,mBAAS,IAAG,IAAzD6W,EAAkB,KAAEC,EAAqB,KAU1CC,EAA4B,SAACnB,G,MAO7BoB,EAAe,GAMnBpB,EAAcxa,SAAQ,SAAC,G,IAAEzD,EAAG,MAC1Bqf,EAAe,YAAIA,IAAY,CAAErf,OAEnCqf,EAAe,IAAEC,KAAKD,GACtBF,EAAsBE,GACN,QAAhB,EAAAE,EAASxhB,eAAO,SAAEif,UAQduC,EAAW,mBAEjB,qBAAU,W,MACQ,QAAhB,EAAAA,EAASxhB,eAAO,SAAEif,WACjB,CAACuC,EAASxhB,UAEP,IA1DmBoB,EAAK3C,EA0DxB,KAAgC,mBAMnC,MAAK,GANDgjB,EAAW,KAAEC,EAAc,KAgDlC,OAxCA,qBAAU,WACR,IAAIC,EAQMrX,EAAMsR,aAAa/a,MAC3B,SAAC,G,IACC+gB,EAAU,aACVC,EAAe,kBACfC,EAAe,kBACfC,EAAiB,oBACjB1I,EAAS,YAET,GAAIuI,EACF,MAAO,CACLA,WAAU,EACVC,gBAAe,EACfC,gBAAe,EACfC,kBAAiB,EACjB1I,UAAS,MAMjBqI,EACEC,GAAgB,CACdpX,KAAMoX,EAAaC,WACnB9U,cAAe6U,EAAaE,gBAC5B3C,UAAWyC,EAAaG,gBACxB3C,YAAawC,EAAaI,kBAC1BC,oBAAqBL,EAAatI,cAGrC,CAAC/O,EAAMsR,eAGR,aADK,CACL,qBACE,eAAC,KAAO,IACNzV,MAAM,WACNmO,UAAW,CAAC,sBAAuBf,EAAKe,WAAWhU,KAAK,MAAI,WAE3DmhB,GAAeA,EAAYlX,MAC1B,cADkC,CACjC,KAAO,IAAC0X,QAAQ,MAAM3N,UAAU,eAAa,WACvB,QAApBmN,EAAYlX,MACX,aAD6B,CAC5B,GAAU,MACLkX,EAAW,CACf3F,SAAUuF,SAAyB,GAGlB,QAApBI,EAAYlX,MACX,aAD6B,CAC5B,GAAU,MACL,WAKEkX,EAAW,YAAXA,EAAW,oBACf,OAFoB,GAChBA,EAJA,uCADF,GAOA,CACJ3F,SAAUuF,SAAyB,WAEtC,GAGL,cAAC,KAAO,IAAC/M,UAAU,aAAa4N,OAAK,aACnC,cAAC,GAAW,MACN3O,EAAI,CAERxU,QACE0iB,IA5IargB,EA8IX+f,EAAmB5iB,OAAS,EAAI4iB,EAAqB,GA9IrC1iB,EA+IhBgjB,EAAYO,oBA9InB5gB,EACJhB,KAAI,SAACc,GAAO,mBAAezC,GAAO,OAAS,KAAOyC,EAAK,QACvDZ,KAAK,SAiJE0e,UAAWwC,EACX1F,SAtGkB,SAACqG,EAAiBC,GAE5CtG,GAAYA,EAASsG,WAoGgB,UAC7B,WACM,SACF,M,wCCzLG,KAAM,O,QCZlB,SAASC,GAAmBvV,EAAuBwV,GAExD,MAAO,IADY,QAAQ7R,GAAKE,aAAY,IAAI7D,EAAa,UACtCwV,EA2BlB,IAAMC,GAAyB,SAAC7C,EAAkBR,EAA4BC,QAA9C,IAAAO,MAAA,SAAkB,IAAAR,MAAA,aAA4B,IAAAC,MAAA,UACnF,IAAiBqD,EAAyBC,EAAtC/P,EAAS,GACTgQ,EAAmB,SAAC3C,GACtB,IAAI4C,EAAQ,GAcZ,OAbAjD,EAAQha,SAAQ,SAACzE,GACf,GAAGA,EAAO8e,SAAWA,EAAO,CAC1B,IAAI6C,EAAgB,CAClB3L,MAAOhW,EAAOie,GACd7e,MAAOY,EAAOgB,KAEV4gB,EAAeH,EAAiBzhB,EAAOgB,KAC1C4gB,GAAgBA,EAAatkB,SAC9BqkB,EAASpS,SAAWqS,GAEtBF,EAAMxlB,KAAKylB,OAGRD,GA6BT,OANAjD,EAAQha,SAAQ,SAACzE,IACfwhB,EAtBgB,SAACxhB,GAEjB,IAAI6hB,IADJN,EAAkBvhB,EAAOke,IAErB2D,GACsBpD,EAAQ7e,MAAK,SAACkiB,GACpC,OAAOA,EAAK9gB,MAAQugB,KAIxB,GAAGM,EAAO,CACR,IAAIF,EAAgB,CAClB3L,MAAOhW,EAAOie,GACd7e,MAAOY,EAAOgB,KAEV4gB,EAAeH,EAAiBzhB,EAAOgB,KAI7C,OAHG4gB,GAAgBA,EAAatkB,SAC9BqkB,EAASpS,SAAWqS,GAEfD,GAIEI,CAAY/hB,KAErByR,EAAOvV,KAAKslB,MAGT/P,G,+hBCsDqB,aAAS,SAACpI,GAEpC,IAAAwC,EAGExC,EAAK,cAFP,EAEEA,EAAK,SAFP2Y,OAAQ,IAAG,QAAK,EACb1P,EAAI,GACLjJ,EAJA,8BAKEyC,EAASwC,GAAQU,UAAUnD,GACjC,GAAIC,EAAO2B,UAAW,OAAQ,aAAD,CAAC,8CAC9B,IAAMQ,EAASnC,EAAOmC,OAClBgU,EAAWhU,EAAOiU,WAAWF,GAE3BrH,EArCR,SAAiCwH,EAAsB9Y,EAAY+Y,GAC3D,MAA8B/Y,EAAK,aAAnCsR,OAAY,IAAG,KAAE,EAAE0H,EAAWhZ,EAAK,OAczC,OAb4B,IAAxBsR,EAAard,QACf,IAAEmH,QAAQ0d,GAAiB,SAACzQ,GAC1B,IAAM0G,EAAoB,IAAEkK,SAAS5Q,GAAWA,EAAe+H,MAAQ/H,EACnE6J,EAAoB,CAAEnD,UAAS,GAChCA,IAAcgK,IACf7G,EAAahF,OAAS,SAAC8D,EAAUra,GAC/B,OAAQ,aAAD,CAAE,KAAI,IAACuiB,GAAInB,GAAmB/X,EAAMwC,cAAe7L,EAAOgB,KAAMqS,UAAU,qDAAmD,UAAEgH,SAAG,KAG7IM,EAAaze,KAAKqf,MAInB8G,EACM,IAAE7H,OAAOG,GAAc,SAAC6H,GAC7B,OAAG,IAAE3hB,SAAS2hB,GACLA,GAAeH,EAAOI,oBAExBD,EAAYpK,WAAaiK,EAAOI,uBAGpC9H,EAcc+H,CAlDvB,SAA4B3J,EAAmBiJ,GAC7C,IAAIC,EAAWlJ,EAAamJ,WAAWF,GACnCG,EAAkBF,GAAYA,EAAS1Q,QAQ3C,OAPI4Q,IAEFA,GADAF,EAAWlJ,EAAamJ,WAAWvmB,UACLsmB,EAAS1Q,WAErC4Q,EAAkB,CAACpJ,EAAa4J,iBAG7BR,EAuCiBS,CAAmB3U,EAAQ+T,GACW3Y,EAAO4E,EAAO0U,gBACtE7kB,EApFR,SAA4BmkB,EAAU5Y,GAC9B,IAAAvL,EAAkCuL,EAAK,QAA9BwZ,EAAyBxZ,EAAK,aAAhBgZ,EAAWhZ,EAAK,OAI7C,GAHIvL,IACFA,EAAUmkB,EAASnkB,SAElB,IAAEglB,WAAWhlB,GACd,IACEA,EAAUA,IACV,MAAO8H,GACP9E,QAAQiiB,KAAK,2BAA4Bnd,GAO7C,GAJA9H,EAAU,IAAEglB,WAAWhlB,GAAW,GAAKA,EACnC+kB,IACFA,EAAeZ,EAASY,cAEN,SAAjBA,EAAwB,CACzB,IAAMG,EAAa,CAAC,CAAC,QAAS,IAAKrX,EAAIjO,OAAOQ,cAE5CJ,EADCA,GAAWA,EAAQR,OACV,CAAC0lB,EAAcllB,GAGfklB,EAQd,OAJGX,IACDvkB,EAAU,CAAC,CAACukB,EAAOI,oBAAqB,IAAKJ,EAAO1iB,UAAW7B,IAG1DA,EAsDSmlB,CAAmBhB,EAAU5Y,GAE7C,OACE,aADK,CACJ,GAAW,IACVwC,cAAeA,EACf8O,aAAcA,EACd7c,QAASA,GAELwU,QAAI,MApBP,I,qNC7He,aAAS,SAACjJ,GAC9B,OACE,aADK,CACL,eAAYA,QAAK,M,22BC4Bf6Z,GAAmB,SAAC7Z,GAEtB,IAAAjK,EAGEiK,EAAK,MAFP,EAEEA,EAAK,UAFP0K,OAAS,IAAG,SAAM,EAClBS,EACEnL,EAAK,YACT,OAEE,aAFK,CAEJ,KAAQ,CACPqD,KAAK,OACLqH,UAAWA,EACXU,WAAY,CACVI,aAAcL,GAEhBgC,KAAMpX,EACNwV,UAAU,SAAE,IAKZuO,GAAiB,sBAAW,SAAC9Z,EAAY+Z,GAE3C,MAEE/Z,EAAK,UAFP0K,OAAS,IAAG,SAAM,EAClBS,EACEnL,EAAK,YACH,KAAoB,mBAASA,EAAMjK,OAAM,GAAxCA,EAAK,KAAE0N,EAAQ,KActB,OAXA,8BAAoBsW,GAAK,WACvB,MAAO,CACHC,SAAQ,WACJ,OAAOjkB,GAEXkkB,QAAO,WACL,OAAO,OAMb,aADK,CACL,cAASjQ,UAAU,8CAA8CkC,KAAK,UAAQ,UAC5E,wBAAKlC,UAAU,sBAAoB,UACjC,cAAC,KAAQ,CACP3G,KAAK,OACLqH,UAAWA,EACX3U,MAAOA,EACPyb,SAAU,SAAC0I,G,SACkB,QAAvB,EAAQ,OAARA,QAAQ,IAARA,OAAQ,EAARA,EAAUC,qBAAa,eAAEpkB,OAC3B0N,EAAgC,QAAvB,EAAQ,OAARyW,QAAQ,IAARA,OAAQ,EAARA,EAAUC,qBAAa,eAAEpkB,OAElC0N,EAASyW,IAEb9O,WAAY,CACVI,aAAcL,SACf,UACC,UACA,MAqFZ,IAAM,GAAa,SAACnL,GAClB,OACE,aADK,CACJ,KAAQ,CACPoa,cAAe,CAAErU,KAAM,WACvB6F,aAAa,UACbC,SAAS,OACTE,YAAY,gBACZD,SAAS,UACTO,MAAM,UACNgO,aAAa,0BACb1E,SAAU,SAAC2E,GACLA,EAAOvkB,OAIbtD,QAAS,CACP,CAAE+Z,MAAO,eAAMzW,MAAO,iBACvB,I,IAKmB,aAAS,SAACiK,GAGhC,IAAAwC,EAQExC,EAAK,cAPP,EAOEA,EAAK,aAPPsR,OAAY,IAAG,KAAE,EASb,GAFFtR,EAAK,QAALA,EAAK,KAALA,EAAK,iBAALA,EAAK,SAALA,EAAK,QADA,GACLA,EATE,2FAWA,GAAkC,mBAAS,GAAE,IAE7C0M,GAFa,KAAiB,KAEpB,gBAGVjK,IAFwB,OAAZiK,GAAgC,OAAZA,IAAsB1M,EAAMgP,cAEnD/J,GAAQU,UAAUnD,IACjC,GAAIC,EAAO2B,UAAW,OAAQ,aAAD,CAAC,gBAAK,cAAC,KAAI,iBAAE,GAgO1C,OAEE,aAFK,CAEL,UAAK4F,UAAU,mBAAiB,UAC9B,cAAC,eAAW,CACVuQ,WA7Ea,WAEjB,IAAMrS,EAAgB,CAAC,CACrBsS,WAAW,EACXnO,MAAO,GACPoO,SAAU,GACVC,SAAU,GACVC,mBAAmB,IAqCrB,OAnCA,IAAEvf,QAAQkW,GAAc,SAAC,GAAE,IAAAvC,EAAS,YAC5BqB,GAD2C,KAA1B,eACT3N,EAAOmC,OAAO1P,OAAO6Z,IACnC7G,EAAQrV,KAAK,CACXud,MAAOrB,EACP6L,WAAYxK,EAAM5D,MAAM4D,EAAM5D,MAAMuC,EACpC1C,MAAO+D,EAAMnB,QAAS,IAAK,IAC3ByL,SAAUtK,EAAMnB,QAAS,IAAK,IAC9BuL,WAAW,EACXrJ,QAAQ,EACR0J,aAAc,mBACdC,mBAAoB,CAClB3P,YAAaiF,EACb1F,UAAW0F,EAAMnQ,MAEnB8a,WAAY,iBACZC,iBAAkB,CAChB7P,YAAaiF,EACb1F,UAAW0F,EAAMnQ,MAMnBgb,UAAW7K,EAAMhN,cAIrB8E,EAAQrV,KAAK,CACXwZ,MAAO,GACPoO,SAAU,GACVC,SAAU,GACVF,WAAW,EACXK,aAAc,aACdE,WAAY,eAEP7S,EAiCSgT,GACZC,aAAa,aACb5G,YAAY,EACZ6G,mBAAoB,GACpB9G,aAAa,WACb+G,QAAS,CAAC,KAA0B,KAAY,MAChDC,+BAA+B,EAC/BC,qBA1HG,CAEHC,QAAS,SAAAnmB,GAcLoC,QAAQC,IAAIrC,GACZ,IAAMH,EAAS,CAAC,QAChB,IAAEkG,QAAQkW,GAAc,SAAC,GAAE,IAAAvC,EAAS,YAAe,KAA1B,eACvB7Z,EAAOrC,KAAKkc,MAEdzM,EAAIK,eACFH,EACA,GACAtN,EAAO,IAAI9B,MAAK,SAAC4D,GAEf3B,EAAO8e,QAAQ,CACbsH,QAASzkB,EAAKjB,aAgGxB2lB,oBAAuB,CACrBC,iBAAkB9B,GAClB+B,eAAgB9B,GAChB+B,WAAY,UACb,UACD,M,80CCvaKC,GAAgB,IAAM7O,cAAsC,CACvE1K,cA1B2B,SAAQC,GAAoB,2C,4BACvD,MAAM,IAAI5B,MAAM,iBAAiB4B,EAAa,oEA0B9CG,eAvB4B,SAAQH,EAAsB/N,EAAaS,EAAYG,GAAiC,2C,4BACpH,MAAM,IAAIuL,MAAM,kBAAkB4B,EAAa,oEAuB/CI,aApB0B,SAAOJ,EAAsBK,EAAuBkZ,GAAY,2C,4BAC1F,MAAM,IAAInb,MAAM,cAAc4B,EAAa,eAAeK,EAAc,oEAoBxEC,aAjB0B,SAAON,EAAsBuZ,GAAY,2C,4BACnE,MAAM,IAAInb,MAAM,cAAc4B,EAAa,iF,iPCpBhC,GAAU,CACrB0K,OAAQ,SAACC,EAAWnN,GAClB,OAAImN,EACM,aAAD,CAAE6O,GAAA,EAAS,WAEV,aAAD,CAAC,mBAEZ5O,eAAgB,SAACC,EAAQrN,GACvB,OACE,aADK,CACJ,KAAQ,IAACqD,KAAK,OAAOqH,UAAU,UAAa1K,QAAK,K,iNCP3Cic,GAAW,CACtB/O,OAAQ,SAACC,EAAWnN,GAClB,OACE,aADK,CACJ,KAAQ,IAACqD,KAAK,OAAOqH,UAAU,SAAY1K,QAAK,IAGrDoN,eAAgB,SAACC,EAAQrN,GACvB,OACE,aADK,CACJ,KAAQ,IAACqD,KAAK,OAAOqH,UAAU,SAAY1K,QAAK,K,iNCT1Ckc,GAAW,CACtBhP,OAAQ,SAACC,EAAWnN,GAClB,OACE,aADK,CACJ,KAAQ,IAACqD,KAAK,OAAOqH,UAAU,YAAe1K,QAAK,IAGxDoN,eAAgB,SAACC,EAAQrN,GACvB,OACE,aADK,CACJ,KAAQ,IAACqD,KAAK,OAAOqH,UAAU,YAAe1K,QAAK,K,iNCV7C,GAAQ,CACnBkN,OAAQ,SAACC,EAAW,GAAY,a,IACxBI,EAAO,UAAYJ,EACzB,OAAQ,aAAD,CAAC,QAAG3P,KAAM+P,GAAI,UAAGJ,SAAI,IAE9BC,eAAgB,SAACC,EAAQrN,GAAe,OACtC,aADsC,CACrC,KAAQ,IAACqD,KAAK,OAAOqH,UAAU,QAAW1K,QAAK,K,iNCHvCmc,GAAS,CACpBjP,OAAQ,SAACC,EAAWnN,GAClB,OACE,aADK,CACJ,KAAQ,IAACqD,KAAK,OAAOqH,UAAU,SAAY1K,QAAK,IAGrDoN,eAAgB,SAACC,EAAQrN,GACvB,OACE,aADK,CACJ,KAAQ,IAACqD,KAAK,OAAOqH,UAAU,SAAY1K,QAAK,K,sOCN1Coc,GAAU,CACrBlP,OAAQ,SAACC,EAAWnN,GAElB,IAAMqc,EAAY,mBAChB,WACE,MAAgB,kBAATlP,GAAsBA,EAAgB2G,SAAS,KAClD,IAAI,KAAU3G,EAAgB5R,QAAQ,IAAK,KAC3C,IAAI,KAAS4R,KACnB,CAACA,IAEH,OACE,cADK,CACL,kBAAOkP,EAAS,eAGpBjP,eAAgB,SAACC,EAAQrN,GACvB,OACE,aADK,CACJ,KAAQ,IAACqD,KAAK,OAAOqH,UAAU,SAAY1K,QAAK,K,qpECpB1C,GAAS,CACpBkN,OAAQ,SAACC,EAAWnN,GAC+BA,EAAK,UAALA,EAAK,KAA9C,IAEJsc,EAFqBlR,EAAwBpL,EAAK,WAC9C,GADoC,GAAKA,EAA3C,mCAC+EoL,EAAU,cAAzED,OAAW,IAAG,KAAE,EAAC,EAA8CC,EAAU,oBAAnCC,OAAiB,MAAC,GAAE,EAE5E5Y,EAAU0Y,EAAYoR,gBAAkBpR,EAAYoR,gBAAkBpR,EAAY1Y,QACtFA,EAAU,IAAEgnB,WAAWhnB,GAAWA,EAAQ4Y,GAAqB5Y,EAC/D,IAAMsD,EAAQqV,EAAWrV,OAASiK,EAAMmN,KAIxC,OAHAmP,EAAO,IAAEnL,OAAO1e,GAAQ,SAAC+pB,GACrB,OAAOrR,EAAY2H,SAAW/c,EAAMuK,QAAQkc,EAAWzmB,QAAU,EAAIymB,EAAWzmB,QAAUA,KAEtF,aAAD,CAAE,IAAM0mB,SAAQ,UAAEH,EAAKxmB,KAAI,SAAC4mB,EAAStc,GAAS,OACjD,cADwD,CACvD,IAAMqc,SAAQ,WACVrc,EAAQ,GAAK,KACXsc,EAAa,QAFCA,EAAQ3mB,gBAI9B,IAELqX,eAAgB,SAACD,EAAWnN,GACpB,SAAsB,mBAAS,CAAC2c,MAAM,EAAMC,QAAS,OAAM,GAA1DvnB,EAAM,KAAEwnB,EAAS,KAChB,EAAkB7c,EAAK,WAAvBoL,OAAU,MAAC,GAAE,EACb,EAA6EA,EAAU,aAAzED,OAAW,IAAG,KAAE,EAAC,EAA8CC,EAAU,oBAAnCC,OAAiB,MAAC,GAAE,EACxEyH,EAA6B3H,EAAW,SAA9BoR,EAAmBpR,EAAW,gBAC5C1Y,EAAU8pB,GAAoCpR,EAAY1Y,QAC1DqgB,IACF1H,EAAW/H,KAAO,YAEpB,IAAIiI,EAAoB,GA0BxB,OAtBG,IAAEmO,WAAWhnB,GAWd6Y,EAAgB,CACdiI,QAXQ,SAAOle,EAAa2K,GAAU,2C,mDAEtB,OADhBqL,EAAkByR,WAAaznB,EAAO0nB,SACtB,GAAMtqB,EAAQ4Y,I,OAC9B,MAAO,CAAP,EADgB,kBAUhBhW,OAAM,EACN2nB,wBARwB,SAACL,GACrBA,GACAE,EAAU,CAAEF,KAAI,EAAEC,QAAS,IAAIK,SASrCjd,EAAMoL,WAAW3Y,QAAUA,EAE7B6Y,EAAc4R,YAAW,EACzB5R,EAAc6R,iBAAiB,QAG7B,aADK,CACJ,KAAW,IAAC9Z,KAAK,QAAWrD,EAAWsL,QAAa,K,iNCtD9C8R,GAAS,CACpBlQ,OAAQ,SAACC,EAAWnN,GAClB,OAAImN,EACM,aAAD,CAAE6O,GAAA,EAAS,WAEV,aAAD,CAAC,mBAEZ5O,eAAgB,SAACC,EAAQrN,GACvB,OACE,aADK,CACJ,KAAQ,IAACqD,KAAK,OAAOqH,UAAU,UAAa1K,QAAK,K,iNCV3C,GAAM,CACjBkN,OAAQ,SAACC,EAAW,GAAY,aAC9B,OAAQ,aAAD,CAAC,QAAG3P,KAAM2P,GAAI,UAAGA,SAAI,IAE9BC,eAAgB,SAACC,EAAQrN,GAAe,OACtC,aADsC,CACrC,GAAK,IAACqD,KAAK,OAAOpD,KAAK,QAAWD,QAAK,K,0zBCsB5C,uE,OAEC,EAAAqd,MAAQ,CACP3L,OAAQ,GACRiL,MAAM,GAGP,EAAAW,SAAW,SAACvd,GACX,EAAKwd,SAAS,CAAE7L,OAAQ3R,EAAMiG,OAAOjQ,SAEtC,EAAAynB,eAAiB,WAChB,EAAKD,SAAS,CAACZ,MAAO,EAAKU,MAAMV,QAElC,EAAA/S,QAAQ,SAAC7T,EAAOsgB,GACZ,EAAKrW,MAAMyd,UACI,QAAd1nB,EAAMkK,KACR,EAAKD,MAAMyd,QAAQ5qB,KAAK,QAAQkD,EAAM2nB,WAAU,UAAU3nB,EAAMa,GAAM,CAAC+mB,IAAK5nB,EAAM+P,KAAM6G,MAAO5W,EAAMyE,OAErG,EAAKwF,MAAMyd,QAAQ5qB,KAAKkD,EAAM+P,OAIhC,EAAKyX,SAAS,CAACZ,MAAM,KAEtB,EAAAiB,QAAQ,WACP,EAAKL,SAAS,CAACZ,MAAM,K,EAzBiB,QA2BvC,YAAAzP,OAAA,e,IAAA,OACOwE,EACL,aADc,CACb,KAAM,CACNF,SAAU,SAACzR,GACVtI,QAAQC,IAAI,eAAgBqI,EAAMiG,OAAOjQ,OACzC,EAAKunB,SAASvd,IAEfuN,YAAY,4DACZ8M,cAAe,CAAE5N,MAAO,mEAAgB,GAItC,GADiB,cAAC,KAAM,CAACA,MAAM,qBAAc,GACrBjY,KAAKyL,OAA3BsG,EAAU,aAAEuX,EAAI,OAClBvX,IACHA,EAAa,IAEVuX,IACHA,EAAO,IAER,IAAMC,EAxDR,SAAiBD,GAChB,IAAIC,EAAO,GAMX,OALA,IAAEtX,KAAKqX,GAAM,SAAS/W,GACrB,IAAEN,KAAKM,EAAIZ,UAAU,SAAC6X,GACrBD,EAAKjrB,KAAKmB,OAAO6L,OAAO,GAAIke,EAAK,CAACL,WAAY5W,EAAIlQ,YAG7C,IAAEonB,QAAQF,EAAM,MAiDTG,CAAQJ,GACrB,OACC,aADM,CACL,KAAY,IAACK,aAAc,KAAcC,eAAgB,KAAgBC,aAAc,KAAcC,cAAe,MAAa,UACjI,cAAC,KAAmB,UACnB,cAAC,KAAyB,IAACC,OAAO,WAAS,UAC1C,eAAC,KAAW,IACX3R,MAAM,6CACN4R,YAAajY,EAAW9L,KACxBkX,OAAQA,EAERkM,QAASrpB,KAAKqpB,QACdY,OAAQjqB,KAAK8oB,MAAMV,KACnBa,eAAgBjpB,KAAKipB,gBAAc,WAEnC,cAAC,KAA4B,IAAC7Q,MAAM,wCAAQ,UACkC,QAA5E,MAAEwE,OAAO0M,GAAM,SAAC/W,GAAS,OAAOA,EAAItM,KAAK8F,QAAQ,EAAK+c,MAAM3L,SAAW,YAAK,eAAE5b,KAAI,SAACgR,EAAKtU,GAAM,OAC9F,aAD8F,CAC7F,KAAe,CAEfyT,YAAaa,EAAIb,YAEjBwY,SAAU,cAAC,KAAI,CACdrE,cAAe,CAAE5N,MAAO1F,EAAItM,MAC5BsF,SAAS,WACTtF,KAAMsM,EAAIf,KACVa,KAAK,cAAO,GAEb8K,OAAQ,EAAK2L,MAAM3L,OACnB/E,MAAO7F,EAAItM,KACXoP,QAAS,SAACyM,GAAK,OAAO,EAAKzM,QAAQ9C,EAAIuP,KAXlCvP,EAAIlQ,cAaT,GAEH,8BACA,cAAC,KAA4B,IAAC+V,MAAM,4BAAM,UACoC,QAA5E,MAAEwE,OAAO2M,GAAM,SAACC,GAAS,OAAOA,EAAIvjB,KAAK8F,QAAQ,EAAK+c,MAAM3L,SAAW,YAAK,eAAE5b,KAAI,SAACioB,EAAKvrB,GAAM,OAC9F,aAD8F,CAC7F,KAAe,IAAckf,OAAQ,EAAK2L,MAAM3L,OAAQ9H,QAAS,SAACyM,GAAK,OAAO,EAAKzM,QAAQmU,EAAI1H,KAAG,UAAI0H,EAAIvjB,OAArFujB,EAAInnB,cACzB,WAC4B,UAClB,SACa,UACP,IArFlB,EAAA8nB,YAAc,uBADtB,CAAwC,IAAMC,WAA9C,I,wtBCnBA,yB,+CAAqC,QAGpC,YAAAzR,OAAA,WAkHC,OACC,aADM,CACL,KAAY,IAAC0R,SAAS,iBAAe,UACrC,cAAC,KAAU,CACV7Y,KACC,cAAC,KAAI,CACJqU,cAAe,CAAE5N,MAAO,eACxB1M,SAAS,WACTtF,KAAK,oBAAa,GAGpBqkB,KAAK,yCACLrS,MAAM,gBACNsS,qBACC,cAAC,KAAQ,CACR1E,cAAe,CAAErU,KAAM,iBACvBgZ,gBAAgB,yBAChBC,cAAc,OACdpT,aAAa,UACbC,SAAS,OACTjV,GAAG,qCACHnE,QAAS,CACR,CAAE+Z,MAAO,gBAAiBzW,MAAO,MACjC,CAAEyW,MAAO,gBAAiBzW,MAAO,MACjC,CAAEyW,MAAO,kBAAmBzW,MAAO,MACnC,CAAEyW,MAAO,iBAAkBzW,MAAO,aAClC,GAGHkpB,gBA7Ia,WAAM,OACrB,aADqB,CACpB,KAAiB,UACjB,eAAC,KAAW,IAAChT,QAAQ,OAAOrV,GAAG,oCAAkC,WAChE,cAAC,KAAM,CAAC4V,MAAM,YAAK,GACnB,cAAC,KAAQ,CACR0S,MAAM,QACN9E,cAAe,CAAErU,KAAM,gBACvB6F,aAAa,UACbC,SAAS,OACTE,YAAY,gBACZnV,GAAG,6CACHnE,QAAS,CACR,CAAE+Z,MAAO,gBAAiBzW,MAAO,MACjC,CAAEyW,MAAO,gBAAiBzW,MAAO,MACjC,CAAEyW,MAAO,kBAAmBzW,MAAO,MACnC,CAAEkK,KAAM,WACR,CAAEuM,MAAO,iBAAkBzW,MAAO,aAClC,WACA,SACW,IA2HbopB,iBAvHc,WAAM,OACtB,cADsB,CACrB,IAAM1C,SAAQ,WACd,cAAC,KAAiB,UACjB,cAAC,KAAQ,IACRyC,MAAM,QACNtoB,GAAG,iDACHnE,QAAS,CACR,CAAE+Z,MAAO,gBAAiBzW,MAAO,MACjC,CAAEyW,MAAO,gBAAiBzW,MAAO,MACjC,CAAEyW,MAAO,kBAAmBzW,MAAO,MACnC,CAAEkK,KAAM,WACR,CAAEuM,MAAO,iBAAkBzW,MAAO,QAClC,UAED,cAAC,KAAe,UACf,cAAC,KAAM,CACNqkB,cAAe,CAAErU,KAAM,sBACvB6F,aAAa,UACbC,SAAS,WACTE,YAAY,aAAM,SACjB,UACe,SACR,GAEZ,cAAC,KAAiB,UACjB,cAAC,KAAQ,IACRmT,MAAM,QACN9E,cAAe,CAAErU,KAAM,eACvB6F,aAAa,UACbC,SAAS,WACTE,YAAY,OACZnV,GAAG,mDACHnE,QAAS,CACR,CAAE+Z,MAAO,gBAAiBzW,MAAO,MACjC,CAAEyW,MAAO,gBAAiBzW,MAAO,MACjC,CAAEyW,MAAO,kBAAmBzW,MAAO,MACnC,CAAEkK,KAAM,WACR,CAAEuM,MAAO,iBAAkBzW,MAAO,QAClC,UAED,cAAC,KAAe,UACf,cAAC,KAAM,CACNqkB,cAAe,CAAErU,KAAM,eACvB6F,aAAa,UACbC,SAAS,QACTE,YAAY,OACZE,QAAQ,aAAM,SACb,UACe,SACR,GAEZ,cAAC,KAAiB,UACjB,cAAC,KAAM,CACNmO,cAAe,CAAErU,KAAM,aACvB6F,aAAa,UACbC,SAAS,OACTE,YAAY,gBACZE,QAAQ,aAAM,SACb,GAEH,cAAC,KAAiB,UACjB,cAAC,KAAM,CACNmO,cAAe,CAAErU,KAAM,WACvB6F,aAAa,UACbC,SAAS,UACTE,YAAY,gBACZE,QAAQ,aAAM,SACb,GAEH,cAAC,KAAiB,UACjB,eAAC,KAAW,IAACA,QAAQ,OAAOrV,GAAG,qCAAmC,WACjE,cAAC,KAAM,CACNwjB,cAAe,CAAErU,KAAM,UACvB6F,aAAa,UACbC,SAAS,QACTE,YAAY,gBACZE,QAAQ,aAAM,GAEf,cAAC,KAAM,CACNmO,cAAe,CAAErU,KAAM,WACvB6F,aAAa,UACbC,SAAS,aACTE,YAAY,gBACZE,QAAQ,aAAM,WACb,SACW,UACK,IAkCnBU,MAAM,kBACNyS,UAAQ,EACRnT,QAAQ,oBAAa,UACpB,IArJE,EAAAyS,YAAc,8BADtB,CAAqC,IAAMC,W,0qBCH3C,4B,+CAcA,OAdiC,QAChC,YAAAzR,OAAA,WACK,MAA8D3Y,KAAKyL,MAAjE,IAAAF,gBAAQ,MAAC,WAAU,EAAEtF,EAAI,OAAE,IAAAoM,YAAI,MAAC,QAAO,EAAEwT,EAAa,gBAC5D,OACC,aADM,CACL,KAAY,IAAC8D,aAAc,KAAcC,eAAgB,KAAgBC,aAAc,KAAcC,cAAe,MAAa,UACjI,cAAC,KAAI,CACWjE,cAAeA,EACfta,SAAUA,EACVtF,KAAMA,EACNoM,KAAMA,QAAI,UACZ,IAIlB,EAdA,CAAiC,IAAM+X,W,4qBCAvC,4B,+CASA,OATyC,QACxC,YAAAzR,OAAA,WACO,IAAAhH,EAAa3R,KAAKyL,MAAK,SAC7B,OACC,aADM,CACL,KAAY,IAACke,aAAc,KAAcC,eAAgB,KAAgBC,aAAc,KAAcC,cAAe,MAAa,UAChInY,SAAQ,IAIb,EATA,CAAyC,IAAMyY,W,qpECSlCU,IAJM,KAAM,OAIE,aAAS,SAACrf,GAC3B,IAQFsf,EARE,KAAsB,mBAAS,CAAC3C,MAAM,EAAMC,QAAS,OAAM,GAA1DvnB,EAAM,KAAEwnB,EAAS,KACLxZ,GAAuCrD,EAAK,UAALA,EAAK,MAAtCoL,EAAiCpL,EAAK,WAAdiJ,GAASjJ,EAAK,QAAV,GAAKA,EAApD,8CACE,EAAsFoL,EAAU,aAAlFD,OAAW,IAAG,KAAE,EAAC,EAAuDC,EAAU,oBAA5CC,OAAiB,MAAC,GAAE,EAACmG,EAAapG,EAAU,SAChGmU,EAA6IpU,EAAW,aAA1IqU,EAA+HrU,EAAW,eAA3HsU,EAAgHtU,EAAW,gBAA1GuU,EAA+FvU,EAAW,SAAhG2H,EAAqF3H,EAAW,SAAtF,EAA2EA,EAAW,mBAAtFwU,OAAkB,IAAG,QAAK,EAAE,EAA+CxU,EAAW,QAAjDyU,OAAY,IAAG,KAAE,EAACC,EAAoB1U,EAAW,gBAC5JpV,EAAOqV,EAAWrV,OAASiK,EAAMmN,KAEjCmP,EAAa,GACbwD,EAAe,IAAErG,WAAW8F,GAAgBA,IAAiBA,EAE9D,IAAE7qB,QAAQorB,KAELR,EADDvpB,GAASA,EAAMgqB,EACOhqB,EAAMgqB,EAEND,EAAa,IAGtC,IASAE,EAAkBC,EAAwBC,EAAuBC,EATjE,KAAgC,mBAAS,IAAEzrB,QAAQorB,GAAgBR,EAAqBQ,GAAa,GAApGM,EAAW,KAAEC,EAAc,KAC5B,KAAwC,mBAAS,IAAG,GAAnDC,EAAe,KAAEC,EAAkB,KAEpC9tB,EAAU0Y,EAAYoR,gBAAkBpR,EAAYoR,gBAAkBpR,EAAY1Y,QAOtF,GALO,IAAEwmB,SAASljB,KAAW,IAAErB,QAAQqB,KAC/BA,EAAMA,EAAW,KAItBqqB,EAAY,CAEX,IADAJ,EAAoB/a,GAAQU,UAAUya,IAChBhc,UAAW,OAAQ,aAAD,CAAC,gBAAK,cAAC,KAAI,iBAAE,GACrD6b,EAA0BD,EAAkBpb,OAC5Csb,EAAwBD,EAAwC,eAAIA,EAAwC,eAAI,OAC7GA,EAAwBla,OACvBoa,EAAwBF,EAAwBla,MAGxD,IACIya,EACArP,EACAjc,EAHAurB,EAAW,GAQf,GAJGT,GAAqBjqB,IACpBob,EAAS,CAAC,CAACwO,EAAoB,IAAK5pB,IACpCb,EAAS,CAACyqB,EAAoBO,EAAuB,QAE/C,SAAP7c,EAAc,CACb,GAAGtN,EACC,GAAIqqB,EAAa,CAEb,IADM5a,EAAawa,EAAkB5a,cAAc+L,EAAQjc,IAC5CkP,UAAW,OAAQ,aAAD,CAAC,gBAAK,cAAC,KAAI,iBAAE,GAE9C,IADAoc,EAAiBhb,EAAWxO,OACNwpB,EAAezqB,OAASyqB,EAAezqB,MAAM9B,OAAS,EAAG,CAC3E,IAAI,EAAiB0rB,EAClBA,GAA6C,QAAvBA,IAErB,EAAiB,OAErBc,EAAaD,EAAezqB,MAAMD,KAAI,SAAC4qB,GACnC,MAAO,CAAE3qB,MAAO2qB,EAAW,GAAiBlU,MAAOkU,EAAWR,OAGtE5D,EAAOmE,OAGPhuB,EAAU,IAAEgnB,WAAWhnB,GAAWA,EAAQ4Y,GAAqB5Y,EAC/D6pB,EAAO,IAAEnL,OAAO1e,GAAQ,SAAC+pB,GACrB,OAAO1J,EAAW/c,EAAMuK,QAAQkc,EAAWzmB,QAAU,EAAIymB,EAAWzmB,QAAUA,KAI1F,OAAQ,aAAD,CAAE,IAAM0mB,SAAQ,UAAEH,EAAKxmB,KAAI,SAAC4mB,EAAStc,GAAS,OACjD,cADwD,CACvD,IAAMqc,SAAQ,WACVrc,EAAQ,GAAK,KACZggB,EAAe,aAAD,CAAE,KAAI,IAAClH,GAAInB,GAAmBqI,EAAa1D,EAAQ3mB,OAAQiU,UAAU,qDAAmD,UAAE0S,EAAQlQ,aAAK,GAAakQ,EAAa,QAFhKA,EAAQ3mB,gBAI9B,GAEC+c,IACA1H,EAAW/H,KAAO,YAEtB,IACI,EADA,EAAsBgI,EAEtBsV,GAAa,EACbC,EAAY,SAAOvrB,EAAa2K,GAAU,2C,gFAKvC,IAAEyZ,WAAWhnB,IACZ,EAAeqqB,WAAaznB,EAAO0nB,SACnC,EAAe8D,cAAgBT,EACf,GAAM3tB,EAAQ,KAH/B,M,OAIC,MAAO,CAAP,EADgB,U,OAsDL,OAlDPgC,EAAe,GAAIqsB,EAAmB,GAAIjN,EAAkB,GAC5D9d,IAEA+qB,EAAc,CAACnB,EAAoB,IAAK5pB,IAExCV,EAAO0nB,WACPlJ,EAAa,CAACqM,EAAuB,WAAY7qB,EAAO0nB,YAExDgE,EAAqBlB,EAAkBA,EAAgBD,GAAgBA,GACxD3rB,SACX4f,EAAW5f,OACP,IAAES,QAAQqsB,GACVlN,EAAa,CAACkN,EAAgBlN,IAGxBE,EAAkB,oCAA0BF,GAClDA,EAAa,IAAIkN,EAAc,UAAUhN,EAAe,KAI5DF,EAAakN,GAGjBD,EAAY7sB,QAAU4f,EAAW5f,OAC7B,IAAES,QAAQmf,GACVpf,EAAU,CAACqsB,EAAa,KAAMjN,IAGxBmN,EAAmB,oCAA0BF,GACnDrsB,EAAU,IAAIusB,EAAgB,SAASnN,EAAU,KAGhDiN,EAAY7sB,SAAW0oB,KAC5BloB,EAAUqsB,EAELjN,EAAW5f,SAChBQ,EAAUof,GAEV,EAAS,CAAC8L,EAAoBO,GAE9B5F,EAAc,GACdkF,IACAlF,EAAOzkB,KAAO,IAAEC,IAAI0pB,GAAgB,SAACzpB,EAAO5B,GAExC,OADG,EAAOmM,QAAQnM,GAAK,GAAI,EAAOtB,KAAKsB,GAC7BA,GAAe,GAAT4B,EAAa,GAAK,YACnCC,KAAK,MAERypB,IACAnF,EAAO9kB,SAAWiqB,GAEX,GAAMnd,EAAIK,eAAeyd,EAAa3rB,EAAS,EAAQ6lB,I,OAQlE,OARItjB,EAAO,SAQJ,CAAP,EANgBA,EAAKjB,MAAMD,KAAI,SAAC2iB,GAC5B,MAAO,CACHjM,MAAOiM,EAAKyH,GACZnqB,MAAO0iB,EAAKkH,gBAOxBS,EACK3tB,EAGIA,IACD,IAAEiC,QAAQjC,GACV2Y,EAAW3Y,QAAUA,EACd,IAAEgnB,WAAWhnB,KACpB,EAAUmuB,IANd,EAAUA,EAUV,IAAEnH,WAAWhnB,GACb,EAAU,SAAO4C,EAAa2K,GAAU,2C,mDAEpB,OADhBqL,EAAkByR,WAAaznB,EAAO0nB,SACtB,GAAMtqB,EAAQ4Y,I,OAC9B,MAAO,CAAP,EADgB,kBAIpBD,EAAW3Y,QAAUA,EAG7B,IAMIwuB,EAAkB7V,EACtB,GAAG,IAAE1W,QAAQorB,GAAc,CAGnB,IAAMta,EADV,GADAmb,GAAa,EACV5qB,GAICyqB,GAHMhb,EAAawa,EAAkB5a,cAAc+L,EAAQjc,IAG/B8B,OACNwpB,EAAezqB,OAASyqB,EAAezqB,MAAM9B,OAAS,IACxEqsB,EAAkBE,EAAezqB,MAAMD,KAAI,SAAC4qB,GACxC,OAAOA,EAAWR,MACnBlqB,KAAK,MAGhBirB,EAAgBjtB,OAAO6L,OAAO,GAAIuL,EAAY,CAC1CrV,MAAO,CAACA,MAAOqV,EAAWrV,MAAMyW,MAAO8T,GACvC9O,SAAS,SAACX,EAAayJ,GACnBiG,EAAmB1P,EAAOrE,OAC1BgF,EAAS,CAACuO,EAAGK,EAAatpB,IAAK,CAAC+Z,EAAO9a,YAInD,IAAImrB,QAAgB,EACjBxB,GAAYS,IACXe,GAAmB,SAACzI,GAChB,OACI,cADG,CACF,IAAMgE,SAAQ,WACX,yBAAMvQ,KAAK,MAAK,aAAY,QAAQlC,UAAU,yBAAuB,UAAC,cAAC,GAAW,CAACxP,KAAM2lB,EAAuBvZ,KAAK,gBAAS,UAAE,GAChI,+BAAO6R,EAAKjM,YAAK,UAAQ,KAKzC,IAAIlB,QAAa,EACX6V,GAAelB,GAA2BA,EAAwBmB,YAEpE9V,GADD6V,GACiB,CACZ3e,cAAe4d,EACf5O,SAAUyP,EAAczP,SACxBsB,SAAQ,EACR/c,MAAOkrB,EAAclrB,OAIT,IACZsN,KAAMA,EACN6Z,YAAY,EACZmE,WAAW,EACXlE,iBAAkB,QAClB/R,WAAY6V,EACZ1N,QAAO,EACPoN,aAAY,EACZtrB,OAAM,EACN2nB,wBA3DwB,SAACL,GACzBA,GACAE,EAAU,CAAEF,KAAI,EAAEC,QAAS,IAAIK,QA0D/BiE,iBAAgB,IACbjY,GAGX,IAAMqY,GAAsB,CACxBje,KAAMA,EACN6Z,YAAY,EACZmE,WAAW,EACXlE,iBAAkB,QAClB3L,SAAU,SAACzb,GACPsqB,EAAetqB,IAEnBqY,aAAagS,GAEXmB,GAAwB,IAAE7sB,QAAQorB,KAAkB,IAAEprB,QAAQjC,GAChE,GAAyB,GACzB+uB,QAA2B,EAU/B,GATGD,KACC,IAAEnmB,QAAQ0kB,GAAa,SAACzkB,GACpB,IAAM2kB,EAAoB/a,GAAQU,UAAUtK,GACvC2kB,EAAkB5b,WACnB,GAAmBvR,KAAK,CAAC2Z,MAAMwT,EAAkBpb,OAAO4H,MAAMzW,MAAMsF,OAG5EmmB,GAA8B,GAAmBvtB,SAAW6rB,EAAa7rB,QAE1EutB,GAA6B,OAAQ,aAAD,CAAC,gBAAK,cAAC,KAAI,iBAAE,GACpD,IAAMC,GAAa,IAAE/sB,QAAQorB,GAAgB,MAAQ,OACrD,OACI,cADG,CACF,IAAMrD,SAAQ,WAEP8E,IACC,aAAD,CAAE,KAAM,IAACxW,MAAO,CAAEsB,MAAO,QAAciV,GAAmB,CAAE7uB,QAAS,UAAkB,GAE1F0uB,GAAgB,aAAD,CAAEO,GAAe,MAAKpW,GAAa,CAAEP,MAAQ,CAAEsB,MAAOoV,WAAY,GAAU,aAAD,CAAE,KAAW,MAAKnW,GAAa,CAAEP,MAAQ,CAAEsB,MAAOoV,WAAY,UAAM,OAOlKC,GAAkB,aAAS,SAAC1hB,GAC7B,IAAAwC,EAAsGxC,EAAK,cAA5F,EAAuFA,EAAK,UAA5F4U,OAAS,IAAG,SAAM,EAAE,EAAmE5U,EAAK,YAAxE6U,OAAW,IAAG,WAAQ,EAAE,EAA2C7U,EAAK,QAAhDvL,OAAO,IAAG,KAAE,EAAEsB,EAA6BiK,EAAK,MAA3BwR,EAAsBxR,EAAK,SAAdiJ,EAAI,GAAKjJ,EAAxG,0EACA9K,EAAS,CAAC0f,EAAWC,GACrBpS,EAASwC,GAAQU,UAAUnD,GACjC,GAAIC,EAAO2B,UAAW,OAAQ,aAAD,CAAC,gBAAK,cAAC,KAAI,iBAAE,GAC1C,IAAI4Q,EAAW,GACTxP,EAAkB/C,EAAO2C,cAAc3Q,EAASS,GACtD,GAAIsQ,EAAWpB,UAAW,OAAQ,aAAD,CAAC,gBAAK,cAAC,KAAI,iBAAE,GAC9C,IAAMoc,EAAiBhb,EAAWxO,KAIlC,OAHIwpB,GAAkBA,EAAezqB,OAASyqB,EAAezqB,MAAM9B,OAAS,IACxE+gB,EAAWiD,GAAuBuI,EAAezqB,MAAO6e,EAAWC,IAGrE,aADK,CACJ,KAAU,IACT9J,MAAO,CAAEsB,MAAO,QAChBtW,MAAOA,EACP4rB,cAAe,CAAEC,UAAW,IAAKC,SAAU,QAC3C7M,SAAUA,EACV1H,YAAY,qBAEZkE,SAAUA,GACNvI,QAAI,MAKH,GAAS,CAClBiE,OAAQ,SAACC,EAAWnN,GAChB,OAAQ,aAAD,CAAEqf,GAAW,MAAKrf,EAAK,CAAEqD,KAAK,cAAM,IAE/C+J,eAAgB,SAACD,EAAWnN,GACxB,OAAQ,aAAD,CAAEqf,GAAW,MAAKrf,EAAK,CAAEqD,KAAK,cAAM,K,iNCnUtCye,GAAgB,CAC3B5U,OAAQ,SAACC,EAAWnN,GAChB,OAAQ,aAAD,CAAEqf,GAAW,MAAKrf,EAAK,CAAEqD,KAAK,cAAM,IAE/C+J,eAAgB,SAACD,EAAWnN,GACxB,OAAQ,aAAD,CAAEqf,GAAW,MAAKrf,EAAK,CAAEqD,KAAK,cAAM,K,kgBC6CpC0e,GAAoB,SAAC/hB,GAC1B,IAAC8D,EAAD,GAAS,WAAQiM,UAAS,GAArB,GAEmB,GAAiB/P,EAAK,KAALA,EAAK,KAALA,EAAK,YAAtBoL,OAAU,MAAC,GAAE,EACnC,EAA8EA,EAAU,aAA1ED,OAAW,IAAG,KAAE,EACzBb,GADyEc,EAAU,oBACxDA,EAAU,OAAtBoG,EAAYpG,EAAU,SAC3C,EAA8BD,EAAW,WAAzC6W,OAAU,MAAC,GAAE,EAAE,EAAe7W,EAAW,QAA1BjD,OAAO,IAAG,IAAC,EAkB3B2E,GAjBQ1B,EAAYqB,MAAOrB,EAAYqB,MAAOrB,EAAY3Q,KAiB7C,CACjBsS,gBAAiB,CAAC,iBAAkB,UAAU5E,EAAO,UACrD8C,WAAY,gBACZ+B,IAAK,gBAGP,OACE,aADK,CACJ,K,IAEC/C,UAAU,kBACVM,cAAeA,EACfnB,WAAW,OAEXrF,KAAMA,EACNme,WAAW,EACXpZ,WAAW,EACXqZ,eAAkB,SAACC,EAAmBC,GAChC5Q,GAAUA,EAAS4Q,KACxB,UAID,cAAC,KAAI,MAAKvV,EAAU,UArCN,WAChB,IAAM3X,EAAS,GAWf,OAVA,IAAEkG,QAAQ4mB,GAAY,SAAC5R,EAAWrB,GAChC,IAAMsT,EAAiB,CACrBluB,IAAK4a,EACLvU,KAAMuU,EACNA,UAAWA,EACXvC,MAAO4D,EAAM5D,MAAM4D,EAAM5D,MAAMuC,EAC/B5D,YAAaiF,GAEflb,EAAOrC,KAAK,cAACic,GAAW,MAAKuT,QAAc,OAEtCntB,EA0BFotB,UAAW,UACP,IAKA,GAAS,CACpBpV,OAAQ,SAACC,EAAWnN,GAClB,OACI,aADG,CACF+hB,GAAiB,MAAK/hB,EAAK,CAAEqD,KAAK,cAAM,IAG/C+J,eAAgB,SAACC,EAAQrN,GACvB,OACI,aADG,CACF+hB,GAAiB,MAAK/hB,EAAK,CAAEqD,KAAK,cAAM,K,khBCnG3C,GAAmB,SAACrD,GAEtB,IAAAjK,EAGEiK,EAAK,MAFP,EAEEA,EAAK,UAFP0K,OAAS,IAAG,SAAM,EAClBS,EACEnL,EAAK,YACT,OAEE,aAFK,CAEJ,KAAQ,CACPqD,KAAK,OACLqH,UAAWA,EACXU,WAAY,CACVI,aAAcL,GAEhBgC,KAAMpX,EACNwV,UAAU,SAAE,IAKZ,GAAiB,sBAAW,SAACvL,EAAY+Z,GAE3C,MAEE/Z,EAAK,UAFP0K,OAAS,IAAG,SAAM,EAClBS,EACEnL,EAAK,YACH,KAAoB,mBAASA,EAAMjK,OAAM,GAAxCA,EAAK,KAAE0N,EAAQ,KActB,OAXA,8BAAoBsW,GAAK,WACvB,MAAO,CACHC,SAAQ,WACJ,OAAOjkB,GAEXkkB,QAAO,WACL,OAAO,OAMb,aADK,CACL,cAASjQ,UAAU,8CAA8CkC,KAAK,UAAQ,UAC5E,wBAAKlC,UAAU,sBAAoB,UACjC,cAAC,KAAQ,CACP3G,KAAK,OACLqH,UAAWA,EACX3U,MAAOA,EACPyb,SAAU,SAAC0I,G,SACkB,QAAvB,EAAQ,OAARA,QAAQ,IAARA,OAAQ,EAARA,EAAUC,qBAAa,eAAEpkB,OAC3B0N,EAAgC,QAAvB,EAAQ,OAARyW,QAAQ,IAARA,OAAQ,EAARA,EAAUC,qBAAa,eAAEpkB,OAElC0N,EAASyW,IAEb9O,WAAY,CACVI,aAAcL,SACf,UACC,UACA,MAUCoX,GAAkB,SAACviB,GAEvB,MAAwCA,EAAK,KAA7CqD,OAAI,MAAC,OAAM,EAAY,GAAiBrD,EAAK,KAALA,EAAK,YAAtBoL,OAAU,MAAC,GAAE,EACnC,EAA4GA,EAAU,aAAxGD,OAAW,IAAG,KAAE,EAAmDqX,GAA2BpX,EAAU,oBAAVA,EAAU,OAAvBoG,EAAapG,EAAU,SAE9H,IAAEhQ,QAAQonB,GAAc,SAACC,GAClBA,EAAI9qB,MACP8qB,EAAI9qB,IAAI,mBAEN,SAAoB,mBAAc6qB,GAAgB,IAAE9tB,QAAQ8tB,GAAeA,EAAe,IAAG,GAA5FzsB,EAAK,KACN,GADgB,KAChB,GAAwB,mBAAc,MAAK,IAA1C2sB,EAAO,KAAEC,EAAU,KAkH1B,OACE,cADK,CACL,UAAK3Y,UAAU,gCAA8B,WAC3C,cAAC,eAAW,CACV4Y,eAAe,EACfC,aA3De,SAAU7rB,GAC7B,OAAOA,EAAKW,KA2DRmrB,gBAAgB,EAChBC,aAAa,EACbtH,QAAS1lB,EACTwkB,WA3Da,WAEV,MAAiBpP,EAAW,WAA5B6W,OAAU,MAAC,GAAE,EAEd9Z,EAAgB,CAAC,CACrB8a,QAAiB,QAAR3f,EACT4f,OAAgB,QAAR5f,GACRmX,WAAW,EACXnO,MAAO,GACPoO,SAAU,GACVC,SAAU,KAuCZ,OArCA,IAAEtf,QAAQ4mB,GAAY,SAAC5R,EAAOrB,GAC5B7G,EAAQrV,KAAK,CACXud,MAAOrB,EACP6L,WAAYxK,EAAM5D,MAAM4D,EAAM5D,MAAMuC,EACpC1C,MAAO+D,EAAMnB,QAAS,IAAK,IAC3ByL,SAAUtK,EAAMnB,QAAS,IAAK,IAC9BuL,WAAW,EACXrJ,QAAQ,EACR0J,aAAc,mBACdC,mBAAoB,CAClB3P,YAAaiF,EACb1F,UAAW0F,EAAMnQ,KACjBoD,KAAI,GAEN0X,WAAY,iBACZC,iBAAkB,CAChB7P,YAAaiF,EACb1F,UAAW0F,EAAMnQ,KACjBoD,KAAI,GAMN4X,UAAW7K,EAAMhN,cAIrB8E,EAAQrV,KAAK,CACXowB,OAAgB,QAAR5f,GACRgJ,MAAO,GACPoO,SAAU,GACVC,SAAU,GACVF,WAAW,EACXK,aAAc,aACdE,WAAY,eAEP7S,EAUSgT,GACZI,+BAA+B,EAC/B4H,aAzEe,SAAC7M,GACpB,IAAIoF,EAAU,GACdpF,EAAElkB,IAAIgxB,aAAY,SAAUC,GAC1B3H,EAAQ5oB,KAAKuwB,EAAKpsB,SAEpBwa,EAASiK,IAoEsB4H,KAxNnC,WAyNQC,cAnFgB,SAACC,GACT,QAARlgB,GAEJkgB,EAAOpxB,IAAIqxB,iBAAiB,CAC1BC,SAAUF,EAAOE,SACjBC,OAAQH,EAAOlb,OAAOsb,SA+EpBC,YAAa,SAACvuB,GACZstB,EAAWttB,EAAOlD,KAClBkD,EAAOlD,IAAI0xB,oBAEbC,uBAAuB,EACvBpI,oBAAuB,CACrBC,iBAAkB,GAClBC,eAAgB,GAChBC,WAlHW,SAAC7b,GAClB,OACE,aADK,CACJ,KAAQ,CACPoa,cAAe,CAAErU,KAAM,WACvB6F,aAAa,UACbC,SAAS,OACTE,YAAY,gBACZD,SAAS,UACTO,MAAM,UACNgO,aAAa,0BACb1E,SAAU,SAAC2E,GACY,WAAjBA,EAAOvkB,OApBD,SAACiK,G,MACX+jB,EAAuB,QAAV,EAAA/jB,EAAMhJ,YAAI,eAAEW,IACzBuiB,EAAWnkB,EAAMob,QAAO,SAAU6S,GACtC,OAAOA,EAASrsB,KAAOosB,KAEzB/jB,EAAM7N,IAAI8xB,WAAW/J,GACrB1I,EAAS0I,GAeDgK,CAAUlkB,IAGdvN,QAAS,CACP,CAAE+Z,MAAO,eAAMzW,MAAO,iBACvB,WAkGA,GAEO,QAARsN,GACA,aADkB,CACjB,KAAM,CACLuI,aAAa,UACbC,SAAS,MACTsY,aAAa,OACb3X,MAAM,eACNP,QAAQ,OACRrC,QAAS,WAAI,OA9IN,WACb,IAAMwa,EAAS,CACbzsB,IAAK,gBAEP5B,EAAMlD,KAAKuxB,GACX1B,EAAQuB,WAAWluB,GACnByb,EAASzb,GAwIUsuB,UAAQ,WAExB,IAKM,GAAO,CAClBnX,OAAQ,SAACC,EAAWnN,GAClB,OACI,aADG,CACFuiB,GAAe,MAAKviB,EAAK,CAAEqD,KAAK,cAAM,IAG7C+J,eAAgB,SAACC,EAAQrN,GACvB,OACI,aADG,CACFuiB,GAAe,MAAKviB,EAAK,CAAEqD,KAAK,cAAM,K,k1DChOlCihB,GAAa,aAAS,SAACtkB,GACxB,MAAyCA,EAAK,WAA9CoL,OAAU,IAAG,KAAE,EAAE/H,EAAwBrD,EAAK,KAAvBmN,EAAkBnN,EAAK,KAAjBukB,EAAYvkB,EAAK,SAChDwR,EAAapG,EAAU,SAE7B,GAAa,SAAT/H,EAAiB,CACjB,IAAItQ,EAAMoO,EAASF,QAAU,cAAcsjB,EAAS,IAAMpX,EAC1D,OAAQ,aAAD,CAAE,KAAK,CAACqX,IAAI,eAAKnY,MAAO,GAAIsR,IAAK5qB,QAAG,GAG/C,GAAa,SAATsQ,EAAiB,CAEjB,IAAMohB,EAAWzwB,OAAO6L,OAAO,GAAIG,EAAO,CAACxF,KAAK,SAC1C,KAA0B,mBAAS,IAAG,GAArCkqB,EAAQ,KAAE,EAAW,KAetBC,EAAa,CAEfC,OAAQzjB,EAASF,QAAU,OAAOsjB,EAClCM,SAAU,eACVH,SAAQ,EACRI,UAnBc,SAAMC,GAAI,2C,kEACpBpH,EAAMoH,EAAKhyB,KACX,MACM,GAAM,IAAIiyB,SAAQ,SAAAC,GACpB,IAAMC,EAAS,IAAIC,WACnBD,EAAOE,cAAcL,EAAKM,eAC1BH,EAAOI,OAAS,WAAM,OAAAL,EAAQC,EAAO9c,a,OAHzCuV,EAAM,S,wBAMJ4H,EAAQ,IAAIjoB,OAAOkoB,OACnB7H,IAAMA,EACMrgB,OAAOqf,KAAKgB,GACpBte,SAASomB,MAAMF,EAAMG,W,YAQ/BzlB,KAAM,OACNhN,OAAQ,OACR0yB,OAAQ,8CAER3uB,KAAM,CACF4uB,MAAOzkB,EAASD,SAChB2kB,MAAO1kB,EAASvM,QAEpB5B,QAAS,CACL,YAAamO,EAASvM,OACtB,eAAgBuM,EAAS5I,WAE7BiZ,SAAU,SAAC/e,GACC,IAAAsyB,EAAgCtyB,EAAO,KAAvBqzB,EAAgBrzB,EAAO,SAC/C,EAAYqzB,GACQ,SAAhBf,EAAKzxB,QACLke,EAASuT,EAAK1xB,SAASsE,OAInC,OACI,aADG,CACF,KAAM,MAAK8sB,EAAcE,EAAU,UAC/BD,EAASzwB,OAAS,GAAK,kBAAU,O,iNC/DrC,GAAa,CACtBkP,QAAO,GACP8Y,SAAQ,GACRC,SAAQ,GACRlf,MAAK,GACLmf,OAAM,GACNC,QAAO,GACP2J,OAAM,GACN3I,OAAM,GACNrqB,IAAG,GACHizB,OAAM,GACNlE,cAAa,GACbyD,MDyDiB,CACjBrY,OAAQ,SAACC,EAAWnN,GAChB,OAAQ,aAAD,CAAEskB,GAAU,MAAKtkB,EAAK,CAAEqD,KAAK,OAAOkhB,SAAS,gBAAQ,IAGhEnX,eAAgB,SAACD,EAAWnN,GACxB,OAAQ,aAAD,CAAEskB,GAAU,MAAKtkB,EAAK,CAAEqD,KAAK,OAAOkhB,SAAS,gBAAQ,KC9DhE0B,OC5BkB,CACpB/Y,OAAQ,SAACC,EAAWnN,GAClB,OAAQ,aAAD,CAAEskB,GAAU,MAAKtkB,EAAK,CAAEqD,KAAK,OAAOkhB,SAAS,iBAAS,IAE/DnX,eAAgB,SAACD,EAAWnN,GAC1B,OAAQ,aAAD,CAAEskB,GAAU,MAAKtkB,EAAK,CAAEqD,KAAK,OAAOkhB,SAAS,iBAAS,KDwB7D9hB,OAAM,GACNyjB,KAAI,GACJC,QE9BmB,CACrBjZ,OAAQ,SAACC,EAAWnN,GAClB,OAAQ,aAAD,CAAC,iBAAOmN,QAAI,IAErBC,eAAgB,SAACC,EAAQrN,GACvB,OAAQ,aAAD,CAAC,oBF0BRomB,QGlCmB,CACrBlZ,OAAQ,SAACC,EAAWnN,GAClB,OAAQ,aAAD,CAAC,iBAAOmN,QAAI,IAErBC,eAAgB,SAACC,EAAQrN,GACvB,OAAQ,aAAD,CAAC,oBH8BRqmB,WIhCsB,CACxBnZ,OAAQ,SAACC,EAAWnN,GAClB,OAAQ,aAAD,CAAC,iBAAOmN,QAAI,IAErBC,eAAgB,SAACC,EAAQrN,GACvB,OAAQ,aAAD,CAAC,qB,iNCCNsmB,GAAgC,CACpCC,eAAgB,CACdC,QAAQ,CACNC,sBAAsB,KAKrB,SAASC,GAAe1mB,GAE3B,IAAAlG,EAOEkG,EAAK,OANPuC,EAMEvC,EAAK,cALP2C,EAKE3C,EAAK,eAJP4C,EAIE5C,EAAK,aAHP8C,EAGE9C,EAAK,aAFP,EAEEA,EAAK,YAFP2mB,OAAW,IAAG,MAAI,KAAYL,IAAyB,EACvDpgB,EACElG,EAAK,SAET,OACE,aADK,CACJ8b,GAAc9N,SAAQ,IAACjY,MAAO,CAC7B4wB,YAAW,EACXpkB,cAAa,EACbI,eAAc,EACdC,aAAY,EACZE,aAAY,IACb,UACC,cAAC8jB,GAAA,EAAmB,IAACvyB,OAAQsyB,GAAW,UACtC,cAACnZ,GAAY,IAAC1T,OAAQA,EAAQ2T,aAAc,IAAU,UACnDvH,SAAQ,UACI,UACK,G,qNC3BrB,SAAS2gB,GAAgB7mB,GAG5B,IAAAiB,EAKEjB,EAAK,QAJP,EAIEA,EAAK,SAJPkB,OAAQ,IAAG,EAAAJ,aAAaC,QAAQ,mBAAkB,EAClD,EAGEf,EAAK,OAHPpL,OAAM,IAAG,EAAAkM,aAAaC,QAAQ,kBAAiB,EAC/C,EAEEf,EAAK,UAFPzH,OAAS,IAAG,EAAAuI,aAAaC,QAAQ,iBAAgB,EACjDjH,EACEkG,EAAK,OAETmB,EAASU,WAAWZ,GACpBE,EAASW,YAAYZ,GACrBC,EAASxC,UAAU/J,GACnBuM,EAASc,aAAa1J,GACtB4I,EAASe,UAAUpI,GAGnB,IAAMgtB,EAAsB,CAC1BhtB,OAAM,EACNyI,cAAeD,EAAIC,cACnBI,eAAgBL,EAAIK,eACpBC,aAAcN,EAAIM,aAClBE,aAAcR,EAAIQ,cAGpB,OACE,aADK,CACJikB,GAAe/Y,SAAQ,IAACjY,MAAO,IAAE,UAChC,cAAC,GAAmB,UAClB,cAAC2wB,GAAc,MAAKI,EAAmB,UACpC9mB,EAAMkG,gBAAQ,SACA,UACG,GC3CrB,IAAM6gB,GAAiB,IAAM9Z,cAAmB,M,qBCH1C+Z,GAAY,SAACxsB,GACtB,IAAIysB,EAAUC,OAAO1sB,EAAO,WACxB2sB,EAAU9nB,SAASC,OAAO3D,MAAMsrB,GACpC,OAAIE,EACaA,EAAQ,GAAGtrB,MAAM,KAChB,GAEX,IC4LIurB,OAnLf,SAAapnB,GACX,IAAIqnB,EAAcC,KAAY7iB,MAAMnH,OAAOC,SAASmU,OAAO6V,MAAM,IAC3DC,EAAgB,CACpBvmB,QAASomB,EAAYI,SAAWtmB,EAASF,SAAW,IACpDC,SACEmmB,EAAYK,SCVPV,GAAU,eDUwB7lB,EAASD,SAClDtM,OAAQyyB,EAAYM,QCnBbX,GAAU,cDmB4B7lB,EAASvM,OACtD2D,UACE8uB,EAAYO,WCjBPZ,GAAU,iBDiB4B7lB,EAAS5I,UACtDuB,OAAQqH,EAASrH,QATI,EAYkB+tB,mBAAS,IAZ3B,mBAYhBC,EAZgB,KAYFC,EAZE,OAa8BF,mBAAS,IAbvC,mBAahBG,EAbgB,KAaIC,EAbJ,OAc8BJ,mBAAS,IAdvC,mBAchBK,EAdgB,KAcIC,EAdJ,KAuBvBC,qBAAU,WACRL,EAAiB,GAAD,mBAAKC,GAAL,YAA4BE,OAC3C,CAACF,EAAoBE,IAMxB,IAYMxb,EAAU2b,eACVxW,EAAwB,OAAZnF,GAAgC,OAAZA,EAChC4b,EAAsBzW,EAAW,CACrC,CACE9C,UAAW,OACXwZ,cAAc,EACd1V,QAAQ,GAEV,CACE9D,UAAW,QACXwZ,cAAc,GAEhB,CACExZ,UAAW,wBACXyZ,aAAa,IAEb,CACF,CACEzZ,UAAW,OACX8D,QAAQ,GAEV,CACE9D,UAAW,SAEb,CACEA,UAAW,wBACXyZ,aAAa,EACblR,WAAY,OACZC,gBAAiB,gBACjBC,gBAAiB,OACjBC,kBAAmB,WAGjBgR,EAAe5W,EAAW,CAC9B,CACE9C,UAAW,OACX8D,QAAQ,EACR0V,cAAc,GAEhB,CACExZ,UAAW,QACXwZ,cAAc,GAEhB,CACExZ,UAAW,WACXyZ,aAAa,IAEb,CACF,CACEzZ,UAAW,OACX8D,QAAQ,GAEV,CACE9D,UAAW,SAEb,CACEA,UAAW,WACXyZ,aAAa,EACblR,WAAY,OACZC,gBAAiB,oBACjBC,gBAAiB,SAGrB,OACE,cAACqP,GAAD,2BAAqBW,GAArB,aACE,qBAAKxd,UAAU,MAAf,SACE,eAAC,KAAD,CACEA,UAAU,iBACV2C,MAAM,GACN9Q,MAAM,aACN6sB,UAAQ,EACRC,gBAAc,EALhB,UAOE,eAAC,KAAD,CACE7K,KAAM,CACJ7d,KAAM,QAFV,UAKE,cAAC,KAAQ2oB,QAAT,CAEE7K,IAAG,sBACDiK,EAAmB/zB,OAAS,EACxB,IAAM+zB,EAAmB/zB,OAAS,IAClC,IALR,SAQE,cAAC,GAAD,CACEud,SAlHa,SAACqX,GAC1BZ,EAAuBY,IAkHXrmB,cAAc,cACdkP,OAAQ,CACNuB,WAAY,SAEd3B,aAAcgX,KAbZ,QAgBN,cAAC,KAAQM,QAAT,CAEE7K,IAAG,4BACDmK,EAAmBj0B,OAAS,EACxB,IAAMi0B,EAAmBj0B,OAAS,IAClC,IALR,SAQE,cAAC,GAAD,CACEud,SAhIa,SAACqX,GAC1BV,EAAuBU,IAgIXxU,OAAO,MACP7R,cAAc,WACdkP,OAAQ,CACNuB,WAAY,SAEd3B,aAAcmX,KAdZ,WAkBR,cAAC,KAAD,CACE1d,MAAO,CAAE+d,OAAQ,QACjBC,UAAW,CACTC,QAAS,OACTC,eAAgB,WAChBC,WAAY,UALhB,SAQE,cAAC,WAAD,CACEC,SAAUrB,EAAa7zB,QAAU,EACjC2V,QAxIS,YACjBtM,OAAO8rB,QAAU9rB,OAAOmY,QAAQ4T,YAAhC,2BAEKhC,GAFN,IAGGiC,UAAWxB,EAAahyB,KAAI,kBAAsB,CAAE0E,KAAxB,EAAGA,KAA2BwC,MAA9B,EAASA,YAEvC,KAGFM,OAAOisB,SAgIGtpB,KAAK,UAHP,qCEvKGupB,GAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,+BAAqBt2B,MAAK,YAAkD,IAA/Cu2B,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCFdO,IAAS9c,OAEL,cAAC,GAAD,IAGF7N,SAAS4qB,eAAe,SAM1BT,M,0EClBA,+PACO,SAASU,SAASC,IACxB,IACC,OAAOC,KAAKD,IACZ,MAAO9T,GACP5e,QAAQ8E,MAAM8Z,EAAG8T,KAInB,IAAME,eAAiB,SAACtb,EAAgBub,GACtC,IAGItI,EAHA7W,EAAmB,GACjBiF,EAAQka,EAAap1B,OAAO6Z,GAC5B0D,EAAYrC,GAASA,EAAMnQ,KAG3BsqB,EAAkBxb,EAAUxT,QAAQ,MAAM,OAAOA,QAAQ,MAAM,OACrE,OAAOkX,GACL,IAAK,SAEHuP,EAAa,GACb,8CAAExb,KAAK8jB,EAAap1B,QAAQ,SAACs1B,EAAWr2B,GAGtC,GAFY,IAAI+yB,OAAO,IAAIqD,EAAe,YAEnCha,KAAKpc,GAAK,CAEf,IAAIs2B,EAAUt2B,EAAIwH,MAAM,YACpB+uB,EAAeD,GAAWA,EAAQ,GAAGlvB,QAAQ,IAAK,IACnDmvB,IACD1I,EAAW0I,GAAgBL,eAAel2B,EAAKm2B,QAIrDnf,EAAcnX,OAAO6L,OAAO,GAAIuQ,EAAO,CAAC4R,WAAU,IAClD,MACF,IAAK,OAEHA,EAAa,GACb,8CAAExb,KAAK8jB,EAAap1B,QAAQ,SAACs1B,EAAWr2B,GAGtC,GAFY,IAAI+yB,OAAO,IAAIqD,EAAe,kBAEnCha,KAAKpc,GAAK,CAEf,IAAIs2B,EAAUt2B,EAAIwH,MAAM,YACpB+uB,EAAeD,GAAWA,EAAQ,GAAGlvB,QAAQ,IAAK,IACnDmvB,IACD1I,EAAW0I,GAAgBL,eAAel2B,EAAKm2B,QAIrDnf,EAAcnX,OAAO6L,OAAO,GAAIuQ,EAAO,CAAC4R,WAAU,IAClD,MACF,IAAK,SACH,GAA0B,UAAvB5R,EAAMmP,aACPpU,EAAcnX,OAAO6L,OAAO,GAAIuQ,EAAO,CACrCmP,aAAc,cACdI,mBAAoB,cAGnB,GAAGvP,EAAMua,cAAc,CAE1B,IAAIpL,EAAe2K,SAAS,IAAI9Z,EAAMua,cAAa,KACnDxf,EAAcnX,OAAO6L,OAAO,GAAIuQ,EAAO,CAACmP,aAAY,SAGpDpU,EAAciF,EAWhB,MACF,QACEjF,EAAciF,EAGlB,OAAOjF,GAQD,SAASyf,gBAAgBN,GAC/B,IAAIO,EAAoB,GAaxB,OAXA,8CAAErkB,KAAK8jB,EAAap1B,QAAQ,SAACkb,EAAOrB,GAClC,IAAG,oBAAoBwB,KAAKxB,GAA5B,CAIA,IAAM5D,EAAckf,eAAetb,EAAWub,GAC3Cnf,IACD0f,EAAa9b,GAAa5D,OAIvB0f,EAwBT,IAAMC,kBAAoB,SAAClS,GACzB,GAAGA,EAASmS,SAAS,CACnB,IAAIt2B,EAAUy1B,SAAS,IAAItR,EAASmS,SAAQ,KAC5C,OAAO/2B,OAAO6L,OAAO,GAAI+Y,EAAU,CAACnkB,QAAO,IAExC,OAAG,8CAAEC,QAAQkkB,EAASnkB,UACzB,8CAAE2G,QAAQwd,EAASnkB,SAAS,SAAS0c,EAAa6Z,GAChD,GAAI,8CAAEt2B,QAAQyc,IAKZ,GAJsB,IAAlBA,EAAOld,QAAgB,8CAAEuD,SAAS2Z,EAAO,KAAqB,aAAdA,EAAO,KACzDA,EAAO,GAAK+Y,SAAS,IAAM/Y,EAAO,GAAK,KACvCA,EAAO8Z,OAEa,IAAlB9Z,EAAOld,QAAgB,8CAAEuD,SAAS2Z,EAAO,KAAqB,SAAdA,EAAO,GAEzD,OADAA,EAAO,GAAK,IAAI8L,KAAK9L,EAAO,IACrBA,EAAO8Z,WAEX,GAAI,8CAAEhS,SAAS9H,GAAgB,CACpC,GAAI,8CAAE3Z,SAAS2Z,GAAUA,EAAO+Z,QAC9B,OAAO/Z,EAAOpb,MAAQm0B,SAAS,IAAM/Y,EAAO+Z,OAAS,KAChD,IAAwB,IAApB/Z,EAAOga,SAChB,OAAOha,EAAOpb,MAAQ,IAAIknB,KAAK9L,EAAOpb,WAIrC6iB,GAGAA,GASH,SAASwS,mBAAmBd,GAClC,IAAIe,EAAuB,GAO3B,OANA,8CAAE7kB,KAAK8jB,EAAazR,YAAY,SAACD,EAAUD,GACzC,IAAM2S,EAAiBR,kBAAkBlS,GACtC0S,IACDD,EAAgB1S,GAAY2S,MAGzBD,EAQD,SAASE,oBAAoBjB,GACnCA,EAAap1B,OAAS01B,gBAAgBN,GAEtCA,EAAazR,WAAauS,mBAAmBd,GAIxC,SAASkB,2BAA2B/oB,EAAYyF,GACrD,IAAIujB,EAAev2B,EAcnB,OAbAu2B,EAAgB,GAChBv2B,EAASuN,EAAOvN,OACXgT,GAA4B,GAAjBA,EAAQjU,SACtBiU,EAAU,8CAAEnU,KAAKmB,IAEnB,8CAAEsR,KAAK0B,GAAQ,SAAC8L,GACd,IAAI0X,EAAMC,EACV,GAAGz2B,IACyD,mBAA/B,OAArBw2B,EAAOx2B,EAAO8e,IAAc0X,EAAKzrB,UAAO,IAAqF,YAA/B,OAArB0rB,EAAOz2B,EAAO8e,IAAc2X,EAAK1rB,UAAO,IACrH,OAAOwrB,EAAc54B,KAAKmhB,MAIzByX,EAAcz1B,KAAK,KAGrB,SAAS41B,wBAAwB50B,EAAM6zB,GAW5C,IAAIgB,EAAS70B,GAAQA,EAAKjB,MAyD1B,OAxDG81B,GAAYA,EAAS53B,SACtB+C,EAAKjB,MAAQ81B,EAAS/1B,KAAI,SAACa,GAoDzB,OAnDA,8CAAE6P,KAAK7P,GAAQ,SAACm1B,EAAY33B,GAC1B,GAAG23B,EAAW,CACZ,IAAM3gB,EAAc0f,GAAgBA,EAAa12B,GACjD,GAAGgX,GAAe,CAAC,SAAU,iBAAiB7K,QAAQ6K,EAAYlL,OAAS,GAAKkL,EAAYoU,aAAa,CACvG,IAAIwM,OAAgB,EAOpB,GANG5gB,EAAYoU,eACbwM,EAAiB5gB,EAAYoU,aAC1B,8CAAE9F,WAAWsS,KACdA,EAAmBA,MAGpBA,GAAoBA,EAAiB93B,OAAO,CACzC,8CAAES,QAAQo3B,KACZA,EAAW,CAACA,IAEd,IAAI,EAAiB,EAAI,GAAI,EAAO,GAEpC,8CAAE1wB,QAAQ0wB,GAAW,SAACzwB,GAEpB,GADA,EAAYA,EAAI,kBACD,CACb,IAAMzE,EAAKyE,EAAS,IACdmR,EAAQnR,EAAuB,kBAClCzE,GACD,EAAI/D,KAAK+D,GAER4V,GACD,EAAO3Z,KAAK2Z,OAIf,IACG,8CAAE9X,QAAQq3B,IACZp1B,EAAOxC,GAAK4rB,EAAI,EACb,GAAO,EAAI9rB,SACZ0C,EAAOxC,GAAK2C,IAAM,GAEjB,GAAU,EAAO7C,SAClB0C,EAAOxC,GAAK63B,OAAS,UAEhBr1B,EAAOxC,GAAK,0BACZwC,EAAOxC,GAAK,yBACZwC,EAAOxC,GAAK83B,yBACZt1B,EAAOxC,GAAKwD,KAEnBhB,EAAOxC,GAAOgX,EAAY2H,SAAW,EAAM,EAAI,UAOpDnc,MAGJK,I,gEC/QT,IAAI7E,EAAM,EAAQ,IACFC,EAAU,EAAQ,KAIC,kBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAIK,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAEPN,EAAIC,EAASK,GAI1BF,EAAOG,QAAUN,EAAQO,QAAU,I,iCClBnC,mBAEIC,EAFJ,MAE8B,IAA4B,GAE1DA,EAAwBC,KAAK,CAACN,EAAOC,EAAI,i8BAAk8B,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,uDAAuD,MAAQ,GAAG,SAAW,iTAAiT,eAAiB,CAAC,sqCAAsqC,WAAa,MAE1jF,a,oBCNf,IAAIL,EAAM,EAAQ,IACFC,EAAU,EAAQ,KAIC,kBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAIK,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAEPN,EAAIC,EAASK,GAI1BF,EAAOG,QAAUN,EAAQO,QAAU,I,iCClBnC,mBAEIC,EAFJ,MAE8B,IAA4B,GAE1DA,EAAwBC,KAAK,CAACN,EAAOC,EAAI,qCAAsC,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,8DAA8D,MAAQ,GAAG,SAAW,sBAAsB,eAAiB,CAAC,kPAAkP,WAAa,MAEtd,a,oBCNf,IAAIL,EAAM,EAAQ,IACFC,EAAU,EAAQ,KAIC,kBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAIK,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAEPN,EAAIC,EAASK,GAI1BF,EAAOG,QAAUN,EAAQO,QAAU,I,iCClBnC,mBAEIC,EAFJ,MAE8B,IAA4B,GAE1DA,EAAwBC,KAAK,CAACN,EAAOC,EAAI,4PAA6P,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,+DAA+D,MAAQ,GAAG,SAAW,0DAA0D,eAAiB,CAAC,k3CAAmtC,WAAa,MAEnrD,a,oBCNf,IAAIL,EAAM,EAAQ,IACFC,EAAU,EAAQ,KAIC,kBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAIK,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAEPN,EAAIC,EAASK,GAI1BF,EAAOG,QAAUN,EAAQO,QAAU,I,iCClBnC,mBAEIC,EAFJ,MAE8B,IAA4B,GAE1DA,EAAwBC,KAAK,CAACN,EAAOC,EAAI,oKAAqK,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,8DAA8D,MAAQ,GAAG,SAAW,0EAA0E,eAAiB,CAAC,uKAAuK,WAAa,MAE9jB,a,oBCNf,IAAIL,EAAM,EAAQ,IACFC,EAAU,EAAQ,KAIC,kBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAIK,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAEPN,EAAIC,EAASK,GAI1BF,EAAOG,QAAUN,EAAQO,QAAU,I,iCClBnC,mBAEIC,EAFJ,MAE8B,IAA4B,GAE1DA,EAAwBC,KAAK,CAACN,EAAOC,EAAI,8cAA+c,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,8DAA8D,MAAQ,GAAG,SAAW,gMAAgM,eAAiB,CAAC,ubAAub,WAAa,MAE9uC,c","file":"static/js/main.9133fd1c.chunk.js","sourcesContent":["var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-9-2!./ObjectExpandTable.less\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".object-expand-table .expand-part {\\n  background-color: #f0f0f0;\\n  margin-right: 24px;\\n}\\n.object-expand-table .expand-part .ant-pro-card-body {\\n  padding: 12px;\\n}\\n.object-expand-table .expand-part .ant-pro-card-body .ant-tree {\\n  background-color: #f0f0f0;\\n}\\n.object-expand-table .table-part .ant-card-body {\\n  padding: 0;\\n}\\n.object-expand-table .table-part .ant-table-tbody > tr:last-child > td {\\n  border: none;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://../builder-object/src/components/ObjectExpandTable.less\"],\"names\":[],\"mappings\":\"AAsCA;EAEI,yBAAA;EACA,kBAAA;AAtCJ;AAmCA;EAKM,aAAA;AArCN;AAgCA;EAOQ,yBAAA;AApCR;AA6BA;EAaM,UAAA;AAvCN;AA0BA;EAgBM,YAAA;AAvCN\",\"sourcesContent\":[\"// .object-expand-table {\\n//   > .ant-pro-card-body {\\n//     position: relative;\\n//   }\\n//   .expand-part {\\n//     margin-right: 12px;\\n//     background-color: rgb(240, 240, 240);\\n//     height: 100%;\\n//     overflow-x: hidden;\\n//     display: inlin;\\n//     position: absolute;\\n//     .ant-tree {\\n//       background: transparent;\\n//     }\\n//     .ant-pro-card-body {\\n//       padding: 12px;\\n//       padding-left: 4px;\\n//     }\\n//   }\\n\\n//   .table-part {\\n//     padding-left: 12px;\\n//     margin-left: 30%;\\n//     .ant-pro-table-search {\\n//       margin-bottom: 0;\\n//       padding-left: 0;\\n//       padding-right: 0;\\n//       padding-top: 12px;\\n//     }\\n//     .ant-card-body {\\n//       padding-right: 0;\\n//     }\\n//     .ant-table-tbody > tr:last-child > td {\\n//       border: none;\\n//     }\\n//   }\\n// }\\n\\n.object-expand-table{\\n  .expand-part{\\n    background-color: rgb(240, 240, 240);\\n    margin-right: 24px;\\n    .ant-pro-card-body{\\n      padding: 12px;\\n      .ant-tree{\\n        background-color: rgb(240, 240, 240);\\n      }\\n    }\\n  }\\n  .table-part{\\n    .ant-card-body{\\n      padding: 0;\\n    }\\n    .ant-table-tbody > tr:last-child > td {\\n      border: none;\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-9-2!./lookup.less\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ant-select .ant-select-selection-item {\\n  display: flex;\\n}\\n.ant-select .ant-select-selection-item .anticon-smile {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding-right: 7px;\\n}\\n.ant-select .ant-select-selection-item .ant-select-selection-item-content {\\n  display: flex;\\n}\\n.ant-select-dropdown .rc-virtual-list-holder-inner .ant-select-item-option-content {\\n  display: flex;\\n}\\n.ant-select-dropdown .rc-virtual-list-holder-inner .ant-select-item-option-content .anticon-smile {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  padding-right: 7px;\\n}\\n.ant-select-selector .ant-select-selection-overflow-item .ant-select-selection-item-remove {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n.ant-select-tree .ant-select-tree-list .ant-select-tree-treenode .ant-select-tree-indent-unit {\\n  display: inline-block;\\n  width: 24px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://../builder-object/src/valueTypes/lookup.less\"],\"names\":[],\"mappings\":\"AACA;EAEQ,aAAA;AADR;AADA;EAKY,aAAA;EACA,uBAAA;EACA,mBAAA;EACA,kBAAA;AADZ;AAPA;EAYY,aAAA;AAFZ;AAOA;EAGY,aAAA;AAPZ;AAIA;EAKgB,aAAA;EACA,uBAAA;EACA,mBAAA;EACA,kBAAA;AANhB;AAYA;EAGY,aAAA;EACA,uBAAA;EACA,mBAAA;AAZZ;AAiBA;EAIgB,qBAAA;EACA,WAAA;AAlBhB\",\"sourcesContent\":[\"// 选中的选项附带的icon样式\\n.ant-select {\\n    .ant-select-selection-item{\\n        display: flex;\\n        // 单选\\n        .anticon-smile{\\n            display: flex;\\n            justify-content: center;\\n            align-items: center;\\n            padding-right: 7px;\\n        }\\n        // 多选\\n        .ant-select-selection-item-content{\\n            display: flex;\\n        }\\n    }\\n}\\n// 下拉框中选项附带的icon样式\\n.ant-select-dropdown{\\n    .rc-virtual-list-holder-inner{\\n        .ant-select-item-option-content{\\n            display: flex;\\n            .anticon-smile{\\n                display: flex;\\n                justify-content: center;\\n                align-items: center;\\n                padding-right: 7px;\\n            }\\n        }\\n    }\\n}\\n// 多选时 删除 图标样式调整\\n.ant-select-selector{\\n    .ant-select-selection-overflow-item{\\n        .ant-select-selection-item-remove{\\n            display: flex;\\n            justify-content: center;\\n            align-items: center;\\n        }\\n    }\\n}\\n// 支持的tree下拉框在webapp样式调整\\n.ant-select-tree{\\n    .ant-select-tree-list{\\n        .ant-select-tree-treenode{\\n            .ant-select-tree-indent-unit{\\n                display: inline-block;\\n                width: 24px;\\n            }\\n        }\\n    }\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-9-2!./aggrid.less\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ag-theme-balham {\\n  font-size: 13px;\\n  overflow: scroll;\\n}\\n.ag-theme-balham .ag-root-wrapper {\\n  overflow: visible;\\n}\\n.ag-theme-balham .ag-root-wrapper-body.ag-layout-normal {\\n  height: inherit;\\n}\\n.ag-theme-balham .ag-row {\\n  border-top-style: none;\\n  border-left-style: none;\\n  border-right-style: none;\\n}\\n.ag-theme-balham .ag-row:last-child {\\n  border-bottom-style: none;\\n}\\n.ag-theme-balham .ag-ltr .ag-has-focus .ag-cell-focus:not(.ag-cell-range-selected),\\n.ag-theme-balham .ag-cell-inline-editing.ag-cell-focus {\\n  overflow: visible;\\n  border: none;\\n  background: transparent;\\n}\\n.ag-theme-balham .ag-ltr .ag-has-focus .ag-cell-focus:not(.ag-cell-range-selected) .ag-react-container,\\n.ag-theme-balham .ag-cell-inline-editing.ag-cell-focus .ag-react-container {\\n  min-width: 200px;\\n  overflow: visible;\\n}\\n.ag-theme-balham .ag-popup-editor {\\n  border: none;\\n  box-shadow: none;\\n}\\n.ag-theme-balham .ag-popup-editor .slds-popover--edit .slds-popover__body,\\n.ag-theme-balham .ag-popup-editor .slds-popover_edit .slds-popover__body {\\n  padding: 0.25rem;\\n}\\n.ag-theme-balham .ag-body-viewport {\\n  min-height: 10px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://../builder-object/src/valueTypes/aggrid.less\"],\"names\":[],\"mappings\":\"AAEA;EACE,eAAA;EACA,gBAAA;AADF;AADA;EAKI,iBAAA;AADJ;AAJA;EAQI,eAAA;AADJ;AAPA;EAWI,sBAAA;EACA,uBAAA;EACA,wBAAA;AADJ;AAZA;EAgBI,yBAAA;AADJ;AAfA;;EAoBI,iBAAA;EACA,YAAA;EACA,uBAAA;AADJ;AArBA;;EAwBM,gBAAA;EACA,iBAAA;AACN;AA1BA;EA6BI,YAAA;EACA,gBAAA;AAAJ;AA9BA;;EAgCM,gBAAA;AAEN;AAlCA;EAoCI,gBAAA;AACJ\",\"sourcesContent\":[\"\\n\\n.ag-theme-balham {\\n  font-size: 13px;    \\n  overflow: scroll;\\n  \\n  .ag-root-wrapper{\\n    overflow: visible;\\n  }\\n  .ag-root-wrapper-body.ag-layout-normal {\\n    height: inherit;\\n  }\\n  .ag-row {\\n    border-top-style: none;\\n    border-left-style: none;\\n    border-right-style: none;\\n  }\\n  .ag-row:last-child {\\n    border-bottom-style: none;\\n  }\\n  .ag-ltr .ag-has-focus .ag-cell-focus:not(.ag-cell-range-selected),\\n  .ag-cell-inline-editing.ag-cell-focus {\\n    overflow: visible;\\n    border: none;\\n    background: transparent;\\n    .ag-react-container {\\n      min-width: 200px;\\n      overflow: visible;\\n    }\\n  }\\n  .ag-popup-editor {\\n    border: none;\\n    box-shadow: none;\\n    .slds-popover--edit .slds-popover__body, .slds-popover_edit .slds-popover__body {\\n      padding: 0.25rem;\\n    }\\n  }\\n  .ag-body-viewport {\\n    min-height: 10px;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// const fetch = require('node-fetch');\nconst data = {};\nconst etags = {};\n\nexport default (url:any = null, options:any = {headers: {}}) => {\n    url = url || options.url; // eslint-disable-line no-param-reassign\n\n    if (options.method === 'GET' || !options.method) {\n        const etag = etags[url];\n        const cachedResponse = data[`${url}${etag}`]; // ensure etag is for url\n        if (etag) {\n            options.headers['If-None-Match'] = etag;\n        }\n\n        return fetch(url, options).\n            then((response) => {\n                if (response.status === 304) {\n                    return cachedResponse.clone();\n                }\n\n                if (response.status === 200) {\n                    const responseEtag = response.headers.get('Etag');\n\n                    if (responseEtag) {\n                        data[`${url}${responseEtag}`] = response.clone();\n                        etags[url] = responseEtag;\n                    }\n                }\n\n                return response;\n            });\n    }\n\n    // all other requests go straight to fetch\n    return Reflect.apply(fetch, undefined, [url, options]); //eslint-disable-line no-undefined\n};\n","import {Dictionary} from '../types/utilities';\n\nexport function buildQueryString(parameters: Dictionary<any>): string {\n    const keys = Object.keys(parameters);\n    if (keys.length === 0) {\n        return '';\n    }\n\n    let query = '?';\n    for (let i = 0; i < keys.length; i++) {\n        const key = keys[i];\n        query += key + '=' + encodeURIComponent(parameters[key]);\n\n        if (i < keys.length - 1) {\n            query += '&';\n        }\n    }\n\n    return query;\n}","import { formatFiltersToODataQuery } from '@steedos/filters';\nimport { buildQueryString } from './utils/helpers';\nimport { Filters, Fields, Options, Record, ODataQuery } from './types/sobject';\n\nimport _ from 'underscore';\n\nexport default class SObject {\n    client: any;\n    objectName: string;\n    config: any;\n    constructor(client, objectName){\n        this.client = client;\n        this.objectName = objectName;\n    }\n\n    private getFilter(filters: Filters){\n        if(_.isArray(filters)){\n            let userContext: any = {};\n            userContext.userId = this.client.getUserId();\n            userContext.spaceId = this.client.getSpaceId();\n            userContext.user = {}; //TODU:当前用户userSession\n            return formatFiltersToODataQuery(filters, userContext)\n        }\n        return filters;\n    }\n\n    private getSelect(fields){\n        if(_.isArray(fields)){\n            return fields.toString()\n        }\n        return fields;\n    }\n\n    private getQueryParams(filters: Filters, fields: Fields, options: Options){\n        let params: ODataQuery = {};\n        const $filter = this.getFilter(filters);\n        if($filter){\n            params.$filter = $filter\n        }\n        const $select = this.getSelect(fields);\n        if($select){\n            params.$select = $select\n        }\n        // if(options && options.expand){\n        //     params.$expand = options.expand\n        // }\n        if(options){\n            if(options.pageSize){\n                params.$top = options.pageSize;\n            }\n            // current是从1开始的页码索引\n            if(options.current && options.pageSize){\n                params.$skip = (options.current - 1) * options.pageSize;\n            }\n            let sortIsNull:any;\n            if(typeof options.sort === 'string'){\n                sortIsNull=options.sort;\n            }else if(_.isArray(options.sort)){\n                let order = _.map(options.sort,(value)=>{\n                    let order2 = value[1]==='desc' ? value[0] + ' desc' : value[0];\n                    return order2;\n                }).join(\",\")\n                sortIsNull=order;\n            }\n            if(sortIsNull){\n                params.$orderby=sortIsNull;\n            }\n        }\n        return params;\n    }\n\n    async getConfig(){\n        // const url = `${this.client.getBootstrapRoute()}/${this.objectName}`;\n        const url = `${this.client.getUrl()}/service/api/@${this.objectName}/uiSchema`;\n        return await this.client.doFetch(url, {method: 'get'});\n    }\n\n    async getRecordPermissions(recordId){\n        const url = `${this.client.getUrl()}/service/api/@${this.objectName}/recordPermissions/${recordId}`;\n        return await this.client.doFetch(url, {method: 'get'});\n    }\n\n    /**\n     * Find and fetch records which matches given conditions\n     *\n     * @param {String|Array} [filters] - filtering records\n     * @param {String|Array} [fields] - Fields to fetch.\n     * @param {Object} [options] - Query options.\n     * @param {Number} [options.$top] - Maximum number of records the query will return.\n     * @param {Number} [options.$skip] - Synonym of options.offset.\n     * @param {String} [options.$orderby] - sorting.\n     * @param {boolean} [options.$count] - count.\n     * @returns {Promise<Array<Record>>}\n     */\n    async find(filters: Filters, fields: Fields, options: Options){\n        let params = this.getQueryParams(filters, fields, options);\n        let url = this.client.getBaseRoute() + \"/api/v4/\".concat(this.objectName) + buildQueryString(params);\n        let result = await this.client.doFetch(url, {method: 'get'});\n        return result\n    }\n\n    /**\n     * TODO 根据条件查询数据，返回1条($top = 1)。\n     * @param filters \n     * @param fields \n     * @param options \n     * @returns {Promise<Record>}\n     */\n    async findOne(filters: Filters, fields: Fields, options: Options){\n\n    }\n\n    /**\n     * TODO 根据id查询数据。\n     * @param id \n     * @param fields \n     */\n    async record(id: string, fields: Fields){\n        \n    }\n\n    /**\n     * TODO 根据ids查询数据。\n     * @param ids \n     * @param fields \n     */\n    async retrieve(ids: Array<string>, fields: Fields){\n\n    }\n\n    /**\n     * TODO 写入数据，并返回新记录\n     * @param data \n     */\n    async insert(data: Record){\n        let url = `${this.client.getBaseRoute()}/api/v4/${this.objectName}`;\n        let result = await this.client.doFetch(url, {method: 'POST', body: JSON.stringify(data)});\n        return result.value;\n    }\n\n    /**\n     * TODO 根据id，修改记录，并返回新记录\n     * @param id \n     * @param data \n     */\n    async update(id: string, data: Record){\n        let url = `${this.client.getBaseRoute()}/api/v4/${this.objectName}/${id}`;\n        let result = await this.client.doFetch(url, {method: 'put', body: JSON.stringify(data)});\n        return result.value;\n    }\n\n    /**\n     * TODO 根据id, 删除记录\n     * @param id \n     */\n    async delete(id: string){\n        let url = `${this.client.getBaseRoute()}/api/v4/${this.objectName}/${id}`;\n        let result = await this.client.doFetch(url, {method: 'delete'});\n        return result\n    }\n\n    /**\n     * TODO 返回满足条件的记录数\n     * @param filters \n     */\n    async count(filters: Filters){\n\n    }\n\n    // 预留\n    // recent(){}\n}","import _ from 'underscore';\n\nexport default class Graphql {\n    client: any;\n    constructor(client){\n        this.client = client;\n    }\n\n    async query(query: string){\n        let url = this.client.getBaseRoute() + \"/graphql\";\n        let body = {\n            query: query\n        };\n        return await this.client.doFetch(url, {method: 'POST', body: JSON.stringify(body)});\n    }\n\n    async insert(objectName: string, data){\n        let url = this.client.getBaseRoute() + \"/graphql\";\n        let _data = data;\n        if(!_.isString(_data)){\n            _data = JSON.stringify(data)\n        }\n        let body = {\n            query: `mutation {\n                ${objectName}__insert(data:${_data})\n            }`\n        };\n        console.log('insert body', body);\n        return await this.client.doFetch(url, {method: 'POST', body: JSON.stringify(body)});\n    }\n\n    async update(objectName: string, _id: string, data){\n        let url = this.client.getBaseRoute() + \"/graphql\";\n        let _data = data;\n        if(!_.isString(_data)){\n            _data = JSON.stringify(data)\n        }\n        let body = {\n            query: `mutation {\n                ${objectName}__update(_id:\"${_id}\", data:${_data})\n            }`\n        };\n        return await this.client.doFetch(url, {method: 'POST', body: JSON.stringify(body)});\n    }\n\n    async delete(objectName: string, _id: string){\n        let url = this.client.getBaseRoute() + \"/graphql\";\n        let body = {\n            query: `mutation {\n                ${objectName}__delete(_id:\"${_id}\")\n            }`\n        };\n        return await this.client.doFetch(url, {method: 'POST', body: JSON.stringify(body)});\n    }\n\n\n}","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport fetch from './fetch_etag';\nimport {cleanUrlForLogging} from './utils/sentry';\nimport { Options, ClientResponse } from './types/client4';\nimport {buildQueryString} from './utils/helpers';\nimport { UserProfile } from './types/users';\nimport { ServerError } from './types/errors';\nimport { Space } from './types/spaces';\nimport SObject from './sobject';\nimport Graphql from './graphql';\n\nconst HEADER_AUTH = 'Authorization';\nconst HEADER_BEARER = 'Bearer';\nconst HEADER_REQUESTED_WITH = 'X-Requested-With';\nconst HEADER_USER_AGENT = 'User-Agent';\nconst HEADER_X_CLUSTER_ID = 'X-Cluster-Id';\nconst HEADER_X_CSRF_TOKEN = 'X-CSRF-Token';\nexport const HEADER_X_VERSION_ID = 'X-Version-Id';\nconst PER_PAGE_DEFAULT = 60;\nconst LOGS_PER_PAGE_DEFAULT = 10000;\nexport const DEFAULT_LIMIT_BEFORE = 30;\nexport const DEFAULT_LIMIT_AFTER = 30;\n\nconst DEFAULT_LOGIN_EXPIRATION_DAYS = 90;\nconst LOGIN_UNEXPIRING_TOKEN_DAYS = 365 * 100;\n\nexport default class SteedosClient {\n    LOGIN_TOKEN_KEY = \"Meteor.loginToken\";\n    LOGIN_TOKEN_EXPIRES_KEY = \"Meteor.loginTokenExpires\";\n    USER_ID_KEY = \"Meteor.userId\";\n    logToConsole = false;\n    _lastLoginTokenWhenPolled= null;\n    loginExpirationInDays = null;\n    serverVersion = '';\n    clusterId = '';\n    token = '';\n    spaceId = '';\n    authToken = '';\n    csrf = '';\n    url = (process.env.NODE_ENV == 'development' && process.env.REACT_APP_API_URL)? process.env.REACT_APP_API_URL as string : '';\n    urlVersion = '';\n    userAgent: string|null = null;\n    enableLogging = false;\n    defaultHeaders: {[x: string]: string} = {\n        'Content-Type': 'application/json'\n    };\n    userId = '';\n    diagnosticId = '';\n    includeCookies = true;\n    isRudderKeySet = false;\n    translations = {\n        connectionError: 'There appears to be a problem with your internet connection.',\n        unknownError: 'We received an unexpected status code from the server.',\n    };\n    userRoles?: string;\n\n    sobjects = {};\n    graphql = new Graphql(this);\n    \n    getUrl() {\n        if(!this.url){\n            var href = new URL(window.location.href);\n            var foo = href.pathname.split('/accounts');\n            var ROOT_URL_PATH_PREFIX = '';\n            if(foo.length > 1){\n                ROOT_URL_PATH_PREFIX = foo[0];\n            }\n            return ROOT_URL_PATH_PREFIX;\n        }\n        return this.url;\n    }\n\n    getAbsoluteUrl(baseUrl: string) {\n        if (typeof baseUrl !== 'string' || !baseUrl.startsWith('/')) {\n            return baseUrl;\n        }\n        return this.getUrl() + baseUrl;\n    }\n\n    setUrl(url: string) {\n        this.url = url;\n    }\n\n    setUserAgent(userAgent: string) {\n        this.userAgent = userAgent;\n    }\n\n    getToken() {\n        return this.token;\n    }\n\n    setToken(token: string) {\n        this.token = token;\n    }\n\n    getUserId(){\n        return this.userId;\n    }\n\n    getSpaceId(){\n        return this.spaceId;\n    }\n\n    setSpaceId(spaceId){\n        this.spaceId = spaceId;\n    }\n\n    getAuthToken(){\n        if (this.getSpaceId() && this.getToken())\n            return this.getSpaceId() + ',' + this.getToken();\n        else\n            return this.getToken();\n    }\n\n    setCSRF(csrfToken: string) {\n        this.csrf = csrfToken;\n    }\n\n    setAcceptLanguage(locale: string) {\n        this.defaultHeaders['Accept-Language'] = locale;\n    }\n\n    setEnableLogging(enable: boolean) {\n        this.enableLogging = enable;\n    }\n\n    setIncludeCookies(include: boolean) {\n        this.includeCookies = include;\n    }\n\n    setUserId(userId: string) {\n        this.userId = userId;\n    }\n\n    setUserRoles(roles: string) {\n        this.userRoles = roles;\n    }\n\n    setDiagnosticId(diagnosticId: string) {\n        this.diagnosticId = diagnosticId;\n    }\n\n    enableRudderEvents() {\n        this.isRudderKeySet = true;\n    }\n\n    getServerVersion() {\n        return this.serverVersion;\n    }\n\n    getUrlVersion() {\n        return this.urlVersion;\n    }\n\n    getBaseRoute() {\n        return `${this.getUrl()}${this.urlVersion}`;\n    }\n\n    getAccountsRoute() {\n        return `${this.getBaseRoute()}/accounts`;\n    }\n\n    getBootstrapRoute() {\n        return `${this.getUrl()}/api/bootstrap/${this.getSpaceId()}`;\n    }\n\n    getCSRFFromCookie() {\n        if (typeof document !== 'undefined' && typeof document.cookie !== 'undefined') {\n            const cookies = document.cookie.split(';');\n            for (let i = 0; i < cookies.length; i++) {\n                const cookie = cookies[i].trim();\n                if (cookie.startsWith('MMCSRF=')) {\n                    return cookie.replace('MMCSRF=', '');\n                }\n            }\n        }\n        return '';\n    }\n\n    getOptions(options: Options) {\n        const newOptions: Options = {...options};\n\n        const headers: {[x: string]: string} = {\n            [HEADER_REQUESTED_WITH]: 'XMLHttpRequest',\n            ...this.defaultHeaders,\n        };\n\n        if (this.getAuthToken()) {\n            headers[HEADER_AUTH] = `${HEADER_BEARER} ${this.getAuthToken()}`;\n        }\n\n        const csrfToken = this.csrf || this.getCSRFFromCookie();\n        if (options.method && options.method.toLowerCase() !== 'get' && csrfToken) {\n            headers[HEADER_X_CSRF_TOKEN] = csrfToken;\n        }\n\n        if (this.includeCookies) {\n            newOptions.credentials = 'include';\n        }\n\n        if (this.userAgent) {\n            headers[HEADER_USER_AGENT] = this.userAgent;\n        }\n\n        if (newOptions.headers) {\n            Object.assign(headers, newOptions.headers);\n        }\n\n        return {\n            ...newOptions,\n            headers,\n        };\n    }\n\n    getTranslations = (url: string) => {\n        return this.doFetch<Record<string, string>>(\n            url,\n            {method: 'get'},\n        );\n    }\n\n\n    logClientError = (message: string, level = 'ERROR') => {\n        // const url = `${this.getBaseRoute()}/logs`;\n\n        // if (!this.enableLogging) {\n        //     throw new ClientError(this.getUrl(), {\n        //         message: 'Logging disabled.',\n        //         url,\n        //     });\n        // }\n\n        // return this.doFetch<{\n        //     message: string;\n        // }>(\n        //     url,\n        //     {method: 'post', body: JSON.stringify({message, level})},\n        // );\n    };\n\n    login = (user: string | object, password: string, token = '', deviceId = '') => {\n        this.trackEvent('api', 'api_users_login');\n\n        const body: any = {\n            device_id: deviceId,\n            user,\n            password,\n            token,\n            locale: \"zh-cn\"\n        };\n\n        return this.doFetch<UserProfile>(\n            `${this.getAccountsRoute()}/password/login`,\n            {method: 'POST', body: JSON.stringify(body)},\n        );\n\n    };\n\n\n    createUser = (user: UserProfile, token: string, inviteId: string, redirect: string) => {\n        this.trackEvent('api', 'api_users_createUser');\n\n        const queryParams: any = {};\n\n        if (token) {\n            queryParams.t = token;\n        }\n\n        if (inviteId) {\n            queryParams.iid = inviteId;\n        }\n\n        if (redirect) {\n            queryParams.r = redirect;\n        }\n\n        const auth:any = this.doFetch<UserProfile>(\n            `${this.getAccountsRoute()}/password/register${buildQueryString(queryParams)}`,\n            {method: 'POST', body: JSON.stringify(user)},\n        );\n\n        return auth\n    };\n\n    createSpace = (name: string) => {\n        this.trackEvent('api', 'api_users_createTenant');\n\n        const queryParams: any = {};\n\n        const auth:any = this.doFetch<UserProfile>(\n            `${this.getBaseRoute()}/api/v4/spaces/register/tenant${buildQueryString(queryParams)}`,\n            {method: 'POST', body: JSON.stringify({name: name})},\n        );\n\n        return auth\n    };\n\n    sendVerificationToken = (user: string) => {\n        this.trackEvent('api', 'api_users_verify');\n\n        const body: any = {\n            user: user,\n        };\n\n        return this.doFetch<UserProfile>(\n            `${this.getAccountsRoute()}/password/sendVerificationCode`,\n            {method: 'POST', body: JSON.stringify(body)},\n        );\n    };\n\n    getSettings = () => {\n        return this.doFetch<UserProfile>(\n            `${this.getAccountsRoute()}/settings`,\n            {method: 'get'},\n        );\n    };\n\n    getMe = () => {\n        return this.doFetch<UserProfile>(\n            `${this.getAccountsRoute()}/user`,\n            {method: 'get'},\n        );\n    };\n\n    getMySpaces = () => {\n        return this.doFetch<Space[]>(\n            `${this.getAccountsRoute()}/user/spaces`,\n            {method: 'get'},\n        );\n    };\n\n    logout = async () => {\n        this.trackEvent('api', 'api_users_logout');\n\n        const {response} = await this.doFetchWithResponse(\n            `${this.getAccountsRoute()}/logout`,\n            {method: 'post'},\n        );\n\n        if (response.ok) {\n            this.token = '';\n        }\n\n        this.serverVersion = '';\n        \n        return response;\n    };\n\n    // Client Helpers\n\n    doFetch = async <T>(url: string, options: Options): Promise<T> => {\n        const {data} = await this.doFetchWithResponse<T>(url, options);\n\n        return data;\n    };\n\n    doFetchWithResponse = async <T>(url: string, options: Options): Promise<ClientResponse<T>> => {\n        const response = await fetch(url, this.getOptions(options));\n        const headers = parseAndMergeNestedHeaders(response.headers);\n\n        let data;\n        try {\n            data = await response.json();\n        } catch (err) {\n            throw new ClientError(this.getUrl(), {\n                message: 'Received invalid response from the server.',\n                intl: {\n                    id: 'mobile.request.invalid_response',\n                    defaultMessage: 'Received invalid response from the server.',\n                },\n                url,\n            });\n        }\n\n        if (headers.has(HEADER_X_VERSION_ID) && !headers.get('Cache-Control')) {\n            const serverVersion = headers.get(HEADER_X_VERSION_ID);\n            if (serverVersion && this.serverVersion !== serverVersion) {\n                this.serverVersion = serverVersion as string;\n            }\n        }\n\n        if (headers.has(HEADER_X_CLUSTER_ID)) {\n            const clusterId = headers.get(HEADER_X_CLUSTER_ID);\n            if (clusterId && this.clusterId !== clusterId) {\n                this.clusterId = clusterId as string;\n            }\n        }\n\n        if (response.ok) {\n            return {\n                response,\n                headers: headers as Map<string, string>,\n                data,\n            };\n        }\n\n    \n        const error = data && data.error ? data.error : data\n        const msg = error.message || '';\n\n        if (this.logToConsole) {\n            console.error(msg); // eslint-disable-line no-console\n        }\n\n        throw new ClientError(this.getUrl(), {\n            message: msg,\n            server_error_id: data.id,\n            status_code: error.code,\n            url,\n        });\n    };\n\n    trackEvent(category: string, event: string, props?: any) {\n        if (!this.isRudderKeySet) {\n            return;\n        }\n\n        const properties = Object.assign({\n            category,\n            type: event,\n            // user_actual_role: this.userRoles && isSystemAdmin(this.userRoles) ? 'system_admin, system_user' : 'system_user',\n            user_actual_id: this.userId,\n        }, props);\n        const options = {\n            context: {\n                ip: '0.0.0.0',\n            },\n            page: {\n                path: '',\n                referrer: '',\n                search: '',\n                title: '',\n                url: '',\n            },\n            anonymousId: '00000000000000000000000000',\n        };\n\n        // rudderAnalytics.track('event', properties, options);\n    }\n\n    changePassword = (oldPassword: string, newPassword: string)=>{\n        return this.doFetch<UserProfile>(\n            `${this.getAccountsRoute()}/password/changePassword`,\n            {method: 'POST', body: JSON.stringify({\n                oldPassword: oldPassword,\n                newPassword: newPassword,\n            })},\n        );\n    }\n\n    verifyEmail = (email: string, code: string)=>{\n        return this.doFetch<UserProfile>(\n            `${this.getAccountsRoute()}/password/verify/email`,\n            {method: 'POST', body: JSON.stringify({\n                email: email,\n                code: code,\n            })},\n        );\n    }\n\n    verifyMobile = (mobile: string, code: string)=>{\n        return this.doFetch<UserProfile>(\n            `${this.getAccountsRoute()}/password/verify/mobile`,\n            {method: 'POST', body: JSON.stringify({\n                mobile: mobile,\n                code: code,\n            })},\n        );\n    }\n\n    sobject = function(objectName) {\n        this.sobjects = this.sobjects || {};\n        var sobject = this.sobjects[objectName] = this.sobjects[objectName] || new SObject(this, objectName);\n        return sobject;\n    };\n\n    // graphql = function(){\n    //     if(!this._graphql){\n    //         this._graphql = new Graphql(this);\n    //     }\n    //     return this._graphql;\n    // }\n\n    // _initLocalStorage(ROOT_URL_PATH_PREFIX){\n    //     if (ROOT_URL_PATH_PREFIX) {\n    //         let namespace = `:${ROOT_URL_PATH_PREFIX}`;\n    //         this.LOGIN_TOKEN_KEY += namespace;\n    //         this.LOGIN_TOKEN_EXPIRES_KEY += namespace;\n    //         this.USER_ID_KEY += namespace;\n    //       }\n    // }\n\n    // _getTokenLifetimeMs() {\n    //     const loginExpirationInDays = (this.loginExpirationInDays === null) ? LOGIN_UNEXPIRING_TOKEN_DAYS : this.loginExpirationInDays;\n    //     return (loginExpirationInDays || DEFAULT_LOGIN_EXPIRATION_DAYS) * 24 * 60 * 60 * 1000;\n    // }\n\n    // _tokenExpiration(when) {\n    //     return new Date((new Date(when)).getTime() + this._getTokenLifetimeMs());\n    // }\n    \n    // _storeLoginToken(userId, token, tokenExpires) {\n    //     localStorage.setItem(this.USER_ID_KEY, userId);\n    //     localStorage.setItem(this.LOGIN_TOKEN_KEY, token);\n    //     if (! tokenExpires)\n    //       tokenExpires = this._tokenExpiration(new Date());\n    //       localStorage.setItem(this.LOGIN_TOKEN_EXPIRES_KEY, tokenExpires);\n    \n    //     this._lastLoginTokenWhenPolled = token;\n    //   };\n    \n    // _unstoreLoginToken() {\n    //     localStorage.removeItem(this.USER_ID_KEY);\n    //     localStorage.removeItem(this.LOGIN_TOKEN_KEY);\n    //     localStorage.removeItem(this.LOGIN_TOKEN_EXPIRES_KEY);\n\n    //     this._lastLoginTokenWhenPolled = null;\n    // };\n}\n\nfunction parseAndMergeNestedHeaders(originalHeaders: any) {\n    const headers = new Map();\n    let nestedHeaders = new Map();\n    originalHeaders.forEach((val: string, key: string) => {\n        const capitalizedKey = key.replace(/\\b[a-z]/g, (l) => l.toUpperCase());\n        let realVal = val;\n        if (val && val.match(/\\n\\S+:\\s\\S+/)) {\n            const nestedHeaderStrings = val.split('\\n');\n            realVal = nestedHeaderStrings.shift() as string;\n            const moreNestedHeaders = new Map(\n                nestedHeaderStrings.map((h: any) => h.split(/:\\s/)),\n            );\n            nestedHeaders = new Map([...nestedHeaders, ...moreNestedHeaders]);\n        }\n        headers.set(capitalizedKey, realVal);\n    });\n    return new Map([...headers, ...nestedHeaders]);\n}\n\nexport class ClientError extends Error implements ServerError {\n    url?: string;\n    intl?: {\n        id: string;\n        defaultMessage: string;\n        values?: any;\n    };\n    server_error_id?: string;\n    status_code?: number;\n\n    constructor(baseUrl: string, data: ServerError) {\n        super(data.message + ': ' + cleanUrlForLogging(baseUrl, data.url || ''));\n\n        this.message = data.message;\n        this.url = data.url;\n        this.intl = data.intl;\n        this.server_error_id = data.server_error_id;\n        this.status_code = data.status_code;\n\n        // Ensure message is treated as a property of this class when object spreading. Without this,\n        // copying the object by using `{...error}` would not include the message.\n        Object.defineProperty(this, 'message', {enumerable: true});\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n// @flow\n\n// Given a URL from an API request, return a URL that has any parts removed that are either sensitive or that would\n// prevent properly grouping the messages in Sentry.\nexport function cleanUrlForLogging(baseUrl, apiUrl) {\n    let url = apiUrl;\n\n    // Trim the host name\n    url = url.substring(baseUrl.length);\n\n    // Filter the query string\n    const index = url.indexOf('?');\n    if (index !== -1) {\n        url = url.substring(0, index);\n    }\n\n    // A non-exhaustive whitelist to exclude parts of the URL that are unimportant (eg IDs) or may be sentsitive\n    // (eg email addresses). We prefer filtering out fields that aren't recognized because there should generally\n    // be enough left over for debugging.\n    //\n    // Note that new API routes don't need to be added here since this shouldn't be happening for newly added routes.\n    const whitelist = [\n        'api', 'v4', 'users', 'teams', 'scheme', 'name', 'members', 'channels', 'posts', 'reactions', 'commands',\n        'files', 'preferences', 'hooks', 'incoming', 'outgoing', 'oauth', 'apps', 'emoji', 'brand', 'image',\n        'data_retention', 'jobs', 'plugins', 'roles', 'system', 'timezones', 'schemes', 'redirect_location', 'patch',\n        'mfa', 'password', 'reset', 'send', 'active', 'verify', 'terms_of_service', 'login', 'logout', 'ids',\n        'usernames', 'me', 'username', 'email', 'default', 'sessions', 'revoke', 'all', 'audits', 'device', 'status',\n        'search', 'switch', 'authorized', 'authorize', 'deauthorize', 'tokens', 'disable', 'enable', 'exists', 'unread',\n        'invite', 'batch', 'stats', 'import', 'schemeRoles', 'direct', 'group', 'convert', 'view', 'search_autocomplete',\n        'thread', 'info', 'flagged', 'pinned', 'pin', 'unpin', 'opengraph', 'actions', 'thumbnail', 'preview', 'link',\n        'delete', 'logs', 'ping', 'config', 'client', 'license', 'websocket', 'webrtc', 'token', 'regen_token',\n        'autocomplete', 'execute', 'regen_secret', 'policy', 'type', 'cancel', 'reload', 'environment', 's3_test', 'file',\n        'caches', 'invalidate', 'database', 'recycle', 'compliance', 'reports', 'cluster', 'ldap', 'test', 'sync', 'saml',\n        'certificate', 'public', 'private', 'idp', 'elasticsearch', 'purge_indexes', 'analytics', 'old', 'webapp', 'fake',\n    ];\n\n    url = url.split('/').map((part) => {\n        if (part !== '' && whitelist.indexOf(part) === -1) {\n            return '<filtered>';\n        }\n\n        return part;\n    }).join('/');\n\n    if (index !== -1) {\n        // Add this on afterwards since it wouldn't pass the whitelist\n        url += '?<filtered>';\n    }\n\n    return url;\n}\n","import { destroy, flow, types } from 'mobx-state-tree';\nimport { get } from 'lodash';\n\nconst isProd = process.env.NODE_ENV === 'production';\nlet rootUrl = isProd ? '/' : process.env.REACT_APP_API_URL? process.env.REACT_APP_API_URL: 'http://localhost:5000';\nlet env: any = process.env;\nlet tenantId = localStorage.getItem('steedos:spaceId');\nlet userId = localStorage.getItem('steedos:userId');\nlet authToken = localStorage.getItem('steedos:token');\nlet locale = 'zh_CN';\n\nlet config = get(window, 'steedos.setting', {});\nrootUrl = config.rootUrl || rootUrl;\ntenantId = config.tenantId || tenantId;\nuserId = config.userId || userId;\nauthToken = config.authToken || authToken;\nlocale = config.locale || locale;\nenv = config.env || env;\n\nexport const Settings = types\n.model('Settings', {\n  isProd,\n  rootUrl,\n  tenantId: types.maybeNull(types.string),\n  userId: types.maybeNull(types.string),\n  authToken: types.maybeNull(types.string),\n  locale: types.maybeNull(types.string),\n  currentObjectApiName: types.maybeNull(types.string),\n  currentRecordId: types.maybeNull(types.string),\n  env: types.frozen(),\n})\n.actions(self => {\n  return {\n    setRootUrl: (rootUrl) => {\n        self.rootUrl = rootUrl\n    },\n    setTenantId: (tenantId) => {\n        self.tenantId = tenantId\n        if (tenantId)\n          localStorage.setItem('steedos:spaceId', tenantId);\n        else \n          localStorage.removeItem('steedos:spaceId')\n    },\n    setUserId: (userId) => {\n        self.userId = userId\n        if (userId)\n          localStorage.setItem('steedos:userId', userId);\n          else \n            localStorage.removeItem('steedos:userId')\n    },\n    setAuthToken: (authToken) => {\n        self.authToken = authToken\n        if (authToken)\n          localStorage.setItem('steedos:token', authToken);\n        else \n          localStorage.removeItem('steedos:token')\n    },\n    setLocale(locale){\n        self.locale = locale\n    },\n    setCurrentObjectApiName(name: string) {\n      self.currentObjectApiName = name;\n    },\n    setCurrentRecordId(id: string) {\n      self.currentRecordId = id;\n    },\n  }\n})\n.create({\n  rootUrl,\n  tenantId,\n  userId,\n  authToken,\n  locale,\n  env,\n});\n\n","\n\nimport { types, Instance, onSnapshot } from \"mobx-state-tree\";\n\nimport { SteedosClient } from '@steedos/builder-sdk';\nimport { convertObjectSchema } from './utils';\nimport { Settings } from './Settings';\nimport _ from 'lodash';\nconst client = new SteedosClient();\n\nclient.setUrl(Settings.rootUrl)\nclient.setUserId(Settings.userId)\nclient.setToken(Settings.authToken);\nclient.setSpaceId(Settings.tenantId);\n\nonSnapshot(Settings, () => {\n  client.setUrl(Settings.rootUrl)\n  client.setUserId(Settings.userId)\n  client.setToken(Settings.authToken);\n  client.setSpaceId(Settings.tenantId);\n})\n\n\n\nconst requestObject = async (objectApiName: string) => {\n  //TODO 通过接口获取对象信息 /api/bootstrap/:spaceId/:objectName\n  if (!objectApiName) {\n    return;\n  }\n  const object = await client.sobject(objectApiName).getConfig();\n  \n  // TODO： 转换 object, grid 类型字段，生成 subFields 属性\n  convertObjectSchema(object);\n  return object;\n}\n\nconst requestRecordPermissions = async (objectApiName: string, recordId: string) => {\n  if (!objectApiName || !recordId) {\n    return;\n  }\n  return await client.sobject(objectApiName).getRecordPermissions(recordId);\n}\n\nconst requestRecords = async (objectApiName: string, filters: any, fields: any, options?: any) => {\n  const records = await client.sobject(objectApiName).find(filters, fields, options);\n  return records;\n}\n\nconst updateRecord = async (objectApiName: string, objectRecordId: string, data: any) => {\n  const result = await client.sobject(objectApiName).update(objectRecordId, data);\n\n  return result;\n}\n\nconst insertRecord = async (objectApiName: string, data: any) => {\n  const result = await client.sobject(objectApiName).insert(data);\n  return result;\n}\n\nconst deleteRecord = async (objectApiName: string, objectRecordId: string) => {\n  const result = await client.sobject(objectApiName).delete(objectRecordId);\n\n  return result;\n}\n\nexport const API = {\n  client,\n  requestObject,\n  requestRecordPermissions,\n  requestRecords,\n  updateRecord,\n  insertRecord,\n  deleteRecord,\n}\n","import { types } from \"mobx-state-tree\";\n\nexport const FormFieldModel = types.model({\n  id: types.identifier,\n  name: types.string,\n  required: types.boolean,\n  readonly: types.boolean,\n})\n\nexport const FormModel = types.model({\n  id: types.identifier,\n  // objectApiName: types.string,\n  // fields: types.array(FormFieldModel),\n  mode: types.union(types.string, types.undefined), // 'read' | 'edit'\n  value: types.frozen(),\n}).actions(self => ({\n  // note the `({`, we are returning an object literal\n  setMode(newMode: string) {\n    self.mode = newMode\n  },\n  setValue(value) {\n    self.value = value;\n  }\n}))\n\nexport const Forms = types.model({\n  items: types.optional(types.map(FormModel), {})\n})\n.actions((self) => {\n  const loadById = (id: string)=>{\n    if (!id)\n      return null;\n    const form = self.items.get(id) \n    if (form) {\n      return form\n    }\n    const newForm = FormModel.create({\n      id,\n      mode: 'read'\n    })\n    self.items.put(newForm);\n    return newForm\n  }\n  return {\n    loadById,\n  }\n}).create()\n","import { values } from \"mobx\"\nimport { types, getParent, flow } from \"mobx-state-tree\"\nimport { API } from './API';\nimport { getObjectOdataExpandFields ,convertRecordsForLookup} from './utils/index'\n\nexport const RecordCache = types.model({\n  id: types.identifier, //记录ID\n  objectApiName: types.string,\n  fields: types.array(types.string),\n  data: types.frozen(),\n  permissions: types.frozen(),\n  isLoading: true,\n})\n.actions((self) => {\n\n  const loadRecord = flow(function* loadRecord() {\n    try {\n      const filters = ['_id', '=', self.id]\n      // const object = Objects.getObject(self.objectApiName);\n      // const objectSchema = object.schema;\n      // const expand = getObjectOdataExpandFields(objectSchema, self.fields)\n      // 添加 expand 参数\n      // const dataResult = yield API.requestRecords(self.objectApiName, filters, self.fields, {expand})\n      // lookup组件reference_to是否是数组 的初始化值 的转换。\n      // self.data = convertRecordsForLookup(dataResult, objectSchema.fields)\n      self.data = yield API.requestRecords(self.objectApiName, filters, self.fields)\n\n      self.permissions = yield API.requestRecordPermissions(self.objectApiName, self.id);\n      self.isLoading = false\n    } catch (err) {\n      console.error(`Failed to load record ${self.id} `, err)\n    }\n  });\n\n  const deleteRecord = flow(function* deleteRecord() {\n    try {\n      return yield API.deleteRecord(self.objectApiName, self.id);\n      self.isLoading = false\n    } catch (err) {\n      console.error(`Failed to delete record ${self.id} `, err)\n    }\n  });\n\n  return {\n    loadRecord,\n    deleteRecord\n  }\n});\n\nexport const RecordListCache = types.model({\n  id: types.identifier, //请求的filters, fields\n  objectApiName: types.string,\n  filters: types.string,\n  fields: types.array(types.string),\n  options: types.union(types.string, types.undefined),\n  recordsJson: types.string,\n  isLoading: true,\n})\n.views((self) => ({\n  get data() {\n    if (!self.recordsJson)\n      return null\n    return JSON.parse(self.recordsJson)\n  },\n}))\n.actions((self) => {\n  const loadRecords = flow(function* loadRecords() {\n    try {\n      const filters = JSON.parse(self.filters);\n      const options = self.options ? JSON.parse(self.options) : undefined;\n      const json = yield API.requestRecords(self.objectApiName, filters, self.fields, options)\n      self.recordsJson = JSON.stringify(json)\n      self.isLoading = false\n    } catch (err) {\n      console.error(`Failed to load record ${self.id} `, err)\n    }\n  })\n\n  return {\n    loadRecords,\n  }\n});\n\nexport const ObjectModel = types.model({\n  id: types.identifier, // object_api_name\n  schema: types.frozen(),\n  recordCaches: types.map(RecordCache),\n  recordListCaches: types.map(RecordListCache),\n  isLoading: true\n})\n.actions((self) => {\n\n  const loadObject = flow(function* loadObject() {\n    try {\n      self.schema = yield API.requestObject(self.id)\n      self.isLoading = false\n      const Creator = window.Creator;\n      Creator.Objects[self.id] = self.schema\n      return self\n    } catch (err) {\n      console.error(`Failed to load object ${self.id} `, err)\n    }\n  })\n\n  const getRecord = (recordId: string, fields: string[]) => {\n    if (!recordId)\n      return null;\n    const record = self.recordCaches.get(recordId)\n    if (record)\n      return record\n    const newRecord = RecordCache.create({\n      id: recordId,\n      objectApiName: self.id,\n      fields,\n      data: {},\n      isLoading: true\n    })\n    self.recordCaches.put(newRecord);\n    newRecord.loadRecord();\n    return newRecord\n  }\n\n  const deleteRecord = (recordId: string)=>{\n    if (!recordId){\n      return null;\n    }\n    const record = self.recordCaches.get(recordId)\n    if (record){\n      record.deleteRecord();\n      self.recordCaches.delete(recordId)\n    }\n  }\n\n  const getRecordList = (filters: any, fields: any, options?) => {\n    const stringifyFilters = JSON.stringify(filters);\n    const stringifyFields = JSON.stringify(fields);\n    const stringifyOptions = options ? JSON.stringify(options) : \"\";\n    const recordListId = stringifyFilters;\n    const recordList = self.recordListCaches.get(recordListId)\n    if (recordList)\n      return recordList\n    \n    const newRecordList = RecordListCache.create({\n      id: recordListId,\n      objectApiName: self.id,\n      filters: stringifyFilters,\n      fields,\n      options: stringifyOptions,\n      recordsJson: '',\n      isLoading: true\n    })\n    self.recordListCaches.put(newRecordList);\n    newRecordList.loadRecords();\n    return newRecordList\n  }\n\n  return {\n    loadObject,\n    getRecord,\n    deleteRecord,\n    getRecordList\n  }\n})\n\nexport const Objects = types.model({\n  objects: types.optional(types.map(ObjectModel), {})\n})\n.actions((self) => {\n  const getObject = (objectApiName: string)=>{\n    if (!objectApiName)\n      return null;\n    const object = self.objects.get(objectApiName) \n    if (object) {\n      return object\n    }\n    const newObject = ObjectModel.create({\n      id: objectApiName,\n      schema: {},\n      isLoading: true\n    })\n    self.objects.put(newObject);\n    newObject.loadObject();\n    return newObject\n  }\n  return {\n    getObject,\n  }\n}).create()\n","import { flow, types } from \"mobx-state-tree\";\nimport { API } from './API';\nimport _ from 'lodash';\n\nexport const AppMenuModel = types.model({\n    id: types.identifier,\n    name: types.maybeNull(types.string),\n    path: types.maybeNull(types.string),\n    icon: types.maybeNull(types.string),\n    target: types.maybeNull(types.string),\n    description: types.maybeNull(types.string),\n    children: types.frozen()\n})\n\nexport const Apps = types.model({\n    menus: types.optional(types.map(AppMenuModel), {}),\n    currentAppId: types.maybeNull(types.string),\n    currentApp: types.maybeNull(AppMenuModel),\n}).actions((self) => {\n    const loadMenus = flow(function* loadMenus() {\n        try {\n            const menus = yield API.client.doFetch(API.client.getUrl() + `/service/api/apps/menus`, { method: 'get' });\n            setMenus(menus);\n            return self.menus;\n        } catch (error) {\n            console.error(\"Failed to fetch apps/menus\", error)\n        }\n    })\n    function setMenus(menus) {\n        _.each(menus, function(menu){\n            self.menus.put(menu);\n        })\n    }\n    const getMenus = function () {\n        if (self.menus && self.menus.size) {\n            return self.menus;\n        } else {\n            const menus = loadMenus();\n            return self.menus;\n        }\n    }\n    const getCurrentApp = function(){\n        const menus = getMenus();\n        let app = menus.get(self.currentAppId);\n        if(!app){\n            if(menus.size > 0){\n                app = menus.get(self.currentAppId);\n                if(!app){\n                    app = menus.get(_.keys(menus.toJSON())[0]);\n                }\n              }\n        }\n        return app;\n    }\n    return {\n        getMenus,\n        getCurrentApp,\n        setCurrentAppId: function(appId){\n            self.currentAppId = appId;\n            // self.currentApp = getCurrentApp(self.currentAppId)\n        },\n    }\n}).create()\n","import { flow, types } from \"mobx-state-tree\";\nimport { API } from './API';\nimport { Settings } from \"./Settings\";\n\nexport const User = types.model({\n  me: types.maybeNull(types.frozen()),\n  isLoading: false,\n  isLoginFailed: false,\n})\n.actions(self => {\n  const setMe = (user: any) => {\n    self.me = user;\n  };\n  const goLogin = () => {\n    Settings.setUserId(null)\n    Settings.setAuthToken(null)\n    // window.location.href = `/login`;\n  };\n  const loadMe = flow(function* loadMe() {\n    try {\n      self.isLoading = true;\n      // 获取user信息， 不需要传入 spaceId，否则传错的话会导致可能验证失败\n      API.client.setSpaceId(null);\n      const me = yield API.client.getMe();\n      Settings.setUserId(me._id)\n      if (me.spaces.length>0) {\n        API.client.setSpaceId(me.spaces[0]._id);\n        Settings.setTenantId(me.spaces[0]._id)\n      }\n      setMe(me);\n      self.isLoading = false;\n      self.isLoginFailed = false\n      return me;\n    } catch (error) {\n      self.isLoading = false;\n      self.isLoginFailed = true\n      setMe(null)\n      console.error(\"Failed to fetch userinfo\", error)\n      return null;\n    }\n  });\n  const getMe = () => {\n    if (!self.me && !self.isLoginFailed)\n      loadMe();\n    return self.me\n  }\n  return {\n    loadMe,\n    getMe, \n    login: flow(function* login(userInput, passowrd) {\n      self.isLoading = true;\n      let email = '';\n      let mobile = '';\n      let username = '';\n      if (userInput) {\n          if (userInput.indexOf('@') > 0) {\n              email = userInput;\n          } else if (userInput.length === 11 && new Number(userInput) > 10000000000) {\n              mobile = userInput;\n          } else {\n              username = userInput;\n          }\n      }\n\n      const user = { email: email, mobile: mobile, username: username, spaceId: \"\" }\n\n      try {\n          const data = yield API.client.login(user, passowrd);\n          if (data.token) {\n            API.client.setToken(data.token);\n            Settings.setAuthToken(data.token)\n          }\n          const me = User.loadMe();\n          self.isLoading = false;\n          self.isLoginFailed = false\n          return me\n      } catch (error) {\n        self.isLoading = false;\n        self.isLoginFailed = true\n        console.error(\"Failed to fetch userinfo\", error)\n        goLogin();\n      }\n    }),\n    logout: flow(function* logout() {\n        try {\n            yield API.client.logout();\n            setMe(null)\n            Settings.setUserId(null)\n            Settings.setAuthToken(null)\n            Settings.setTenantId(null)\n            goLogin();\n        } catch (error) {\n            console.error(\"Failed to fetch userinfo\", error)\n            goLogin();\n        }\n    }),\n    afterCreate() {\n      \n    }\n  }\n}).create()","import { flow, types } from \"mobx-state-tree\";\nimport { API } from './API';\nimport _ from 'lodash';\n\n\nexport const QueryModel = types.model({\n    id: types.identifier,\n    isLoading: true,\n    data: types.frozen()\n}).actions((self) => {\n    const loadData = flow(function* loadData(queryId) {\n        try {\n            const results = yield API.client.doFetch(API.client.getUrl() + `/service/api/~packages-@steedos/service-charts/queries/${queryId}/results`, { method: 'post' });\n            let data = {\n                columns: [],\n                rows: results\n            }\n            let columns = [];\n            _.each(results, function(result){\n                columns = _.union(_.concat(columns, _.keys(result))); \n            })\n\n            _.each(columns, function(column){\n                data.columns.push({type: '', name: column})\n            })\n            self.data = data\n            self.isLoading = false\n        } catch (error) {\n            console.error(\"Failed to fetch apps/menus\", error)\n        }\n    })\n    return {\n        loadData\n    }\n})\n\nexport const Queries = types.model({\n    Queries: types.optional(types.map(QueryModel), {})\n}).actions((self) => {\n    return {\n        getData: function(queryId){\n            if(!queryId){\n                return null;\n            }\n            const query = self.Queries.get(queryId);\n            if(query){\n                return query;\n            }\n            const newQuery = QueryModel.create({\n                id: queryId,\n                data: [],\n                isLoading: true\n            })\n            self.Queries.put(newQuery);\n            newQuery.loadData(queryId);\n            return newQuery;\n        },\n    }\n}).create()\n","import { API } from './API';\nimport { Forms } from './Form';\nimport { Objects } from './Object';\nimport { Settings } from './Settings';\nimport { Apps } from './Apps'\nimport { User } from './User'\nimport { Queries } from './Queries';\nconst stores = {\n  Forms,\n  Objects,\n  Settings,\n  API,\n  Apps,\n  User,\n  Queries,\n};\n\n// if (process.env.NODE_ENV !== 'production') {\n  (window as any).stores = stores;\n// }\n\nexport {\n  Forms,\n  Objects,\n  Settings,\n  API,\n  Apps,\n  User,\n  Queries\n}\n\nexport default stores;\n\ndeclare global {\n  interface Window {\n      Creator: any\n  }\n}\n\nwindow.Creator = {};\nwindow.Creator.Objects = {};","import React, { useContext } from 'react';\nimport * as PropTypes from 'prop-types';\n\nimport { Grid, GridItem, Flex, Box } from '@chakra-ui/layout'\nimport { Form as AntForm } from 'antd';\nimport BaseForm from '@ant-design/pro-form/es/BaseForm';\nimport ProForm, {\n  ModalForm,\n  DrawerForm,\n  ProFormText,\n  ProFormDateRangePicker,\n  ProFormSelect,\n} from '@ant-design/pro-form';\nimport { observer } from \"mobx-react-lite\"\nimport _ from 'lodash'\n\nimport { Forms } from '@steedos/builder-store';\n\n// 在 ProForm的基础上扩展属性\n// colSpan: 每一列默认占几栅格，总共12栅格\n// mode: edit, read\n\nexport const Form = observer((props:any) => {\n  const {\n    name: formId = 'default',\n    mode= 'read', \n    layout,\n    children,\n    submitter,\n    isModalForm,\n    isDrawerForm,\n    trigger,\n    ...rest\n  } = props\n\n  const form = Forms.loadById(formId);\n\n  const formItemLayout =\n    layout === 'horizontal'\n      ? {\n          labelAlign: 'left',\n          labelCol: { span: 6 },\n          wrapperCol: { span: 18 },\n        }\n      : null;\n\n  const defSubmitter = form.mode ==='read'? false : {\n    // 配置按钮文本\n    searchConfig: {\n      resetText: '取消',\n      submitText: '提交',\n    },\n    resetButtonProps: {\n      onClick: () => {\n        form.setMode('read')\n      },\n    },\n  }\n\n  let _submitter = false\n  if(form.mode !='read'){\n    _submitter = _.isBoolean(submitter) ? submitter : submitter || defSubmitter;\n  }\n\n  const contentRender = (items:any, submitter:any) => {\n    return (\n      <>\n        {items}\n        {submitter}\n      </>\n    );\n  }\n  const formProps = {\n    name: formId,\n    className: 'builder-form',\n    mode: form.mode, \n    layout,\n    ...formItemLayout,\n    ...rest,\n    submitter: _submitter,\n    trigger,\n    contentRender,\n  }\n\n  let FormComponent = BaseForm;\n  if(isModalForm){\n    FormComponent = ModalForm\n  }\n\n  if(isDrawerForm){\n    FormComponent = DrawerForm\n  }\n\n  return (\n      <FormComponent {...formProps}>\n          {children}\n      </FormComponent>\n  )\n});\n\n\nForm['propTypes'] = {\n  name: PropTypes.string,\n  mode: PropTypes.string,\n  layout: PropTypes.string,\n  initialValues: PropTypes.object,\n};","export const configForm = {\n  name: 'Steedos:Form',\n  image:\n    'https://cdn.builder.io/api/v1/image/assets%2FIsxPKMo2gPRRKeakUztj1D6uqed2%2Fef36d2a846134910b64b88e6d18c5ca5',\n  inputs: [\n    { name: 'name', type: 'string', helperText: '表单名称，会作为表单字段 id 前缀使用' },\n    { name: 'columns', type: 'number', defaultValue: 2 , helperText: '表单列数'},\n    { name: 'layout', type: 'string', defaultValue: 'vertical', enum: ['horizontal', 'vertical', 'inline'], helperText: '表单布局' },\n    { name: 'size', type: 'string', enum: ['small', 'middle', 'large'], defaultValue: 'middle', helperText: '设置字段组件的尺寸' },\n    { name: 'labelAlign', type: 'string', enum: ['left', 'right'], defaultValue: 'right', helperText: 'label 标签的文本对齐方式' },\n    { name: 'initialValues', type: 'code', language: 'javascript', defaultValue: \"({})\", helperText: '表单默认值，只有初始化以及重置时生效。' },\n    { name: 'onValuesChange', type: 'code', language: 'javascript', defaultValue: \"(values) => {  }\", helperText: '字段值更新时触发回调事件' },\n    { name: 'onFinish', type: 'code', language: 'javascript', defaultValue: \"(values) => {  }\", helperText: '提交表单且数据验证成功后回调事件' },\n    { name: 'preserve', type: 'boolean', defaultValue: 'true', helperText: '当字段被删除时保留字段值' },\n    { name: 'submitter', type: 'boolean', defaultValue: 'true', helperText: '提交按钮相关配置' },\n    { name: 'scrollToFirstError', type: 'boolean', defaultValue: 'false', helperText: ' 提交失败自动滚动到第一个错误字段' },\n    {\n      name: 'dateFormatter', type: 'string', enum: ['string', 'number', 'false'],\n      defaultValue: 'string', helperText: '自动格式数据,主要是 moment 的表单'\n    },\n    {\n      name: 'omitNil', type: 'boolean', defaultValue: 'true',\n      helperText: 'ProForm 会自动清空 null 和 undefined 的数数据，如果你约定了 nil 代表某种数据，可以设置为 false 关闭此功能'\n    },\n    {\n      name: 'labelCol', type: 'object', subFields: [\n        { name: 'span', type: 'number' },\n        { name: 'offset', type: 'number' }\n      ], helperText: 'label 标签布局，同 <Col> 组件，设置 span offset 值'\n    },\n\n  ],\n  defaultStyles: {\n    display: 'block',\n    marginTop: '0',\n    paddingBottom: '10px',\n    minHeight: '100px',\n  },\n  canHaveChildren: true\n};\n","import ProField from \"@ant-design/pro-field\";\nimport type { InputProps } from 'antd';\n\nimport React, { useContext, useState } from \"react\";\nimport * as PropTypes from 'prop-types';\nimport { Flex, Box } from \"@chakra-ui/layout\"\nimport { FormContext } from \"antd/es/form/context\";\nimport createField from '@ant-design/pro-form/es/BaseForm/createField'\n\nimport { ProFormItemProps } from \"@ant-design/pro-form/es/interface\";\nimport { Forms } from '@steedos/builder-store';\n\nimport { observer } from \"mobx-react-lite\"\nimport Button from '@salesforce/design-system-react/components/button'; \n\nimport './Field.less'\n\nexport const Field = observer((props: any) => {\n  const context = React.useContext(FormContext);\n  const formId = context.name ? context.name : 'default';\n  const {\n    attributes,\n    // name, \n    // label, \n    // tooltip, \n    // allowClear,\n    // placeholder,\n    // required,\n    readonly,\n    // referenceTo,\n    // disabled,\n    mode: fieldMode,\n    valueType,\n    isWide = false,\n    showInlineIcon = true, //valueType != 'object' && valueType != 'grid',\n    formItemProps = {},\n    // type,\n    // count,\n    // defaultValue,\n    // defaultChecked,\n    // options,\n    ...rest\n  } = props\n\n  const mode = Forms.loadById(formId).mode\n  const formItemPropsMerged = {\n    ...attributes,\n    ...formItemProps,\n    className: `field type-${valueType} mode-${mode}`,\n  }\n\n  // if (valueType == 'object') {\n  //   formItemPropsMerged.style = {gridColumn: 'span 2/span 2'};\n  //   formItemPropsMerged.labelCol = { span: 0 };\n  //   formItemPropsMerged.wrapperCol = { span: 24 };\n  // } else if (valueType == 'grid') {\n  //   formItemPropsMerged.style = {gridColumn: 'span 2/span 2'};\n  //   formItemPropsMerged.labelCol = { span: 0 };\n  //   formItemPropsMerged.wrapperCol = { span: 24 };\n  // } else \n  if (isWide) {\n    formItemPropsMerged.style = {gridColumn: 'span 2/span 2'};\n    if (context.vertical) {\n      formItemPropsMerged.labelCol = { span: 4 };\n      formItemPropsMerged.wrapperCol = { span: 24 };\n    } else {\n      formItemPropsMerged.labelAlign = 'left'\n      formItemPropsMerged.labelCol = { span: 3 };\n      formItemPropsMerged.wrapperCol = { span: 21 };\n    }\n  } else {\n    if (context.vertical) {\n      formItemPropsMerged.labelCol = { span: 4 };\n      formItemPropsMerged.wrapperCol = { span: 24 };\n    } else {\n      formItemPropsMerged.labelAlign = 'left'\n      formItemPropsMerged.labelCol = { span: 6 };\n      formItemPropsMerged.wrapperCol = { span: 18 };\n    }\n\n  }\n\n  const ProFieldWrap = observer((props: any) => {\n\n    const { \n      readonly, \n      mode, \n      fieldSchema,\n      fieldProps,\n      dependFieldValues,proFieldProps: defaultProFieldProps, ...rest } = props\n\n    const proFieldProps = {\n      emptyText: '',\n      fieldProps: Object.assign({}, fieldProps, {\n        field_schema: fieldSchema,\n        depend_field_values: dependFieldValues,\n      }),\n      ...rest\n    }\n\n    if (!readonly && mode === 'edit') {\n      return <ProField mode='edit' {...proFieldProps} />\n\n    }\n\n    const onInlineEdit = () => {\n      Forms.loadById(formId).setMode('edit')\n    };\n    const inlineIconOpacity = 0.4\n    const inlineIcon = readonly ?\n      <Button\n        iconCategory=\"utility\"\n        iconName=\"lock\"\n        iconSize=\"small\"\n        iconVariant=\"container\"\n        iconClassName=\"slds-button__icon slds-button__icon_hint\"\n        variant=\"icon\"/> :\n      <Button\n        iconCategory=\"utility\"\n        iconName=\"edit\"\n        iconSize=\"small\"\n        iconVariant=\"container\"\n        iconClassName=\"slds-button__icon slds-button__icon_hint\"\n        variant=\"icon\"\n        //<EditIcon color='gray.600' opacity={inlineIconOpacity} _groupHover={{ opacity: 1 }}\n        onClick={() => {\n          onInlineEdit()\n        }}\n      />\n\n\n    const containerOptions = {\n    }\n\n    return (\n      <Flex\n        {...containerOptions}\n        role=\"group\"\n        onDoubleClick={() => { if (!readonly) onInlineEdit(); }}\n      >\n        <Box flex=\"1\"><ProField mode='read' {...proFieldProps} /></Box>\n        {showInlineIcon && (<Box width=\"16px\">{inlineIcon}</Box>)}\n      </Flex>\n    )\n  })\n\n  const ProFormField = createField<ProFormItemProps<InputProps>>(\n\n    (props: ProFormItemProps<InputProps>) => {\n      return (\n        <ProFieldWrap valueType={valueType} {...props} mode={mode} readonly={readonly} />\n      )\n    },\n    {\n      valueType,\n    },\n  );\n  return (<ProFormField {...rest} mode={mode} formItemProps={formItemPropsMerged} />)\n})\n\nField['propTypes'] = {\n  name: PropTypes.string,\n  label: PropTypes.string,\n  valueType: PropTypes.string,\n};","import React, { useContext } from 'react';\nimport { Grid, GridItem, Flex, Box } from '@chakra-ui/layout'\nimport { observer } from \"mobx-react-lite\"\nimport useAntdMediaQuery from 'use-media-antd-query';\n\nimport ExpandableSection from '@salesforce/design-system-react/components/expandable-section';\nimport _ from 'lodash';\n\nexport const FieldSection = observer((props: any) => {\n\n  const colSize = useAntdMediaQuery();\n\n  const { \n    attributes, // Builder.io 传过来的参数。\n    title, \n    titleHidden = false,\n    columns = (colSize === 'sm' || colSize === 'xs')? 1: 2, //(colSize === 'xl')? 3: (colSize === 'xxl')? 4: 2, \n    children \n  } = props\n  \n  const boxOptions = {\n    templateColumns: [`repeat(1, 1fr)`, `repeat(${columns}, 1fr)`],\n    gap: '0rem 2rem',\n  }\n  \n  const renderChildren = (children:any) => {\n    const result: any[] = []\n    _.forEach(children, (child:any) => {\n      result.push(child)\n      return child\n    })\n    return (result)\n  }\n\n  if (titleHidden) \n    return (\n      <Grid {...boxOptions}>\n        {children}\n      </Grid>\n    )\n  else\n    return (\n      <ExpandableSection\n        id=\"default-expandable-section\"\n        title={title}\n      >\n        <Grid {...boxOptions}>\n          {children}\n        </Grid>\n      </ExpandableSection>\n  )\n})","export const configFieldObject = {\n  name: 'Steedos:FieldObject',\n  image:\n    'https://cdn.builder.io/api/v1/image/assets%2FIsxPKMo2gPRRKeakUztj1D6uqed2%2F682efef23ace49afac61748dd305c70a',\n  inputs: [\n    { name: 'name', type: 'text', defaultValue: 'object'},\n    { name: 'label', type: 'text', defaultValue: 'Object'},\n  ],\n  defaultStyles: {\n    display: 'block',\n    minHeight: '50px',\n    marginTop: '0',\n  },\n  noWrap: false,\n  canHaveChildren: true,\n  // requiresParent: {\n  //   message: 'This block must be inside a \"Form\" block',\n  //   query: {\n  //     'component.name': { $in: ['@steedos/builder-form:Form'] }\n  //   }\n  // }\n};\n","\nimport React from \"react\";\n\nexport const FormContext = React.createContext<any>({});\n","import { href } from './href';\nimport {email} from './email';\n\nexport default  {\n    href,\n    email\n};\n","import React from 'react'\nimport { Input } from 'antd';\n\nexport const href = {\n  render: (text: any, { fieldProps }: any)=> {\n    return (<a href={text}>{text}</a>)\n  },\n  renderFormItem: (_: any, props: any) => (\n    <Input placeholder=\"请输入链接\" {...props?.fieldProps} />\n  ),\n}\n\n","import React from 'react'\nimport { Input } from 'antd';\n\nexport const email = {\n  render: (text: any, { fieldProps }: any)=> {\n    const link = \"mailto:\" + text;\n    return (<a href={link}>{text}</a>)\n  },\n  renderFormItem: (_: any, props: any) => (\n    <Input placeholder=\"请输入邮箱地址\" {...props?.fieldProps} />\n  ),\n}\n\n","import React, { useContext } from \"react\";\nimport { FormContext } from './FormContext';\nimport valueTypes from '../valueTypes';\n\nimport ProContext, {createIntl, \n  zhCNIntl as pro_zhCN, \n  zhTWIntl as pro_zhTW, \n  enUSIntl as pro_enUS\n} from '@ant-design/pro-provider';\n\nimport { ConfigProvider as AntdConfigProvider } from 'antd';\nimport antd_zhCN from 'antd/lib/locale/zh_CN';\nimport antd_zhTW from 'antd/lib/locale/zh_TW';\nimport antd_enUS from 'antd/lib/locale/zh_CN';\n\nimport { IntlType } from \"@ant-design/pro-table\";\n\nimport { en_US, zh_CN } from '@steedos/builder-locale';\n\n/* 通过 valueTypeMap，支持给Form传入第三方自定义控件 */\ntype FormProviderProps = {\n  locale?: string,\n  valueTypeMap?: object,\n  children: any,\n}\n\nexport function FormProvider(props: FormProviderProps) {\n  const {\n    locale,\n    valueTypeMap,\n    children,\n  } = props\n\n  const proContextValues = {\n    intl: {\n      ...getProLocale(locale),\n    },\n    valueTypeMap: { ...valueTypes, ...valueTypeMap }\n  }\n\n  const antdContextValues = {\n    locale: getAntdLocale(locale)\n  }\n\n  const intl = getSteedosIntl(locale)\n  return (\n    <FormContext.Provider value={{\n      intl,\n      valueTypeMap\n    }}>\n      <AntdConfigProvider {...antdContextValues}>\n        <ProContext.Provider value={proContextValues}>\n          {children}\n        </ProContext.Provider>\n      </AntdConfigProvider>\n    </FormContext.Provider>\n  )\n}\n\n\nexport const getAntdLocale:any = (locale: string)=> {\n  switch (locale) {\n    case 'en_US': return antd_enUS\n    case 'zh_CN': return antd_zhCN\n    case 'zh_TW': return antd_zhTW\n    default: return antd_zhCN\n  }\n}\n\nexport const getProLocale = (locale?: string)=> {\n  switch (locale) {\n    case 'en_US': return pro_enUS\n    case 'zh_CN': return pro_zhCN\n    case 'zh_TW': return pro_zhTW\n    default: return pro_zhCN\n  }\n}\n\nfunction getMessageFromLocaleMap(\n  source: Record<string, unknown>,\n  path: string,\n  defaultValue?: string,\n): string | undefined {\n  // a[3].b -> a.3.b\n  const paths = path.replace(/\\[(\\d+)\\]/g, '.$1').split('.');\n  let result = source;\n  let message = defaultValue;\n  // eslint-disable-next-line no-restricted-syntax\n  for (const p of paths) {\n    message = Object(result)[p];\n    result = Object(result)[p];\n    if (message === undefined) {\n      return defaultValue;\n    }\n  }\n  return message;\n}\n\n/**\n * 创建一个操作函数\n *\n * @param locale\n * @param localeMap\n */\nconst createSteedosIntl = (locale: string, localeMap: Record<string, any>): IntlType => ({\n  getMessage: (id: string, defaultMessage: string) => {\n    let message = getMessageFromLocaleMap(localeMap, id, defaultMessage);\n    if (!message)\n      message = getProLocale(locale).getMessage(id, '');\n      if (!message)\n        message = getMessageFromLocaleMap(getAntdLocale(locale), id);\n    return message || defaultMessage\n  },\n  locale,\n});\n\nconst zhCNIntl = createSteedosIntl('zh_CN', zh_CN);\nconst enUSIntl = createSteedosIntl('en_US', en_US);\n\nconst getSteedosIntl = (locale?: string) => {\n  switch (locale) {\n    case 'en_US': return enUSIntl\n    case 'zh_CN': return zhCNIntl\n    case 'zh_TW': return zhCNIntl\n    default: return zhCNIntl\n  }\n}\n\nexport function useIntl(): IntlType {\n  const context = useContext(FormContext);\n  return context.intl || zhCNIntl;\n}\n","export default {\n  form: {\n    save: '保存',\n    cancel: '取消'\n  }\n}","export default {\n  form: {\n    save: 'Save',\n    cancel: 'Cancel'\n  }\n}","import React, { useContext } from \"react\";\n\nimport { Field } from '@steedos/builder-form'\nimport _ from 'lodash';\nimport { useQuery } from \"react-query\";\nimport { observer } from \"mobx-react-lite\"\nimport { FormContext } from \"antd/es/form/context\";\nimport { ProFormDependency } from '@ant-design/pro-form';\nimport useAntdMediaQuery from 'use-media-antd-query';\nimport { Forms } from '@steedos/builder-store';\n\nexport type ObjectFieldProps = {\n  objectApiName?: string,\n  fieldName: string,\n  fieldSchema: any,\n}\n\nexport const ObjectField = observer((props: any) => {\n  const context = useContext(FormContext);\n  const formId = context.name?context.name:'default';\n  const { objectApiName, fieldName, fieldSchema } = props\n  \n  const colSize = useAntdMediaQuery();\n  const isMobile = (colSize === 'sm' || colSize === 'xs') && !props.disableMobile;\n  if (isMobile)\n    fieldSchema.is_wide = true\n  /*\n    TODO: fieldSchema 如果不存在，应该从对象中获取，但是对象应该从 store 中获取，而不是请求。\n  */\n  \n  // 从对象定义中生成字段信息。\n  let mode = Forms.loadById(formId).mode;\n  let formFieldProps: any = {\n    name: fieldName,\n    mode,\n    label: fieldSchema.label? fieldSchema.label: fieldName,\n    placeholder: fieldSchema.help,\n    hidden: fieldSchema.hidden,\n    valueType: fieldSchema.type,\n    required: fieldSchema.required,\n    // options: fieldSchema.options,\n    readonly: fieldSchema.readonly,\n    isWide: fieldSchema.is_wide,\n    fieldSchema,\n  }\n\n  if (mode == \"edit\") {\n\n    if (fieldSchema.omit) {\n      formFieldProps.hidden = true\n    }\n  } else if (mode == \"read\") {\n    if (fieldSchema.omit) {\n      formFieldProps.readonly = true\n    }\n  }\n\n  if (formFieldProps.required) {\n    formFieldProps.rules = [\n      {\n        required: true,\n        message: `请输入${formFieldProps.label}...`,\n      },\n    ]\n  }\n\n  const formItemProps:any = {\n    colon: false,\n  }\n\n  const dependOn = fieldSchema.depend_on ? fieldSchema.depend_on : []\n\n  return (\n    <ProFormDependency name={dependOn}>\n      {(dependFieldValues) => {\n        return (\n          <Field\n            formItemProps={formItemProps}\n            dependFieldValues={dependFieldValues}\n            {...formFieldProps}\n          />)\n      }}\n    </ProFormDependency>\n  )\n});","\nimport React, { useContext, useEffect, useState } from \"react\";\nimport * as PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport { useQuery } from 'react-query'\n\nimport { Form } from '@steedos/builder-form';\nimport { Form as ProForm } from 'antd';\nimport { BaseFormProps } from \"@ant-design/pro-form/lib/BaseForm\";\nimport type { ProFieldFCMode } from '@ant-design/pro-utils';\nimport { ObjectField } from \"./ObjectField\";\nimport { observer } from \"mobx-react-lite\"\nimport stores, { Objects, Forms, API, Settings } from '@steedos/builder-store';\nimport { FieldSection } from \"@steedos/builder-form\";\nimport { Spin } from 'antd';\n\nimport './ObjectForm.less'\n\nexport type FormProps<T = Record<string, any>>  = {\n  mode?: 'read' | 'edit',\n  editable?: boolean,\n} & BaseFormProps\n\n/*\n  fields: 字段定义数组，\b格式同YML\n*/\nexport type ObjectFormProps = {\n  objectApiName: string,\n  objectSchema?: any,\n  initialValues?: any,\n  recordId?: string\n  submitter?: any,\n  isModalForm?: boolean,\n  isDrawerForm?: boolean,\n  trigger?: any\n  afterUpdate?: Function,\n  afterInsert?: Function,\n  visible?: boolean\n} & FormProps\n\nexport const ObjectForm = observer((props:ObjectFormProps) => {\n  const {\n    objectApiName = Settings.currentObjectApiName,\n    initialValues = {},\n    objectSchema = {}, // 和对象定义中的fields格式相同，merge之后 render。\n    recordId = Settings.currentRecordId,\n    name: formId = 'default',\n    mode = 'edit', \n    layout = 'vertical',\n    children,\n    submitter,\n    isModalForm,\n    isDrawerForm,\n    afterUpdate,\n    afterInsert,\n    trigger,\n    visible,\n    ...rest\n  } = props;\n  const [proForm] = ProForm.useForm();\n \n  const form = Forms.loadById(formId)\n  form.setMode(mode);\n\n  // const [fieldSchemas, setFieldSchemas] = useState([]);\n  // const [fieldNames, setFieldNames] = useState([]);\n  const fieldNames = [];\n  const fieldSchemaArray = [];\n  const sections = [];\n\n  if (!objectApiName)\n    return null;\n  const object = Objects.getObject(objectApiName);\n  if (object.isLoading) return (<div><Spin/></div>)\n\n  if (object.schema) {\n    const mergedSchema = _.defaultsDeep({}, object.schema, objectSchema);\n    fieldSchemaArray.length = 0\n    _.forEach(mergedSchema.fields, (field, fieldName) => {\n      if (!field.group || field.group == 'null' || field.group == '-')\n        field.group = '通用'\n      let isObjectField = /\\w+\\.\\w+/.test(fieldName)\n      if (field.type == 'grid' || field.type == 'object') {\n        // field.group = field.label\n        field.is_wide = true;\n      }\n      // 新建记录时，把autonumber、formula、summary类型字段视为omit字段不显示\n      let isOmitField = isModalForm && [\"autonumber\", \"formula\", \"summary\"].indexOf(field.type) > -1\n      if (!field.hidden && !isObjectField && !isOmitField){\n        fieldSchemaArray.push(_.defaults({name: fieldName}, field))\n      }\n    })\n    _.forEach(fieldSchemaArray, (field:any)=>{\n      fieldNames.push(field.name)\n    })\n  \n    if (recordId) {\n      const recordCache = object.getRecord(recordId, fieldNames)\n      if (recordCache.isLoading)\n        return (<div><Spin/></div>)\n  \n      if(recordCache.data && recordCache.data.value && recordCache.data.value.length > 0){\n        const record = recordCache.data.value[0];\n        _.forEach(fieldNames, (fieldName:any)=>{\n          if (record[fieldName])\n            initialValues[fieldName] = record[fieldName];\n        })\n      } else {\n      }\n    }\n  }\n  \n\n\n  const onFinish = async(values:any) =>{\n    let result; \n    if(!recordId){     \n      result = await API.insertRecord(objectApiName, values);\n      if(afterInsert){\n        return afterInsert(result);\n      }else{\n        return result ? true : false\n      }\n    }else{\n      result = await API.updateRecord(objectApiName, recordId, values);\n      if(afterUpdate){\n        return afterUpdate(result);  \n      }else{\n        return result ? true : false\n      }\n    } \n  }\n\n  const getSection = (sectionName, options) => {\n    const sectionFields = _.filter(fieldSchemaArray, { 'group': sectionName });\n    const columns = isModalForm ? 2 : undefined\n    return (\n      <FieldSection title={sectionName} key={sectionName} columns={columns} {...options}>\n        {_.map(sectionFields, (field:any)=>{\n          const fieldProps = {\n            key: field.name,\n            name: field.name,\n            objectApiName,\n            fieldName: field.name,\n            label: field.label,\n            fieldSchema: field,\n            mode,\n          };\n          return (<ObjectField {...fieldProps} />)\n        })}\n      </FieldSection>\n    )\n  }\n\n  const getSections = () => {\n     const sections = _.groupBy(fieldSchemaArray, 'group');\n     const dom = [];\n     const options = (Object.keys(sections).length == 1)?{titleHidden: true}: {}\n     _.forEach(sections, (value, key) => {\n      dom.push(getSection(key, options))\n    })\n    return dom;\n  }\n  // 从详细页面第一次进入另一个相关详细页面是正常，第二次initialValues={initialValues} 这个属性不生效。\n  // 所以在此调用下 form.setFieldsValue() 使其重新生效。\n  proForm.setFieldsValue(initialValues)\n  return (\n    <Form \n      // formFieldComponent = {ObjectField}\n      name={formId}\n      className='builder-form object-form'\n      initialValues={initialValues}\n      mode={mode}\n      form={proForm}\n      layout={layout}\n      submitter={submitter}\n      isModalForm={isModalForm}\n      isDrawerForm={isDrawerForm}\n      trigger={trigger}\n      onFinish={onFinish}\n      visible={visible}\n      {...rest}\n    >\n      {children}\n      {getSections()}\n    </Form>\n  )\n});\n\n\n\nObjectForm['propTypes'] = {\n  objectApiName: PropTypes.string,\n  mode: PropTypes.string,\n};","import React, { useContext, useRef, useEffect, useState } from \"react\"\nimport _ from \"lodash\"\nimport { ObjectContext } from \"../\"\nimport { useQuery } from \"react-query\"\nimport { formatFiltersToODataQuery } from '@steedos/filters';\nimport useAntdMediaQuery from 'use-media-antd-query';\nimport ProTable, {\n  ProTableProps,\n  RequestData,\n  ProColumnType,\n} from \"@ant-design/pro-table\"\nimport { SortOrder } from \"antd/lib/table/interface\"\nimport { ParamsType } from \"@ant-design/pro-provider\"\nimport { observer } from \"mobx-react-lite\"\nimport { Objects, API } from \"@steedos/builder-store\"\nimport { getObjectRecordUrl } from \"../utils\"\nimport { Spin } from 'antd';\nimport \"./ObjectTable.less\"\nimport { Link } from \"react-router-dom\"\n// export type TableProps<T extends Record<string, any>, U extends ParamsType, ValueType>  = {\n//   mode?: ProFieldFCMode,\n//   editable?: boolean,\n// } & ProTableProps<T, U, ValueType> & {\n//   defaultClassName: string;\n// }\n\n// export type ObjectTableProps = {\n//   objectApiName?: string,\n//   recordId?: string,\n// } & ProTableProps<T, U, ValueType> & {\n//   defaultClassName: string;\n// }\n\nexport type ObjectTableColumnProps = {\n  fieldName: string\n} & ProColumnType\n\nexport type ObjectTableProps<T extends ObjectTableColumnProps> =\n  | ({\n      name?: string\n      objectApiName?: string\n      columnFields?: T[]\n      filters?: [] | string\n      sort?: [] | string\n      onChange?: ([any]) => void\n      // filterableFields?: [string]\n    } & {\n      defaultClassName?: string\n    })\n  | any\n\nexport const getObjectTableProColumn = (field: any, columnOption?: any) => {\n  // 把yml中的某个字段field转成ant的ProTable中的columns属性项\n  if (!field) {\n    return null\n  }\n\n  const fieldType: string = field.type\n  let proColumnProps: any = {\n    title: field.label,\n    dataIndex: field.name,\n    formItemProps: {},\n    fieldProps: {\n      field_schema: field\n    }\n  }\n  if (field.required) {\n    proColumnProps.formItemProps.required = true\n  }\n\n  if (field.sortable) {\n    proColumnProps.sorter = {\n        multiple: 1\n    };\n  }\n\n  proColumnProps.valueType = fieldType\n\n  if(columnOption){\n    proColumnProps = Object.assign({}, proColumnProps, columnOption);\n  }\n  \n  return proColumnProps\n}\n\nexport const checkFieldTypeSupportBetweenQuery = (type: string)=> {\n  return false;\n  // return [\"date\", \"datetime\", \"currency\", \"number\"].includes(type);\n}\n\nexport const getFieldDefaultOperation = (type: any)=>{\n\tif(type && checkFieldTypeSupportBetweenQuery(type)){\n\t\treturn 'between';\n  }\n\telse if([\"textarea\", \"text\", \"code\"].includes(type)){\n\t\treturn 'contains'\n  }\n\telse{\n\t\treturn \"=\"\n  }\n}\n\nfunction getDefaultSortOrder(fieldName: any, sort:any){\n  let sortDirection:any;\n  let sortValue: any;\n  if (sort) {\n    if (typeof sort === 'string' && sort.length > 0) {\n      let arr = [];\n      arr = sort.split(',');\n      sortValue = _.map(arr, (value, key) => {\n        if (value.indexOf(' ')) {\n          return arr[key] = value.split(' ');\n        } else {\n          return arr[key] = [value]\n        }\n      })\n    } else {\n      sortValue = sort;\n    }\n    if (sortValue.length > 0) {\n      _.forEach(sortValue, (ele) => {\n        if (ele[0] === fieldName) {\n          sortDirection = ele[1] === 'desc' ? 'descend' : 'ascend';\n        }\n      })\n    }\n  }\n  return sortDirection;\n}\n\nexport const ObjectTable = observer((props: ObjectTableProps<any>) => {\n\n  const {\n    objectApiName,\n    columnFields = [],\n    filters: defaultFilters,\n    sort,\n    defaultClassName,\n    onChange,\n    toolbar,\n    search,\n    ...rest\n  } = props\n\n  const [totalRecords, setTotalRecords] = useState(0)\n\n  const colSize = useAntdMediaQuery();\n  const isMobile = (colSize === 'sm' || colSize === 'xs') && !props.disableMobile;\n\n  const object = Objects.getObject(objectApiName);\n  const selfTableRef = useRef(null)\n  if (object.isLoading) return (<div><Spin/></div>)\n\n  let defaultSort: any = {};\n  const proColumns = []\n  if (object.schema && object.schema.fields) {\n    _.forEach(\n      columnFields,\n      ({ fieldName, ...columnItem }: ObjectTableColumnProps) => {\n        // if (columnItem.hideInTable) return\n        let columnOption: any = {};\n        const defaultSortOrder = getDefaultSortOrder(fieldName,sort)\n        if(defaultSortOrder){\n          columnOption.defaultSortOrder = defaultSortOrder;\n          defaultSort[fieldName] = defaultSortOrder;\n        }\n        const  proColumn = getObjectTableProColumn(object.schema.fields[fieldName], columnOption)\n        if (proColumn) {\n          proColumns.push({ ...proColumn, ...columnItem })\n        }\n      }\n    )\n  }\n\n  const request = async (\n    params: any & {\n      pageSize?: number\n      current?: number\n      keyword?: string\n    },\n    sort: Record<string, SortOrder>,\n    filter: Record<string, React.ReactText[]>\n  ): Promise<any> => {\n\n    // 第一个参数 params 查询表单和 params 参数的结合\n    // 第一个参数中一定会有 pageSize 和  current ，这两个参数是 antd 的规范\n    // 这里需要返回一个 Promise,在返回之前你可以进行数据转化\n    // 如果需要转化参数可以在这里进行修改\n    /*\n    const msg = await myQuery({\n      page: params.current,\n      pageSize: params.pageSize,\n    });\n    return {\n      data: msg.result,\n      // success 请返回 true，\n      // 不然 table 会停止解析数据，即使有数据\n      success: boolean,\n      // 不传会使用 data 的长度，如果是分页一定要传\n      total: number,\n    };\n    */\n\n    const { current, pageSize, ...searchFilters } = params\n    let filters: any = [], keyFilters: any = [];\n    //searchFilters中包括params中自定义参数及顶部搜索框字段参数，字段名不可能是__开头，所以params中自定义参数以__开头可区分它们\n    const {__objectApiName, __columnFields, __defaultFilters, ...restFilters} = searchFilters;\n    keyFilters = Object.keys(restFilters).map((key) => {\n      const field = object.schema.fields[key];\n      return [key, getFieldDefaultOperation(field && field.type), searchFilters[key]];\n    });\n    \n    if (__defaultFilters && __defaultFilters.length) {\n      if(keyFilters && keyFilters.length){\n        if (_.isArray(__defaultFilters)) {\n            filters = [__defaultFilters, keyFilters]\n        }\n        else {\n            const odataKeyFilters = formatFiltersToODataQuery(keyFilters);\n            filters = `(${__defaultFilters}) and (${odataKeyFilters})`;\n        }\n      }\n      else{\n        filters = __defaultFilters;\n      }\n    }\n    else{\n      filters = keyFilters;\n    }\n\n    // TODO: 这里antd的request请求函数与ObjectTable组件传入的filters,sort等格式不一样，需要转换处理\n    const fields = __columnFields.map((n: any) => {\n      return n.fieldName\n    })\n    // TODO: ant.design的bug（defaultSortOrder 和 sorter存在时sort没获取到设置的初始值），所以这里\n    // 设置下sort的初始值， 后期修复这个bug后以下三行代码可以 删除。\n    if(_.isEmpty(sort) && !_.isEmpty(defaultSort)){\n      sort = defaultSort;\n    }\n    const result = await API.requestRecords(\n      __objectApiName,\n      filters,\n      fields,\n      {\n        pageSize: params.pageSize as number,\n        current: params.current as number,\n        sort: sort\n          ? Object.keys(sort).map((sk) => [\n              sk,\n              sort[sk] == \"ascend\" ? \"asc\" : \"desc\",\n            ])\n          : [],\n      }\n    )\n    setTotalRecords(result[\"@odata.count\"])\n    return {\n      data: result.value,\n      success: true,\n      total: result[\"@odata.count\"],\n    }\n  }\n\n  let searchOptions: any =  {\n    filterType: 'light',\n  }\n  if(isMobile){\n    searchOptions = false;\n  }\n  const proSearch = search ? search : searchOptions;\n\n  let toolbarOptions: any =  {\n    subTitle: `${totalRecords} 个项目`\n  };\n  if(isMobile){\n    toolbarOptions.settings = false;\n  }\n  const proToolbar = Object.assign({}, toolbarOptions, toolbar);\n\n  return (\n    <ProTable\n      request={request}\n      columns={proColumns}\n      rowKey={rest.rowKey || \"_id\"}\n      rowSelection={rest.rowSelection || { onChange }}\n      pagination={{ ...rest.pagination, hideOnSinglePage: true }}\n      columnEmptyText={false}\n      actionRef={rest.actionRef || selfTableRef}\n      onChange={() => {\n        ;(rest.actionRef || selfTableRef).current.reload()\n      }}\n      params={{\n        __objectApiName: objectApiName,\n        __columnFields: columnFields,\n        __defaultFilters: defaultFilters,\n      }}\n      search={proSearch}\n      toolbar={proToolbar}\n      size=\"small\"\n      className={[\"object-table\", rest.className].join(\" \")}\n      {...rest}\n    />\n  )\n})\n","import { Tree } from \"antd\"\nimport _ from \"lodash\"\nimport { observer } from \"mobx-react-lite\"\nimport React, { useContext, useEffect, useState } from \"react\"\nimport { useQuery } from \"react-query\"\nimport { Objects, API } from \"@steedos/builder-store\"\nimport \"./ObjectTree.less\"\n// export type TreeProps<T extends Record<string, any>, U extends ParamsType, ValueType>  = {\n//   mode?: ProFieldFCMode,\n//   editable?: boolean,\n// } & ProTreeProps<T, U, ValueType> & {\n//   defaultClassName: string;\n// }\n\n// export type ObjectTreeProps = {\n//   objectApiName?: string,\n//   recordId?: string,\n// } & ProTreeProps<T, U, ValueType> & {\n//   defaultClassName: string;\n// }\n\nexport type ObjectTreeProps =\n  | ({\n      name?: string\n      objectApiName?: string\n      nameField?: string\n      parentField?: string\n      rootNodeValue?: string\n      filters?: string | string[]\n      checkable?: boolean\n      onChange?: () => void\n    } & {\n      defaultClassName: string\n    })\n  | any\n\nexport const ObjectTree = observer((props: ObjectTreeProps) => {\n\n  let {\n    name: treeId = \"default\",\n    objectApiName,\n    nameField,\n    parentField,\n    releatedColumnField,\n    rootNodeValue,\n    filters,\n    checkable,\n    onChange,\n    ...rest\n  } = props\n  if (checkable == undefined) checkable = true\n\n  const object = Objects.getObject(objectApiName);\n\n  //上边都是schema相关的操作\n  //下边才是去请求数据\n\n  const [treeData, setTreeData] = useState([])\n  const [expandedKeys, setExpandedKeys] = useState([])\n  let { data: records } = useQuery(\n    [\n      objectApiName + \"_records\",\n      nameField,\n      parentField,\n      rootNodeValue,\n      filters,\n      checkable,\n    ], //这里以Props里的参数作为useQuery的第一参数，react-query会通过该参数是否发生变化来判断是否要重新进行请求\n    async () => {\n      // const objectFields = Object.values(object.schema.fields)\n      //   .filter(({ hidden }) => !hidden)\n      //   .map(({ name }) => name)\n      const objectFields = [nameField, parentField]\n      return await API.requestRecords(\n        objectApiName as string,\n        filters,\n        objectFields\n      )\n    },\n    { enabled: !object.isLoading } //只有上边的schema加载好了，才启用下边的记录查询\n  )\n\n  useEffect(() => {\n    if (records) {\n      let td: any = []\n      let ek: any = []\n      let tp: any = {}\n      let _rootNodeValue = rootNodeValue\n      ;(records.value as any[]).forEach((d) => {\n        let { _id, ...rest } = d\n        let parent = rest[parentField || \"parent\"]\n        tp[_id] = {\n          value: _id,\n          key: _id,\n          title: d[nameField || \"name\"],\n          children: [],\n          _id,\n          ...rest,\n          ...(tp[_id] || {}),\n        }\n        ek.push(_id)\n        if (parent) {\n          if (tp[parent]) {\n            tp[parent].children.push(tp[_id])\n          } else tp[parent] = { children: [tp[_id]] }\n        } else if (!parent) {\n          td = [tp[_id]]\n          _rootNodeValue = _id\n        }\n      })\n      if (_rootNodeValue) {\n        td = (tp[_rootNodeValue] && [tp[_rootNodeValue]]) || []\n      }\n      setTreeData(td)\n      // setExpandedKeys(ek)\n      setExpandedKeys([_rootNodeValue])\n    }\n  }, [records])\n\n  if (object.isLoading) return (<div>Loading object ...</div>)\n  return (\n    <Tree\n      style={{ width: \"100%\" }}\n      // checkable={checkable}\n      expandedKeys={expandedKeys}\n      treeData={treeData}\n      onExpand={(expandedKeys, { expanded, node }) => {\n        setExpandedKeys(expandedKeys)\n      }}\n      onSelect={(values, { selectedNodes }) => {\n        onChange && onChange(selectedNodes)\n      }}\n      // onCheck={(values, { checkedNodes }) => {\n      //   console.log(values, checkedNodes)\n      //   onChange && onChange(checkedNodes)\n      // }}\n      {...rest}\n    ></Tree>\n  )\n})\n","/*\n这是一个列表组件,将华炎魔方中的数据以列表的形式展示出来\n * @Author: Kent.Wood \n * @Date: 2021-03-25 22:41:50 \n * @Last Modified by: Kent.Wood\n * @Last Modified time: 2021-03-26 20:52:23\n */\n\nimport { API } from \"@steedos/builder-store\"\nimport { List, Button, Checkbox } from \"antd\"\nimport _ from \"lodash\"\nimport { observer } from \"mobx-react-lite\"\nimport React, { useContext, useEffect, useState } from \"react\"\nimport { useQuery } from \"react-query\"\n// import { registerObjectListComponent } from \"..\"\nimport \"./ObjectList.less\"\nexport type ObjectListProps =\n  | ({\n      name?: string\n      objectApiName?: string\n      nameField?: string\n      filters?: string | string[]\n      checkable?: boolean //是否需要显示checkable,如果显示了,表示是多选多模式\n      onChange?: (any) => void\n    } & {\n      defaultClassName: string\n    })\n  | any\n\nexport const ObjectList = observer((props: ObjectListProps) => {\n  \n\n  let {\n    name: treeId = \"default\",\n    objectApiName,\n    nameField,\n    filters,\n    checkable,\n    onChange,\n    ...rest\n  } = props\n  // if (checkable == undefined) checkable = true\n\n  objectApiName = objectApiName \n  const { isLoading, error, data: objectSchema, isFetching } = useQuery<any>(\n    objectApiName + \"_schema\",\n    async () => {\n      return await API.requestObject(objectApiName as string)\n    }\n  )\n  // if (objectSchema) registerObjectListComponent(_.keys(objectSchema.fields))\n  //上边都是schema相关的操作\n  //下边才是去请求数据\n\n  const [listData, setListData] = useState([])\n\n  const [selectedData, setSelectedData] = useState([])\n\n  let { data: records } = useQuery(\n    [objectApiName + \"_records\", nameField, filters, checkable], //这里以Props里的参数作为useQuery的第一参数，react-query会通过该参数是否发生变化来判断是否要重新进行请求\n    async () => {\n      const objectFields = Object.values(objectSchema.fields)\n        .filter(({ hidden }) => !hidden)\n        .map(({ name }) => name)\n      return await API.requestRecords(\n        objectApiName as string,\n        filters,\n        objectFields\n      )\n    },\n    { enabled: !!objectSchema } //只有上边的schema加载好了，才启用下边的记录查询\n  )\n\n  useEffect(() => {\n    if (records) {\n      setListData(records.value)\n    }\n  }, [records])\n\n  const handleItemClick = (record) => {\n    let tmpSelectedData = [...selectedData]\n    let isCheckedIndex = tmpSelectedData.findIndex(\n      ({ _id }) => _id == record._id\n    )\n    if (isCheckedIndex >= 0) {\n      tmpSelectedData.splice(isCheckedIndex, 1)\n    } else {\n      if (checkable) {\n        tmpSelectedData.push(record)\n      } else {\n        tmpSelectedData = [record]\n      }\n    }\n    setSelectedData(tmpSelectedData)\n    onChange && onChange(tmpSelectedData)\n  }\n\n  return (\n    <List\n      style={{ width: \"100%\" }}\n      dataSource={listData}\n      itemLayout=\"vertical\"\n      renderItem={(record: any) => {\n        return (\n          <List.Item\n            onClick={(e) => {\n              handleItemClick(record)\n            }}\n            className={\n              \"object-list-item \" +\n              (selectedData.some(({ _id }) => _id == record._id)\n                ? \"selected\"\n                : \"\")\n            }\n          >\n            {checkable ? (\n              <Checkbox\n                checked={selectedData.some(({ _id }) => _id == record._id)}\n              />\n            ) : (\n              <></>\n            )}\n            {/* <Button\n              type=\"text\"\n              style={{ width: \"100%\", textAlign: \"left\" }}\n              className={selectedData.some(({_id})=>_id==record._id)?\"selected\":\"\"}\n             \n            > */}\n            {record[nameField]}\n            {/* </Button> */}\n          </List.Item>\n        )\n      }}\n      {...rest}\n    ></List>\n  )\n})\n","/*\n该组件在ObjectTable的基础上,扩展了左侧内容.提供List和Tree两种形式展示\n通过columnFields里添加相关属性来驱动\n\n * @Author: Kent.Wood \n * @Date: 2021-03-25 22:35:51 \n * @Last Modified by: Kent.Wood\n * @Last Modified time: 2021-03-29 20:56:02\n */\n\nimport ProCard from \"@ant-design/pro-card\"\nimport _ from \"lodash\"\nimport { observer } from \"mobx-react-lite\"\nimport React, { useContext, useEffect, useRef, useState } from \"react\"\nimport { ActionType } from \"react-table\"\nimport \"./ObjectExpandTable.less\"\n\nimport {\n  ObjectContext,\n  ObjectList,\n  ObjectTable,\n  ObjectTableColumnProps,\n  ObjectTableProps,\n  ObjectTree,\n} from \"..\"\n\nexport type ObjectExpandTableColumnProps = {\n  expandType?: \"tree\" | \"list\" //两种扩展内容形式\n  expandReference?: string //针对树显示所使用的对象名.等于树的objectApiName\n  expandNameField?: string //树中用于显示的字段名\n  expandParentField?: string //树中对象的父级的字段名，默认是parent,只在expand为tree时有效\n} & ObjectTableColumnProps\n\nexport type ObjectExpandTableProps =\n  | ({\n      name?: string\n      //parentField: string //当前对象的父级对象，用于树形结构呈现时使用\n      onChange: ([any]) => void\n      columnFields: ObjectExpandTableColumnProps[]\n    } & ObjectTableProps<ObjectExpandTableColumnProps> & {\n        defaultClassName?: string\n      })\n  | any\n\nfunction getFilter(ids, key): string {\n  return ids.map((id) => (key || \"_id\") + \" eq '\" + id + \"'\").join(\" or \")\n}\nfunction getContainsFilter(ids, key): string {\n  return ids\n    .map((id) => \"contains(\" + (key || \"_id\") + \",'\" + id + \"')\")\n    .join(\" or \")\n}\n\nexport const ObjectExpandTable = observer((props: ObjectExpandTableProps) => {\n\n  const {\n    name: ObjectExpandTableId = \"default\",\n    // includeSub,\n    onChange,\n    ...rest\n  } = props\n\n  const [selectedUsers, setSelectedUsers] = useState([])\n  const [selectedExpandNode, setSelectedExpandNode] = useState([])\n\n  // const flatChildren = (node) => {\n  //   return [\n  //     node,\n  //     ...(node.children.length > 0\n  //       ? _.flatten(node.children.map((c) => flatChildren(c)))\n  //       : [null]),\n  //   ].filter((a) => a)\n  // }\n  const handleExpandContentChange = (selectedNodes) => {\n    //原先是过滤用户ID的。现有调整成过滤组织ID的方式\n    // let tmpUsers=[]\n    // selectedNodes.forEach(({ users }) => { tmpUsers = [...tmpUsers, ...users] });\n    // tmpUsers = _.uniq(tmpUsers);\n    //setSelectedUsers(tmpUsers)\n\n    let tmpTreeNodes = []\n\n    // if (includeSub) {\n    //   selectedNodes = _.flatten(selectedNodes.map((node) => flatChildren(node)))\n    // }\n\n    selectedNodes.forEach(({ _id }) => {\n      tmpTreeNodes = [...tmpTreeNodes, _id]\n    })\n    tmpTreeNodes = _.uniq(tmpTreeNodes)\n    setSelectedExpandNode(tmpTreeNodes)\n    tableRef.current?.reload()\n  }\n\n  const handleTableRowChose = (selectedRowKeys, selectedRows) => {\n    // console.log(selectedRowKeys, selectedRows);\n    onChange && onChange(selectedRows)\n  }\n\n  const tableRef = useRef<ActionType>()\n\n  useEffect(() => {\n    tableRef.current?.reload()\n  }, [tableRef.current])\n\n  const [expandProps, setExpandProps] = useState<{\n    type: string\n    objectApiName: string\n    nameField: string\n    parentField: string\n    releatedColumnField: string\n  }>(null)\n\n  useEffect(() => {\n    let expandDefine:\n      | {\n          expandType\n          expandReference\n          expandNameField\n          expandParentField\n          fieldName\n        }\n      | any = props.columnFields.find(\n      ({\n        expandType,\n        expandReference,\n        expandNameField,\n        expandParentField,\n        fieldName,\n      }) => {\n        if (expandType) {\n          return {\n            expandType,\n            expandReference,\n            expandNameField,\n            expandParentField,\n            fieldName,\n          }\n        }\n      }\n    )\n\n    setExpandProps(\n      expandDefine && {\n        type: expandDefine.expandType,\n        objectApiName: expandDefine.expandReference,\n        nameField: expandDefine.expandNameField,\n        parentField: expandDefine.expandParentField,\n        releatedColumnField: expandDefine.fieldName,\n      }\n    )\n  }, [props.columnFields])\n\n  return (\n    <>\n      <ProCard\n        split=\"vertical\"\n        className={[\"object-expand-table\", rest.className].join(\" \")}\n      >\n        {expandProps && expandProps.type && (\n          <ProCard colSpan=\"30%\" className=\"expand-part\">\n            {expandProps.type == \"tree\" && (\n              <ObjectTree\n                {...expandProps}\n                onChange={handleExpandContentChange}\n              />\n            )}\n            {expandProps.type == \"list\" && (\n              <ObjectList\n                {...(() => {\n                  let {\n                    parentField,\n                    releatedColumnField,\n                    ...expandPropsRest\n                  } = expandProps\n                  return expandPropsRest\n                })()}\n                onChange={handleExpandContentChange}\n              />\n            )}\n          </ProCard>\n        )}\n        <ProCard className=\"table-part\" ghost>\n          <ObjectTable\n            {...rest}\n            // filters={getFilter(selectedUsers.length>0?selectedUsers:['__none_exisit__'], \"user\")}\n            filters={\n              expandProps &&\n              getContainsFilter(\n                selectedExpandNode.length > 0 ? selectedExpandNode : [], //: [\"__none_exisit__\"],//本来的意思是,如果不选任何节点,就不能搜到任何人.现有调整成不选任何节点就找到所有人.\n                expandProps.releatedColumnField\n                // \"organizations_parents\"\n              )\n            }\n            // manualRequest={true}\n            actionRef={tableRef}\n            onChange={handleTableRowChose}\n          />\n        </ProCard>\n      </ProCard>\n    </>\n  )\n})\n","/*\n这是一个带有输入框的组件,点了能够弹出ObjectTablePicker模式弹窗来\n它定义了value,onChange这两个和ant design的formItem兼容的属性\n * @Author: Kent.Wood \n * @Date: 2021-03-25 22:40:09 \n * @Last Modified by: Kent.Wood\n * @Last Modified time: 2021-03-26 12:22:50\n */\n\nimport { Button, Input, Select } from \"antd\"\nimport _ from \"lodash\"\nimport React, { useState } from \"react\"\nimport { PlusOutlined } from \"@ant-design/icons\"\nimport { ObjectTablePicker, ObjectTablePickerProps } from \"..\"\nconst { Option } = Select\n\nexport type SelectUserInputProps = {\n  value: any[]\n  inputLabelField: string | ((any) => string) //选出来的数据,如何渲染成输入框里的标签文本\n  onChange: ([any]) => void\n} & ObjectTablePickerProps\n\nexport const SelectUserInput = (props: SelectUserInputProps) => {\n  const { value, inputLabelField, onChange, ...rest } = props\n  const [selectedRecords, setSelectedRecords] = useState<any[]>(value)\n  const [openPopup, setOpenPopup] = useState(false)\n\n  return (\n    <>\n      <Input.Group compact style={{ display: \"flex\" }}>\n        <Button\n          style={{\n            display: \"flex\",\n            alignItems: \"center\",\n          }}\n          icon={<PlusOutlined />}\n          onClick={() => setOpenPopup(true)}\n        ></Button>\n        <Select mode=\"tags\" style={{ flex: 1 }} value={selectedRecords}>\n          {selectedRecords &&\n            selectedRecords.map((item, i) => (\n              <Option key={i} value={item}>\n                {inputLabelField == undefined\n                  ? item\n                  : typeof inputLabelField == \"string\"\n                  ? item[inputLabelField]\n                  : typeof inputLabelField == \"function\"\n                  ? inputLabelField(item)\n                  : item}\n              </Option>\n            ))}\n        </Select>\n      </Input.Group>\n\n      <ObjectTablePicker\n        show={openPopup}\n        {...rest}\n        onClose={() => setOpenPopup(false)}\n        onChange={(emails) => {\n          setSelectedRecords([...selectedRecords, ...emails])\n        }}\n      ></ObjectTablePicker>\n    </>\n  )\n}\n","import _ from 'lodash';\nimport { Apps } from '@steedos/builder-store';\nexport function getObjectRecordUrl(objectApiName: string, redordId: any) {\n  const hrefPrefix = `/app/${Apps.currentAppId}/${objectApiName}/view/`;\n  return `${hrefPrefix}${redordId}`;\n}\n\n\n/**\n把后端请求到的records记录转换成以下treeData的格式\n[\n    {\n        title: 'Node1',\n        value: '0-0',\n        children: [\n            {\n                title: 'Child Node1',\n                value: '0-0-1',\n            },\n            {\n                title: 'Child Node2',\n                value: '0-0-2',\n            },\n        ],\n    },\n    {\n        title: 'Node2',\n        value: '0-1',\n    },\n];\n*/\nexport const getTreeDataFromRecords = (records: [] = [], nameField: string = \"name\", parentField: string = \"parent\")=>{\n  let result = [], tempParentValue: string, rootNode: any;\n  let getChildrenNodes = (parent: string)=>{\n    let nodes = [];\n    records.forEach((record: any)=>{\n      if(record.parent === parent){\n        let tempNode: any = {\n          title: record[nameField],\n          value: record._id\n        };\n        const tempChildren = getChildrenNodes(record._id);\n        if(tempChildren && tempChildren.length){\n          tempNode.children = tempChildren;\n        }\n        nodes.push(tempNode);\n      }\n    });\n    return nodes;\n  }\n  let getTreeNode = (record: any)=>{\n    tempParentValue = record[parentField];\n    let isRoot = !tempParentValue;\n    if(!isRoot){\n      const isParentExist = !!records.find((item: any)=>{\n        return item._id === tempParentValue;\n      });\n      isRoot == !isParentExist;\n    }\n    if(isRoot){\n      let tempNode: any = {\n        title: record[nameField],\n        value: record._id\n      };\n      const tempChildren = getChildrenNodes(record._id);\n      if(tempChildren && tempChildren.length){\n        tempNode.children = tempChildren;\n      }\n      return tempNode;\n    }\n  }\n  records.forEach((record)=>{\n    rootNode = getTreeNode(record);\n    if(rootNode){\n      result.push(rootNode);\n    }\n  });\n  return result;\n}","import React, { useContext, useRef, useEffect, useState } from \"react\"\nimport _ from \"lodash\"\nimport { ObjectTable } from \"./\"\nimport {\n  ProColumnType\n} from \"@ant-design/pro-table\"\nimport { observer } from \"mobx-react-lite\"\nimport { Objects, API, Settings } from \"@steedos/builder-store\"\nimport { Link } from \"react-router-dom\";\nimport { getObjectRecordUrl } from \"../utils\"\n\nexport type ObjectListViewColumnProps = {\n  fieldName: string\n} & ProColumnType\n\nexport type ObjectListViewProps<T extends ObjectListViewColumnProps> =\n  | ({\n      name?: string\n      objectApiName?: string\n      listName?: string\n      columnFields?: T[],\n      filters?: [] | string\n      onChange?: ([any]) => void\n      // filterableFields?: [string]\n    } & {\n      defaultClassName?: string\n    })\n  | any\n\nexport const getObjectListViewProColumn = (field: any) => {\n  // 把yml中的某个字段field转成ant的ProTable中的columns属性项\n  if (!field) {\n    return null\n  }\n\n  const fieldType: string = field.type\n  let proColumnProps: any = {\n    title: field.label,\n    dataIndex: field.name,\n    formItemProps: {},\n    fieldProps: {\n      field_schema: field\n    },\n  }\n  if (field.required) {\n    proColumnProps.formItemProps.required = true\n  }\n\n  if (field.sortable) {\n    proColumnProps.sorter = {\n        multiple: 1\n    };\n  }\n\n  proColumnProps.valueType = fieldType\n  \n  return proColumnProps\n}\n\nfunction getListViewFilters(listView, props){\n  let { filters, filter_scope, master } = props;\n  if(!filters){\n    filters = listView.filters;\n  }\n  if(_.isFunction(filters)){\n    try {\n      filters = filters()\n    } catch (error) {\n      console.warn(`list view filter error: `, error)\n    }\n  }\n  filters = _.isFunction(filters) ? [] : filters;\n  if(!filter_scope){\n    filter_scope = listView.filter_scope;\n  }\n  if(filter_scope === \"mine\"){\n    const filtersOwner=[[\"owner\", \"=\", API.client.getUserId()]];\n    if(filters && filters.length){\n      filters = [filtersOwner, filters];\n    }\n    else{\n      filters = filtersOwner;\n    }\n  }\n\n  if(master){\n    filters = [[master.relatedFieldApiName, \"=\", master.recordId], filters];\n  }\n\n  return filters;\n}\n\nfunction getListviewColumns(objectSchema: any, listName: any){\n  let listView = objectSchema.list_views[listName];\n  let listViewColumns = listView && listView.columns;\n  if(!listViewColumns){\n    listView = objectSchema.list_views.default;\n    listViewColumns = listView && listView.columns;\n    if(!listViewColumns){\n      listViewColumns = [objectSchema.NAME_FIELD_KEY]\n    }\n  }\n  return listViewColumns;\n}\n\nfunction getListViewColumnFields(listViewColumns: any, props: any, nameFieldKey: string){\n  let { columnFields = [], master } = props;\n  if (columnFields.length === 0) {\n    _.forEach(listViewColumns, (column: any) => {\n      const fieldName: string = _.isObject(column) ? (column as any).field : column;\n      let columnOption: any = { fieldName };\n      if(fieldName === nameFieldKey){\n        columnOption.render = (dom: any, record: any)=>{\n          return (<Link to={getObjectRecordUrl(props.objectApiName, record._id)} className=\"text-blue-600 hover:text-blue-500 hover:underline\">{dom}</Link>);\n        }\n      }\n      columnFields.push(columnOption)\n    })\n  }\n  //作为相关表时，不显示关系键\n  if(master){\n    return _.filter(columnFields, (columnField)=>{\n      if(_.isString(columnField)){\n        return columnField != master.relatedFieldApiName\n      }\n      return columnField.fieldName != master.relatedFieldApiName\n    })\n  }\n  return columnFields;\n}\n\nexport const ObjectListView = observer((props: ObjectListViewProps<any>) => {\n  let {\n    objectApiName,\n    listName = \"all\",\n    ...rest\n  } = props\n  const object = Objects.getObject(objectApiName);\n  if (object.isLoading) return (<div>Loading object ...</div>)\n  const schema = object.schema; \n  let listView = schema.list_views[listName];\n  const listViewColumns = getListviewColumns(schema, listName);\n  const columnFields = getListViewColumnFields(listViewColumns, props, schema.NAME_FIELD_KEY);\n  const filters = getListViewFilters(listView, props);\n\n  return (\n    <ObjectTable\n      objectApiName={objectApiName}\n      columnFields={columnFields}\n      filters={filters}\n      // className={[\"object-listview\", rest.className].join(\" \")}\n      {...rest}\n    />\n  )\n})","\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { observer } from \"mobx-react-lite\"\nimport * as PropTypes from 'prop-types';\nimport _ from 'lodash';\n\nexport const Iframe = observer((props:any) => {\n  return (\n    <iframe {...props}/>\n  )\n});","import React, { useContext, useRef, useEffect, useState, useImperativeHandle, forwardRef } from \"react\"\nimport _ from \"lodash\"\nimport ProField from \"@ant-design/pro-field\";\nimport { formatFiltersToODataQuery } from '@steedos/filters';\nimport useAntdMediaQuery from 'use-media-antd-query';\nimport { SortOrder } from \"antd/lib/table/interface\"\nimport { ParamsType } from \"@ant-design/pro-provider\"\nimport { observer } from \"mobx-react-lite\"\nimport { Objects, API } from \"@steedos/builder-store\"\nimport { getObjectRecordUrl } from \"../utils\"\nimport { Spin } from 'antd';\nimport {AgGridColumn, AgGridReact} from '@ag-grid-community/react';\nimport { ServerSideRowModelModule } from '@ag-grid-enterprise/server-side-row-model';\nimport { MenuModule } from '@ag-grid-enterprise/menu';\nimport { ColumnsToolPanelModule } from '@ag-grid-enterprise/column-tool-panel';\nimport Dropdown from '@salesforce/design-system-react/components/menu-dropdown'; \nimport Button from '@salesforce/design-system-react/components/button'; \n\nexport type ObjectGridColumnProps = {\n  fieldName: string\n} \n\nexport type ObjectGridProps<T extends ObjectGridColumnProps> =\n  | ({\n      name?: string\n      objectApiName?: string\n      columnFields?: T[]\n      filters?: [] | string\n      sort?: [] | string\n      onChange?: ([any]) => void\n      // filterableFields?: [string]\n    } & {\n      defaultClassName?: string\n    })\n  | any\n\nconst ProFieldRenderer = (props: any) => {\n  const { \n    value, \n    valueType = 'text',\n    fieldSchema,\n  } = props;\n  return (\n    \n    <ProField \n      mode='read'\n      valueType={valueType} \n      fieldProps={{\n        field_schema: fieldSchema\n      }}\n      text={value}\n      emptyText=''\n      />\n  ) \n}\n\nconst ProFieldEditor = forwardRef((props: any, ref) => {\n  const { \n    valueType = 'text',\n    fieldSchema\n  } = props;\n  const [value, setValue] = useState(props.value);\n\n  /* Component Editor Lifecycle methods */\n  useImperativeHandle(ref, () => {\n    return {\n        getValue() {\n            return value;\n        },\n        isPopup() {\n          return true;\n        }\n    };\n  });\n  \n  return (\n    <section className=\"slds-popover slds-popover slds-popover_edit\" role=\"dialog\">\n      <div className=\"slds-popover__body\">\n        <ProField \n          mode='edit'\n          valueType={valueType} \n          value={value}\n          onChange={(newValue)=>{\n            if (newValue?.currentTarget?.value)\n              setValue(newValue?.currentTarget?.value)\n            else\n              setValue(newValue)\n          }}\n          fieldProps={{\n            field_schema: fieldSchema\n          }}\n          />\n      </div>\n    </section>\n  ) \n});\n  \n// export const getObjectGridProColumn = (field: any, columnOption?: any) => {\n//   // 把yml中的某个字段field转成ant的ProTable中的columns属性项\n//   if (!field) {\n//     return null\n//   }\n\n//   const fieldType: string = field.type\n//   let proColumnProps: any = {\n//     title: field.label,\n//     dataIndex: field.name,\n//     formItemProps: {},\n//     fieldProps: {\n//       field_schema: field\n//     }\n//   }\n//   if (field.required) {\n//     proColumnProps.formItemProps.required = true\n//   }\n\n//   if (field.sortable) {\n//     proColumnProps.sorter = {\n//         multiple: 1\n//     };\n//   }\n\n//   proColumnProps.valueType = fieldType\n\n//   if(columnOption){\n//     proColumnProps = Object.assign({}, proColumnProps, columnOption);\n//   }\n  \n//   return proColumnProps\n// }\n\nconst checkFieldTypeSupportBetweenQuery = (type: string)=> {\n  return false;\n  // return [\"date\", \"datetime\", \"currency\", \"number\"].includes(type);\n}\n\nconst getFieldDefaultOperation = (type: any)=>{\n\tif(type && checkFieldTypeSupportBetweenQuery(type)){\n\t\treturn 'between';\n  }\n\telse if([\"textarea\", \"text\", \"code\"].includes(type)){\n\t\treturn 'contains'\n  }\n\telse{\n\t\treturn \"=\"\n  }\n}\n\nfunction getDefaultSortOrder(fieldName: any, sort:any){\n  let sortDirection:any;\n  let sortValue: any;\n  if (sort) {\n    if (typeof sort === 'string' && sort.length > 0) {\n      let arr = [];\n      arr = sort.split(',');\n      sortValue = _.map(arr, (value, key) => {\n        if (value.indexOf(' ')) {\n          return arr[key] = value.split(' ');\n        } else {\n          return arr[key] = [value]\n        }\n      })\n    } else {\n      sortValue = sort;\n    }\n    if (sortValue.length > 0) {\n      _.forEach(sortValue, (ele) => {\n        if (ele[0] === fieldName) {\n          sortDirection = ele[1] === 'desc' ? 'descend' : 'ascend';\n        }\n      })\n    }\n  }\n  return sortDirection;\n}\n\n\nconst RowActions = (props: any) => {\n  return (\n    <Dropdown\n      assistiveText={{ icon: 'Options' }}\n      iconCategory=\"utility\"\n      iconName=\"down\"\n      iconVariant=\"border-filled\"\n      iconSize='x-small'\n      width='x-small'\n      menuPosition=\"overflowBoundaryElement\"\n      onSelect={(option) => {\n        if (option.value === 'delete') {\n          // deleteRow(props)\n        }\n      }}\n      options={[\n        { label: '删除', value: 'delete' }\n      ]}\n    />\n  )\n}\n\nexport const ObjectGrid = observer((props: ObjectGridProps<any>) => {\n\n  const {\n    objectApiName,\n    columnFields = [],\n    filters: defaultFilters,\n    sort,\n    defaultClassName,\n    onChange,\n    toolbar,\n    ...rest\n  } = props\n\n  const [totalRecords, setTotalRecords] = useState(0)\n\n  const colSize = useAntdMediaQuery();\n  const isMobile = (colSize === 'sm' || colSize === 'xs') && !props.disableMobile;\n\n  const object = Objects.getObject(objectApiName);\n  if (object.isLoading) return (<div><Spin/></div>)\n  // const selfTableRef = useRef(null)\n\n  // let defaultSort: any = {};\n  // const proColumns = []\n  // if (object.schema && object.schema.fields) {\n  //   _.forEach(\n  //     columnFields,\n  //     ({ fieldName, ...columnItem }: ObjectGridColumnProps) => {\n  //       if (columnItem.hideInTable) return\n  //       let columnOption: any = {};\n  //       const defaultSortOrder = getDefaultSortOrder(fieldName,sort)\n  //       if(defaultSortOrder){\n  //         columnOption.defaultSortOrder = defaultSortOrder;\n  //         defaultSort[fieldName] = defaultSortOrder;\n  //       }\n  //       const  proColumn = getObjectGridProColumn(object.schema.fields[fieldName], columnOption)\n  //       if (proColumn) {\n  //         proColumns.push({ ...proColumn, ...columnItem })\n  //       }\n  //     }\n  //   )\n  // }\n\n// const request = async (\n//     params: any & {\n//       pageSize?: number\n//       current?: number\n//       keyword?: string\n//     },\n//     sort: Record<string, SortOrder>,\n//     filter: Record<string, React.ReactText[]>\n//   ): Promise<any> => {\n\n//     // 第一个参数 params 查询表单和 params 参数的结合\n//     // 第一个参数中一定会有 pageSize 和  current ，这两个参数是 antd 的规范\n//     // 这里需要返回一个 Promise,在返回之前你可以进行数据转化\n//     // 如果需要转化参数可以在这里进行修改\n//     /*\n//     const msg = await myQuery({\n//       page: params.current,\n//       pageSize: params.pageSize,\n//     });\n//     return {\n//       data: msg.result,\n//       // success 请返回 true，\n//       // 不然 table 会停止解析数据，即使有数据\n//       success: boolean,\n//       // 不传会使用 data 的长度，如果是分页一定要传\n//       total: number,\n//     };\n//     */\n\n//     const { current, pageSize, ...searchFilters } = params\n//     let filters: any = [], keyFilters: any = [];\n//     //searchFilters中包括params中自定义参数及顶部搜索框字段参数，字段名不可能是__开头，所以params中自定义参数以__开头可区分它们\n//     const {__objectApiName, __columnFields, __defaultFilters, ...restFilters} = searchFilters;\n//     keyFilters = Object.keys(restFilters).map((key) => {\n//       const field = object.schema.fields[key];\n//       return [key, getFieldDefaultOperation(field && field.type), searchFilters[key]];\n//     });\n    \n//     if (__defaultFilters && __defaultFilters.length) {\n//       if(keyFilters && keyFilters.length){\n//         if (_.isArray(__defaultFilters)) {\n//             filters = [__defaultFilters, keyFilters]\n//         }\n//         else {\n//             const odataKeyFilters = formatFiltersToODataQuery(keyFilters);\n//             filters = `(${__defaultFilters}) and (${odataKeyFilters})`;\n//         }\n//       }\n//       else{\n//         filters = __defaultFilters;\n//       }\n//     }\n//     else{\n//       filters = keyFilters;\n//     }\n\n//     // TODO: 这里antd的request请求函数与ObjectGrid组件传入的filters,sort等格式不一样，需要转换处理\n//     const fields = __columnFields.map((n: any) => {\n//       return n.fieldName\n//     })\n//     // TODO: ant.design的bug（defaultSortOrder 和 sorter存在时sort没获取到设置的初始值），所以这里\n//     // 设置下sort的初始值， 后期修复这个bug后以下三行代码可以 删除。\n//     if(_.isEmpty(sort) && !_.isEmpty(defaultSort)){\n//       sort = defaultSort;\n//     }\n//     const result = await API.requestRecords(\n//       __objectApiName,\n//       filters,\n//       fields,\n//       {\n//         pageSize: params.pageSize as number,\n//         current: params.current as number,\n//         sort: sort\n//           ? Object.keys(sort).map((sk) => [\n//               sk,\n//               sort[sk] == \"ascend\" ? \"asc\" : \"desc\",\n//             ])\n//           : [],\n//       }\n//     )\n//     setTotalRecords(result[\"@odata.count\"])\n//     return {\n//       data: result.value,\n//       success: true,\n//       total: result[\"@odata.count\"],\n//     }\n//   }\n\n  const getDataSource = () => {\n    return {\n        // called by the grid when more rows are required\n        getRows: params => {\n\n            // // get data for request from server\n            // const response = server.getData(params.request);\n\n            // if (response.success) {\n            //     // supply rows for requested block to grid\n            //     params.success({\n            //         rowData: response.rows\n            //     });\n            // } else {\n            //     // inform grid request failed\n            //     params.fail();\n            // }\n            console.log(params)\n            const fields = ['name']\n            _.forEach(columnFields, ({ fieldName, ...columnItem }: ObjectGridColumnProps) => {\n              fields.push(fieldName)\n            });\n            API.requestRecords(\n              objectApiName,\n              [],\n              fields,{}).then((data)=>{\n\n                params.success({\n                  rowData: data.value\n                });\n            })\n        }\n    };\n  }\n\n  // const search = isMobile? false : {\n  //   filterType: 'light',\n  // }\n\n  const getColumns = ()=>{\n\n    const columns:any[] = [{\n      resizable: false,\n      width: 35,\n      maxWidth: 35,\n      minWidth: 35,\n      checkboxSelection: true,\n    }];\n    _.forEach(columnFields, ({ fieldName, ...columnItem }: ObjectGridColumnProps) => {\n      const field = object.schema.fields[fieldName]\n      columns.push({\n        field: fieldName,\n        headerName: field.label?field.label:fieldName,\n        width: field.is_wide? 300: 150,\n        minWidth: field.is_wide? 300: 150,\n        resizable: true,\n        filter: true,\n        cellRenderer: 'proFieldRenderer',\n        cellRendererParams: {\n          fieldSchema: field,\n          valueType: field.type,\n        },\n        cellEditor: 'proFieldEditor',\n        cellEditorParams: {\n          fieldSchema: field,\n          valueType: field.type,\n        },\n        // key: fieldName,\n        // dataIndex: fieldName,\n        // title: field.label?field.label:fieldName,\n        // valueType: field.type,\n        editable: !field.readonly,\n      })\n    });\n    // 操作按钮\n    columns.push({\n      width: 50,\n      maxWidth: 50,\n      minWidth: 50,\n      resizable: false,\n      cellRenderer: 'rowActions',\n      cellEditor: 'rowActions',\n    });\n    return columns\n  }\n\n  // return (\n  //   <ProTable\n  //     request={request}\n  //     columns={proColumns}\n  //     rowKey={rest.rowKey || \"_id\"}\n  //     rowSelection={rest.rowSelection || { onChange }}\n  //     pagination={{ ...rest.pagination, hideOnSinglePage: true }}\n  //     columnEmptyText={false}\n  //     actionRef={rest.actionRef || selfTableRef}\n  //     onChange={() => {\n  //       ;(rest.actionRef || selfTableRef).current.reload()\n  //     }}\n  //     params={{\n  //       __objectApiName: objectApiName,\n  //       __columnFields: columnFields,\n  //       __defaultFilters: defaultFilters,\n  //     }}\n  //     search={search}\n  //     toolbar={Object.assign({}, {\n  //       subTitle: `${totalRecords} 个项目`\n  //     }, toolbar)}\n  //     size=\"small\"\n  //     className={[\"object-table\", rest.className].join(\" \")}\n  //     {...rest}\n  //   />\n  // )\n  return (\n\n    <div className=\"ag-theme-balham\">\n      <AgGridReact\n        columnDefs={getColumns()}\n        rowModelType='serverSide'\n        pagination={true}\n        paginationPageSize={50}\n        rowSelection='multiple'\n        modules={[ServerSideRowModelModule, MenuModule, ColumnsToolPanelModule]}\n        stopEditingWhenGridLosesFocus={true}\n        serverSideDatasource={getDataSource()}\n        frameworkComponents = {{\n          proFieldRenderer: ProFieldRenderer,\n          proFieldEditor: ProFieldEditor,\n          rowActions: RowActions,\n        }}\n      />\n    </div>\n  )\n})\n","\nimport React from \"react\";\nimport { RequestData } from \"@ant-design/pro-table\";\n\nexport type RecordQueryRequestParams = {\n  pageSize: number,\n  current: number,\n  sort: any\n  // filter: any\n} \n\nconst defaultRequestObject = async ( objectApiName:string) =>{\n  throw new Error(`requestObject ${objectApiName} failed, you should impl this function in ObjectProvider.`)\n}\n\nconst defaultRequestRecords = async ( objectApiName:string, filters:any, fields:any, params?: RecordQueryRequestParams ) =>{\n  throw new Error(`requestRecords ${objectApiName} failed, you should impl this function in ObjectProvider.`)\n}\n\nconst defaultUpdateRecord = async (objectApiName:string, objectRecordId:string, formData:any) =>{\n  throw new Error(`submitForm ${objectApiName} update id: ${objectRecordId} failed, you should impl this function in ObjectProvider.`)\n}\n\nconst defaultInsertRecord = async (objectApiName:string, formData:any) =>{\n  throw new Error(`submitForm ${objectApiName} add record failed, you should impl this function in ObjectProvider.`)\n}\n\nexport type ObjectContextValueType = {\n  locale?: string,\n  queryClient?: any,\n  requestObject: ( objectApiName:string) => Promise<object | Error>\n  requestRecords: <T extends Record<string, any>>( objectApiName:string, filters:any, fields:any, params?: RecordQueryRequestParams ) => Promise<Partial<RequestData<T>>>\n  updateRecord: (objectApiName:string, objectRecordId:string, formData:any ) => Promise<object | Error>\n  insertRecord: (objectApiName:string, formData:any ) => Promise<object | Error>\n}\n\nexport const ObjectContext = React.createContext<ObjectContextValueType>({\n  requestObject: defaultRequestObject,\n  requestRecords: defaultRequestRecords,\n  updateRecord: defaultUpdateRecord,\n  insertRecord: defaultInsertRecord\n});\n","import React from 'react'\nimport ProField from \"@ant-design/pro-field\";\nimport { CheckIcon } from '@chakra-ui/icons'\n\nexport const boolean = {\n  render: (text: any, props: any)=> {\n    if (text) \n      return (<CheckIcon/>)\n    else \n      return (<span></span>);    \n  },\n  renderFormItem: (_: any, props: any) => {\n    return (\n      <ProField mode='edit' valueType='switch' {...props} />\n    )\n  },\n}\n\n","import React from 'react';\nimport ProField from \"@ant-design/pro-field\";\n\n// 数值类型字段\n// value 值为数字\n// 编辑和显示时需要处理小数位数\nexport const currency = {\n  render: (text: any, props: any) => {\n    return (\n      <ProField mode='read' valueType='digit' {...props} />\n    )\n  },\n  renderFormItem: (_: any, props: any) => {\n    return (\n      <ProField mode='edit' valueType='digit' {...props} />\n    )\n  }\n}","import React from 'react';\nimport ProField from \"@ant-design/pro-field\";\n\n// 日期时间类型字段\n// value 值为GMT标准时间\nexport const datetime = {\n  render: (text: any, props: any) => {\n    return (\n      <ProField mode='read' valueType='dateTime' {...props} />\n    )\n  },\n  renderFormItem: (_: any, props: any) => {\n    return (\n      <ProField mode='edit' valueType='dateTime' {...props} />\n    )\n  }\n}","import React from 'react'\nimport ProField from \"@ant-design/pro-field\";\n\nexport const email = {\n  render: (text: any, { fieldProps }: any)=> {\n    const link = \"mailto:\" + text;\n    return (<a href={link}>{text}</a>)\n  },\n  renderFormItem: (_: any, props: any) => (\n    <ProField mode='edit' valueType='text' {...props} />\n  ),\n}\n\n","import React from 'react';\nimport ProField from \"@ant-design/pro-field\";\n\n// 数值类型字段\n// value 值为数字\n// 编辑和显示时需要处理小数位数\nexport const number = {\n  render: (text: any, props: any) => {\n    return (\n      <ProField mode='read' valueType='digit' {...props} />\n    )\n  },\n  renderFormItem: (_: any, props: any) => {\n    return (\n      <ProField mode='edit' valueType='digit' {...props} />\n    )\n  }\n}","import React, { Fragment, useMemo } from 'react';\n\nimport toNumber from 'lodash.tonumber';\nimport ProField from \"@ant-design/pro-field\";\n\n// 百分比类型字段\n// value 值为数字\n// 编辑和显示时需要处理小数位数\nexport const percent = {\n  render: (text: any, props: any) => {\n\n    const realValue = useMemo(\n      () =>\n        typeof text === 'string' && (text as string).includes('%')\n          ? 100*toNumber((text as string).replace('%', ''))\n          : 100*toNumber(text),\n      [text],\n    );\n    return (\n      <span>{realValue}%</span>\n    )\n  },\n  renderFormItem: (_: any, props: any) => {\n    return (\n      <ProField mode='edit' valueType='digit' {...props} />\n    )\n  }\n}","import React, { useState } from 'react'\nimport _ from 'lodash';\nimport FieldSelect from '@ant-design/pro-field/es/components/Select';\n\nexport const select = {\n  render: (text: any, props: any)=> {\n    const { valueType, mode, fieldProps, ...rest } = props;\n    const { field_schema: fieldSchema = {},depend_field_values: dependFieldValues={} } = fieldProps;\n    let tags:any;\n    let options = fieldSchema.optionsFunction ? fieldSchema.optionsFunction : fieldSchema.options ;\n    options = _.isFunction(options) ? options(dependFieldValues) : options;\n    const value = fieldProps.value || props.text;//ProTable那边fieldProps.value没有值，只能用text\n    tags = _.filter(options,(optionItem: any)=>{\n        return fieldSchema.multiple ? value.indexOf(optionItem.value) > -1 : optionItem.value === value;\n    })\n    return (<React.Fragment>{tags.map((tagItem, index)=>{return (\n        <React.Fragment key={tagItem.value}>\n            {index > 0 && ', '}\n            { (tagItem.label) }\n        </React.Fragment>\n    )})}</React.Fragment>)\n  },\n  renderFormItem: (text: any, props: any) => {\n    const [params, setParams] = useState({open: false,openTag: null});\n    const { fieldProps={} } = props;\n    const { field_schema: fieldSchema = {},depend_field_values: dependFieldValues={} } = fieldProps;\n    const { multiple ,optionsFunction} = fieldSchema;\n    let options = optionsFunction ? optionsFunction : fieldSchema.options;\n    if (multiple){\n      fieldProps.mode = 'multiple';\n    }\n    let proFieldProps:any = {};\n    let request:any;\n    let onDropdownVisibleChange:any;\n\n    if(_.isFunction(options)){\n      request = async (params: any, props: any) => {\n        dependFieldValues.__keyWords = params.keyWords;\n        const results = await options(dependFieldValues);\n        return results;\n      };\n      onDropdownVisibleChange = (open: boolean) => {\n        if (open) {\n            setParams({ open, openTag: new Date() });\n        }\n      }\n      proFieldProps = {\n        request,\n        params,\n        onDropdownVisibleChange,\n      }\n    }else{\n      props.fieldProps.options = options;\n    }\n    proFieldProps.showSearch=true;\n    proFieldProps.optionFilterProp='label';\n    // TODO: multiple：如果是true, 后期 需要 支持对已选中项进行拖动排序\n    return (\n      <FieldSelect mode='edit' {...props} {...proFieldProps} />\n    )\n  },\n}","import React from 'react'\nimport ProField from \"@ant-design/pro-field\";\nimport { CheckIcon } from '@chakra-ui/icons'\n\nexport const toggle = {\n  render: (text: any, props: any)=> {\n    if (text) \n      return (<CheckIcon/>)\n    else \n      return (<span></span>);    \n  },\n  renderFormItem: (_: any, props: any) => {\n    return (\n      <ProField mode='edit' valueType='switch' {...props} />\n    )\n  },\n}\n\n","import React from 'react'\nimport { Field } from \"@steedos/builder-form\";\n\nexport const url = {\n  render: (text: any, { fieldProps }: any)=> {\n    return (<a href={text}>{text}</a>)\n  },\n  renderFormItem: (_: any, props: any) => (\n    <Field mode='edit' type='text' {...props} />\n  ),\n}\n\n","import React from 'react';\n\nimport AppLauncher from '@salesforce/design-system-react/components/app-launcher'; \nimport AppLauncherLink from '@salesforce/design-system-react/components/app-launcher/link';\nimport AppLauncherTile from '@salesforce/design-system-react/components/app-launcher/tile';\nimport AppLauncherExpandableSection from '@salesforce/design-system-react/components/app-launcher/expandable-section';\n\nimport GlobalNavigationBar from '@salesforce/design-system-react/components/global-navigation-bar';\nimport GlobalNavigationBarRegion from '@salesforce/design-system-react/components/global-navigation-bar/region';\n\nimport Button from '@salesforce/design-system-react/components/button';\nimport Search from '@salesforce/design-system-react/components/input/search';\nimport IconSettings from '@salesforce/design-system-react/components/icon-settings';\nimport actionSprite from '@salesforce-ux/design-system/assets/icons/action-sprite/svg/symbols.svg';\nimport customSprite from '@salesforce-ux/design-system/assets/icons/custom-sprite/svg/symbols.svg';\nimport standardSprite from '@salesforce-ux/design-system/assets/icons/standard-sprite/svg/symbols.svg';\nimport utilitySprite from '@salesforce-ux/design-system/assets/icons/utility-sprite/svg/symbols.svg';\nimport Icon from '@salesforce/design-system-react/components/icon'; \nimport _ from 'lodash';\n\nfunction getTabs(apps){\n\tlet tabs = [];\n\t_.each(apps, function(app){\n\t\t_.each(app.children, (tab)=>{\n\t\t\ttabs.push(Object.assign({}, tab, {appApiName: app.id}))\n\t\t})\n\t})\n\treturn _.unionBy(tabs, \"id\");;\n}\n\nexport class SteedosAppLauncher extends React.Component {\n\tstatic displayName = 'Steedos App Launcher';\n\tstate = {\n\t\tsearch: '',\n\t\topen: false,\n\t};\n\n\tonSearch = (event) => {\n\t\tthis.setState({ search: event.target.value });\n\t};\n\ttriggerOnClick = ()=> {\n\t\tthis.setState({open: !this.state.open})\n\t}\n\tonClick=(value, e)=>{\n\t\tif(this.props.history){\n\t\t\tif(value.type ==='url'){\n\t\t\t\tthis.props.history.push(`/app/${value.appApiName}/frame/${value.id}`, {src: value.path, title: value.name});\n\t\t\t}else{\n\t\t\t\tthis.props.history.push(value.path);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\tthis.setState({open: false})\n\t}\n\tonClose=()=>{\n\t\tthis.setState({open: false})\n\t}\n\trender() {\n\t\tconst search = (\n\t\t\t<Search\n\t\t\t\tonChange={(event) => {\n\t\t\t\t\tconsole.log('Search term:', event.target.value);\n\t\t\t\t\tthis.onSearch(event);\n\t\t\t\t}}\n\t\t\t\tplaceholder=\"搜索应用程序或项目...\"\n\t\t\t\tassistiveText={{ label: '搜索应用程序或项目...' }}\n\t\t\t/>\n\t\t);\n\t\tconst headerButton = <Button label=\"App Exchange\" />;\n\t\tlet { currentApp, apps  } = this.props;\n\t\tif(!currentApp){\n\t\t\tcurrentApp = {}\n\t\t}\n\t\tif(!apps){\n\t\t\tapps = []\n\t\t}\n\t\tconst tabs = getTabs(apps);\n\t\treturn (\n\t\t\t<IconSettings actionSprite={actionSprite} standardSprite={standardSprite} customSprite={customSprite} utilitySprite={utilitySprite}>\n\t\t\t\t<GlobalNavigationBar>\n\t\t\t\t\t<GlobalNavigationBarRegion region=\"primary\">\n\t\t\t\t\t\t<AppLauncher\n\t\t\t\t\t\t\ttitle=\"应用程序启动器\"\n\t\t\t\t\t\t\ttriggerName={currentApp.name}\n\t\t\t\t\t\t\tsearch={search}\n\t\t\t\t\t\t\t// modalHeaderButton={headerButton}\n\t\t\t\t\t\t\tonClose={this.onClose}\n\t\t\t\t\t\t\tisOpen={this.state.open}\n\t\t\t\t\t\t\ttriggerOnClick={this.triggerOnClick}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<AppLauncherExpandableSection title=\"所有应用程序\">\n\t\t\t\t\t\t\t\t{_.filter(apps, (app)=> { return app.name.indexOf(this.state.search) > -1; })?.map((app, i) => (\n\t\t\t\t\t\t\t\t\t<AppLauncherTile\n\t\t\t\t\t\t\t\t\t\tkey={app.id}\n\t\t\t\t\t\t\t\t\t\tdescription={app.description}\n\t\t\t\t\t\t\t\t\t\t// iconText={app.icon}\n\t\t\t\t\t\t\t\t\t\ticonNode={<Icon\n\t\t\t\t\t\t\t\t\t\t\tassistiveText={{ label: app.name }}\n\t\t\t\t\t\t\t\t\t\t\tcategory=\"standard\"\n\t\t\t\t\t\t\t\t\t\t\tname={app.icon}\n\t\t\t\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t\t\t\t\tsearch={this.state.search}\n\t\t\t\t\t\t\t\t\t\ttitle={app.name}\n\t\t\t\t\t\t\t\t\t\tonClick={(e)=>{return this.onClick(app,e)}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</AppLauncherExpandableSection>\n\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t<AppLauncherExpandableSection title=\"所有项目\">\n\t\t\t\t\t\t\t\t{_.filter(tabs, (tab)=> { return tab.name.indexOf(this.state.search) > -1; })?.map((tab, i) => (\n\t\t\t\t\t\t\t\t\t<AppLauncherLink key={tab.id} search={this.state.search} onClick={(e)=>{return this.onClick(tab,e)}} >{tab.name}</AppLauncherLink>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</AppLauncherExpandableSection>\n\t\t\t\t\t\t</AppLauncher>\n\t\t\t\t\t</GlobalNavigationBarRegion>\n\t\t\t\t</GlobalNavigationBar>\n\t\t\t</IconSettings>\n\t\t);\n\t}\n}\n","import React from 'react';\n\nimport Button from '@salesforce/design-system-react/components/button';\nimport ButtonGroup from '@salesforce/design-system-react/components/button-group';\nimport Dropdown from '@salesforce/design-system-react/components/menu-dropdown';\nimport DropdownTrigger from '@salesforce/design-system-react/components/menu-dropdown/button-trigger';\nimport Icon from '@salesforce/design-system-react/components/icon';\nimport IconSettings from '@salesforce/design-system-react/components/icon-settings';\nimport PageHeader from '@salesforce/design-system-react/components/page-header';\nimport PageHeaderControl from '@salesforce/design-system-react/components/page-header/control';\n\nexport class SteedosListView extends React.Component {\n\tstatic displayName = 'ObjectHomePageHeaderExample';\n\n\trender() {\n\t\tconst actions = () => (\n\t\t\t<PageHeaderControl>\n\t\t\t\t<ButtonGroup variant=\"list\" id=\"button-group-page-header-actions\">\n\t\t\t\t\t<Button label=\"New\" />\n\t\t\t\t\t<Dropdown\n\t\t\t\t\t\talign=\"right\"\n\t\t\t\t\t\tassistiveText={{ icon: 'More Options' }}\n\t\t\t\t\t\ticonCategory=\"utility\"\n\t\t\t\t\t\ticonName=\"down\"\n\t\t\t\t\t\ticonVariant=\"border-filled\"\n\t\t\t\t\t\tid=\"page-header-dropdown-object-home-nav-right\"\n\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t{ label: 'Menu Item One', value: 'A0' },\n\t\t\t\t\t\t\t{ label: 'Menu Item Two', value: 'B0' },\n\t\t\t\t\t\t\t{ label: 'Menu Item Three', value: 'C0' },\n\t\t\t\t\t\t\t{ type: 'divider' },\n\t\t\t\t\t\t\t{ label: 'Menu Item Four', value: 'D0' },\n\t\t\t\t\t\t]}\n\t\t\t\t\t/>\n\t\t\t\t</ButtonGroup>\n\t\t\t</PageHeaderControl>\n\t\t);\n\n\t\tconst controls = () => (\n\t\t\t<React.Fragment>\n\t\t\t\t<PageHeaderControl>\n\t\t\t\t\t<Dropdown\n\t\t\t\t\t\talign=\"right\"\n\t\t\t\t\t\tid=\"page-header-dropdown-object-home-content-right\"\n\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t{ label: 'Menu Item One', value: 'A0' },\n\t\t\t\t\t\t\t{ label: 'Menu Item Two', value: 'B0' },\n\t\t\t\t\t\t\t{ label: 'Menu Item Three', value: 'C0' },\n\t\t\t\t\t\t\t{ type: 'divider' },\n\t\t\t\t\t\t\t{ label: 'Menu Item Four', value: 'D0' },\n\t\t\t\t\t\t]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<DropdownTrigger>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tassistiveText={{ icon: 'List View Controls' }}\n\t\t\t\t\t\t\t\ticonCategory=\"utility\"\n\t\t\t\t\t\t\t\ticonName=\"settings\"\n\t\t\t\t\t\t\t\ticonVariant=\"more\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</DropdownTrigger>\n\t\t\t\t\t</Dropdown>\n\t\t\t\t</PageHeaderControl>\n\t\t\t\t<PageHeaderControl>\n\t\t\t\t\t<Dropdown\n\t\t\t\t\t\talign=\"right\"\n\t\t\t\t\t\tassistiveText={{ icon: 'Change view' }}\n\t\t\t\t\t\ticonCategory=\"utility\"\n\t\t\t\t\t\ticonName=\"settings\"\n\t\t\t\t\t\ticonVariant=\"more\"\n\t\t\t\t\t\tid=\"page-header-dropdown-object-home-content-right-2\"\n\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t{ label: 'Menu Item One', value: 'A0' },\n\t\t\t\t\t\t\t{ label: 'Menu Item Two', value: 'B0' },\n\t\t\t\t\t\t\t{ label: 'Menu Item Three', value: 'C0' },\n\t\t\t\t\t\t\t{ type: 'divider' },\n\t\t\t\t\t\t\t{ label: 'Menu Item Four', value: 'D0' },\n\t\t\t\t\t\t]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<DropdownTrigger>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tassistiveText={{ icon: 'Change view' }}\n\t\t\t\t\t\t\t\ticonCategory=\"utility\"\n\t\t\t\t\t\t\t\ticonName=\"table\"\n\t\t\t\t\t\t\t\ticonVariant=\"more\"\n\t\t\t\t\t\t\t\tvariant=\"icon\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</DropdownTrigger>\n\t\t\t\t\t</Dropdown>\n\t\t\t\t</PageHeaderControl>\n\t\t\t\t<PageHeaderControl>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tassistiveText={{ icon: 'Edit List' }}\n\t\t\t\t\t\ticonCategory=\"utility\"\n\t\t\t\t\t\ticonName=\"edit\"\n\t\t\t\t\t\ticonVariant=\"border-filled\"\n\t\t\t\t\t\tvariant=\"icon\"\n\t\t\t\t\t/>\n\t\t\t\t</PageHeaderControl>\n\t\t\t\t<PageHeaderControl>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tassistiveText={{ icon: 'Refresh' }}\n\t\t\t\t\t\ticonCategory=\"utility\"\n\t\t\t\t\t\ticonName=\"refresh\"\n\t\t\t\t\t\ticonVariant=\"border-filled\"\n\t\t\t\t\t\tvariant=\"icon\"\n\t\t\t\t\t/>\n\t\t\t\t</PageHeaderControl>\n\t\t\t\t<PageHeaderControl>\n\t\t\t\t\t<ButtonGroup variant=\"list\" id=\"button-group-page-header-controls\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tassistiveText={{ icon: 'Charts' }}\n\t\t\t\t\t\t\ticonCategory=\"utility\"\n\t\t\t\t\t\t\ticonName=\"chart\"\n\t\t\t\t\t\t\ticonVariant=\"border-filled\"\n\t\t\t\t\t\t\tvariant=\"icon\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tassistiveText={{ icon: 'Filters' }}\n\t\t\t\t\t\t\ticonCategory=\"utility\"\n\t\t\t\t\t\t\ticonName=\"filterList\"\n\t\t\t\t\t\t\ticonVariant=\"border-filled\"\n\t\t\t\t\t\t\tvariant=\"icon\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</PageHeaderControl>\n\t\t\t</React.Fragment>\n\t\t);\n\n\t\treturn (\n\t\t\t<IconSettings iconPath=\"/assets/icons\">\n\t\t\t\t<PageHeader\n\t\t\t\t\ticon={\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\tassistiveText={{ label: 'Opportunity' }}\n\t\t\t\t\t\t\tcategory=\"standard\"\n\t\t\t\t\t\t\tname=\"opportunity\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\tinfo=\"10 items • Updated 13 minutes ago\"\n\t\t\t\t\tlabel=\"Opportunities\"\n\t\t\t\t\tnameSwitcherDropdown={\n\t\t\t\t\t\t<Dropdown\n\t\t\t\t\t\t\tassistiveText={{ icon: 'Name Switcher' }}\n\t\t\t\t\t\t\tbuttonClassName=\"slds-button_icon-small\"\n\t\t\t\t\t\t\tbuttonVariant=\"icon\"\n\t\t\t\t\t\t\ticonCategory=\"utility\"\n\t\t\t\t\t\t\ticonName=\"down\"\n\t\t\t\t\t\t\tid=\"page-header-name-switcher-dropdown\"\n\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t{ label: 'Menu Item One', value: 'A0' },\n\t\t\t\t\t\t\t\t{ label: 'Menu Item Two', value: 'B0' },\n\t\t\t\t\t\t\t\t{ label: 'Menu Item Three', value: 'C0' },\n\t\t\t\t\t\t\t\t{ label: 'Menu Item Four', value: 'D0' },\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\tonRenderActions={actions}\n\t\t\t\t\tonRenderControls={controls}\n\t\t\t\t\ttitle=\"Recently Viewed\"\n\t\t\t\t\ttruncate\n\t\t\t\t\tvariant=\"object-home\"\n\t\t\t\t/>\n\t\t\t</IconSettings>\n\t\t);\n\t}\n}","import React from 'react';\nimport IconSettings from '@salesforce/design-system-react/components/icon-settings';\nimport actionSprite from '@salesforce-ux/design-system/assets/icons/action-sprite/svg/symbols.svg';\nimport customSprite from '@salesforce-ux/design-system/assets/icons/custom-sprite/svg/symbols.svg';\nimport standardSprite from '@salesforce-ux/design-system/assets/icons/standard-sprite/svg/symbols.svg';\nimport utilitySprite from '@salesforce-ux/design-system/assets/icons/utility-sprite/svg/symbols.svg';\nimport Icon from '@salesforce/design-system-react/components/icon'; \n\nexport class SteedosIcon extends React.Component {\n\trender() {\n\t\tlet { category=\"standard\", name, size=\"small\", assistiveText  } = this.props;\n\t\treturn (\n\t\t\t<IconSettings actionSprite={actionSprite} standardSprite={standardSprite} customSprite={customSprite} utilitySprite={utilitySprite}>\n\t\t\t\t<Icon\n                    assistiveText={assistiveText}\n                    category={category}\n                    name={name}\n                    size={size}\n                />\n\t\t\t</IconSettings>\n\t\t);\n\t}\n}\n","import React from 'react';\nimport IconSettings from '@salesforce/design-system-react/components/icon-settings';\nimport actionSprite from '@salesforce-ux/design-system/assets/icons/action-sprite/svg/symbols.svg';\nimport customSprite from '@salesforce-ux/design-system/assets/icons/custom-sprite/svg/symbols.svg';\nimport standardSprite from '@salesforce-ux/design-system/assets/icons/standard-sprite/svg/symbols.svg';\nimport utilitySprite from '@salesforce-ux/design-system/assets/icons/utility-sprite/svg/symbols.svg';\nimport Icon from '@salesforce/design-system-react/components/icon'; \n\nexport class SteedosIconSettings extends React.Component {\n\trender() {\n\t\tlet { children } = this.props;\n\t\treturn (\n\t\t\t<IconSettings actionSprite={actionSprite} standardSprite={standardSprite} customSprite={customSprite} utilitySprite={utilitySprite}>\n\t\t\t\t{children}\n\t\t\t</IconSettings>\n\t\t);\n\t}\n}\n","import React, { useState } from \"react\";\nimport { formatFiltersToODataQuery } from '@steedos/filters';\nimport { Tag , Select, Spin, TreeSelect } from 'antd';\nimport _, { isObject, result, values } from 'lodash';\nimport { Objects, API } from '@steedos/builder-store';\nimport { observer } from \"mobx-react-lite\";\nimport FieldSelect from '@ant-design/pro-field/es/components/Select';\nimport { Link } from \"react-router-dom\";\nimport { getObjectRecordUrl } from \"../utils\";\nimport { SteedosIcon } from '@steedos/builder-lightning';\nimport { getTreeDataFromRecords } from '../utils';\nimport \"./lookup.less\"\n\nconst { Option } = Select;\n// 相关表类型字段\n// 通过下拉框显示相关表中的数据，可以搜索\n// 参数 props.reference_to:\nexport const LookupField = observer((props:any) => {\n    const [params, setParams] = useState({open: false,openTag: null});\n    const { valueType, mode, fieldProps, request, ...rest } = props;\n    const { field_schema: fieldSchema = {},depend_field_values: dependFieldValues={},onChange } = fieldProps;\n    const { reference_to, reference_sort,reference_limit, showIcon, multiple, reference_to_field = \"_id\", filters: fieldFilters = [],filtersFunction } = fieldSchema;\n    let value= fieldProps.value || props.text;//ProTable那边fieldProps.value没有值，只能用text\n    let valueOriginal = value;\n    let tags:any[] = [];\n    let referenceTos = _.isFunction(reference_to) ? reference_to() : reference_to;\n    let defaultReferenceTo:any;\n    if(_.isArray(referenceTos)){\n        if(value && value.o){\n            defaultReferenceTo = value.o;\n        }else{\n            defaultReferenceTo = referenceTos[0];\n        }\n    }\n    let [referenceTo, setReferenceTo] = useState(_.isArray(referenceTos) ? defaultReferenceTo : referenceTos);\n    let [selectItemLabel, setSelectItemLabel] = useState('');\n    // optionsFunction优先options\n    let options = fieldSchema.optionsFunction ? fieldSchema.optionsFunction : fieldSchema.options ;\n    // if(_.isArray(referenceTos) && value ){\n        if(_.isObject(value) && !_.isArray(value)){\n            value=value['ids'];\n        }\n    //}\n    let referenceToObject,referenceToObjectSchema,referenceToLableField, referenceToObjectIcon;\n    if(referenceTo){\n        referenceToObject = Objects.getObject(referenceTo);\n        if (referenceToObject.isLoading) return (<div><Spin/></div>);\n        referenceToObjectSchema = referenceToObject.schema;\n        referenceToLableField = referenceToObjectSchema[\"NAME_FIELD_KEY\"] ? referenceToObjectSchema[\"NAME_FIELD_KEY\"] : \"name\";\n        if(referenceToObjectSchema.icon){\n            referenceToObjectIcon = referenceToObjectSchema.icon;\n        }\n    }\n    let selectItem=[];\n    let recordListData: any;\n    let filter:any;\n    let fields:any;\n    if(referenceToObject && value){\n        filter = [[reference_to_field, '=', value]];\n        fields = [reference_to_field, referenceToLableField, \"_id\"];\n    }\n    if(mode==='read'){\n        if(value){\n            if (referenceTo) {\n                const recordList = referenceToObject.getRecordList(filter, fields);\n                if (recordList.isLoading) return (<div><Spin/></div>);\n                recordListData = recordList.data;\n                if (recordListData && recordListData.value && recordListData.value.length > 0) {\n                    let tagsValueField = reference_to_field;\n                    if(reference_to_field && reference_to_field !== \"_id\"){\n                        // 选人字段只读时链接应该显示的是space_users的_id字段值，而不是user字段值\n                        tagsValueField = \"_id\"\n                    }\n                    selectItem = recordListData.value.map((recordItem: any) => { \n                        return { value: recordItem[tagsValueField], label: recordItem[referenceToLableField] } \n                    });\n                }\n                tags = selectItem;\n            }else{\n                // TODO:options({}) 里的对象后期需要存放value进入\n                options = _.isFunction(options) ? options(dependFieldValues) : options;\n                tags = _.filter(options,(optionItem: any)=>{\n                    return multiple ? value.indexOf(optionItem.value) > -1 : optionItem.value === value;\n                })\n            }\n        }\n        return (<React.Fragment>{tags.map((tagItem, index)=>{return (\n            <React.Fragment key={tagItem.value}>\n                {index > 0 && ', '}\n                { referenceTo ? (<Link to={getObjectRecordUrl(referenceTo, tagItem.value)} className=\"text-blue-600 hover:text-blue-500 hover:underline\">{tagItem.label}</Link>) : (tagItem.label) }\n            </React.Fragment>\n        )})}</React.Fragment>)\n    }else{\n        if (multiple)\n            fieldProps.mode = 'multiple';\n\n        let dependOnValues: any = dependFieldValues;\n        let request: any;\n        let labelInValue=false;\n        let requestFun= async (params: any, props: any) => {\n            // 注意，request 里面的代码不会抛异常，包括编译错误。\n            // console.log(\"===request===params, props==\", params, props);\n            // console.log(\"===request===reference_to==\", reference_to);\n\n            if(_.isFunction(options)) {\n                dependOnValues.__keyWords = params.keyWords;\n                dependOnValues.__referenceTo = referenceTo;\n                const results = await options(dependOnValues);\n                return results;\n            }\n            else{\n                let filters: any = [], textFilters: any = [], keyFilters: any = [];\n                if (value){\n                    // const textValue= _.isArray(referenceTos) ? value.ids: value;\n                    textFilters = [reference_to_field, '=', value];\n                }\n                if (params.keyWords){\n                    keyFilters = [referenceToLableField, 'contains', params.keyWords];\n                }\n                let filtersOfField:[] =  filtersFunction ? filtersFunction(fieldFilters) : fieldFilters;\n                if (filtersOfField.length) {\n                    if (keyFilters.length) {\n                        if (_.isArray(filtersOfField)) {\n                            keyFilters = [filtersOfField, keyFilters]\n                        }\n                        else {\n                            const odataKeyFilters = formatFiltersToODataQuery(keyFilters);\n                            keyFilters = `(${filtersOfField}) and (${odataKeyFilters})`;\n                        }\n                    }\n                    else {\n                        keyFilters = filtersOfField;\n                    }\n                }\n                if (textFilters.length && keyFilters.length) {\n                    if (_.isArray(keyFilters)) {\n                        filters = [textFilters, 'or', keyFilters]\n                    }\n                    else {\n                        const odataTextFilters = formatFiltersToODataQuery(textFilters);\n                        filters = `(${odataTextFilters}) or (${keyFilters})`;\n                    }\n                }\n                else if (textFilters.length && !open) {\n                    filters = textFilters;\n                }\n                else if (keyFilters.length) {\n                    filters = keyFilters;\n                }\n                let fields = [reference_to_field, referenceToLableField];\n                // console.log(\"===filters===\", filters);\n                let option: any = {};\n                if (reference_sort) {\n                    option.sort = _.map(reference_sort, (value, key) => { \n                        if(fields.indexOf(key)<0){ fields.push(key) };\n                        return `${key}${value == 1 ? '' : ' desc'}` \n                    }).join(\",\")\n                }\n                if (reference_limit) {\n                    option.pageSize = reference_limit\n                }\n                let data = await API.requestRecords(referenceTo, filters, fields, option);\n\n                const results = data.value.map((item: any) => {\n                    return {\n                        label: item[referenceToLableField],\n                        value: item[reference_to_field]\n                    }\n                })\n                return results;\n            }\n        }\n\n        if (referenceTo){ // 含有reference_to\n            if (!options) {\n                request = requestFun;\n            }\n            else if (options) {\n                if (_.isArray(options)) {\n                    fieldProps.options = options;\n                } else if (_.isFunction(options)) {\n                    request = requestFun;\n                }\n            }\n        }else{ // 最后一种情况 没有referenceTo 只有options 或 optionsFunction \n            if (_.isFunction(options)) {\n                request = async (params: any, props: any) => {\n                    dependFieldValues.__keyWords = params.keyWords;\n                    const results = await options(dependFieldValues);\n                    return results;\n                };\n            } else {\n                fieldProps.options = options;\n            }\n        }\n        const onDropdownVisibleChange = (open: boolean) => {\n            if (open) {\n                setParams({ open, openTag: new Date() });\n            }\n        }\n\n        let newFieldProps:any=fieldProps;\n        if(_.isArray(referenceTos)){\n            labelInValue=true;\n            if(value){\n                const recordList = referenceToObject.getRecordList(filter, fields);\n                // 根据ID获取请求 获取对应的 label。 不需要下面这行isloading判断\n                // if (recordList.isLoading) return (<div><Spin/></div>);\n                recordListData = recordList.data;\n                if (recordListData && recordListData.value && recordListData.value.length > 0) {\n                    selectItemLabel = recordListData.value.map((recordItem: any)=>{\n                        return recordItem[referenceToLableField];\n                    }).join(\",\");\n                }\n            }\n            newFieldProps = Object.assign({}, fieldProps, {\n                value: {value: fieldProps.value,label: selectItemLabel},\n                onChange:(values: any, option: any)=>{\n                    setSelectItemLabel(values.label)\n                    onChange({o: referenceTo, ids: [values.value]})\n                }\n            })\n        }\n        let optionItemRender;\n        if(showIcon && referenceToObjectIcon){\n            optionItemRender = (item) => {\n                return (\n                    <React.Fragment>\n                        <span role=\"img\" aria-label=\"smile\" className=\"anticon anticon-smile\"><SteedosIcon name={referenceToObjectIcon} size=\"x-small\"/></span>\n                        <span>{item.label}</span>\n                    </React.Fragment>\n                    )\n            }\n        }\n        let proFieldProps: any;\n        const isLookupTree = referenceToObjectSchema && referenceToObjectSchema.enable_tree;\n        if(isLookupTree){\n            proFieldProps = {\n                objectApiName: referenceTo,\n                onChange: newFieldProps.onChange,\n                multiple,\n                value: newFieldProps.value\n            }\n        }\n        else{\n            proFieldProps = {\n                mode: mode,\n                showSearch: true,\n                showArrow: true,\n                optionFilterProp: 'label',\n                fieldProps: newFieldProps,\n                request,\n                labelInValue,\n                params,\n                onDropdownVisibleChange,\n                optionItemRender,\n                ...rest\n            }\n        }\n        const SelectProFieldProps = {\n            mode: mode,\n            showSearch: true,\n            showArrow: true,\n            optionFilterProp: 'label',\n            onChange: (value: any) => {\n                setReferenceTo(value)\n            },\n            defaultValue:referenceTo\n        }\n        const needReferenceToSelect = _.isArray(referenceTos) && !_.isArray(options)\n        let referenceToOptions:any = [];\n        let isLoadingReferenceTosObject;\n        if(needReferenceToSelect){\n            _.forEach(referenceTos,(val)=>{\n                const referenceToObject = Objects.getObject(val);\n                if (!referenceToObject.isLoading){\n                    referenceToOptions.push({label:referenceToObject.schema.label,value:val})\n                }\n            })\n            isLoadingReferenceTosObject = referenceToOptions.length !== referenceTos.length;\n        }\n        if(isLoadingReferenceTosObject) return (<div><Spin/></div>)\n        const fieldWidth = _.isArray(referenceTos) ? \"70%\" : \"100%\";\n        return (\n            <React.Fragment>\n                {\n                    needReferenceToSelect && \n                    (<Select style={{ width: \"30%\" }}  {...SelectProFieldProps} options={referenceToOptions} ></Select>)\n                }\n                {isLookupTree ? (<FieldTreeSelect {...proFieldProps} style={ { width: fieldWidth } } />) : (<FieldSelect {...proFieldProps} style={ { width: fieldWidth } } />)}\n\n            </React.Fragment>\n        )\n    }\n});\n\nexport const FieldTreeSelect = observer((props:any)=> {\n    const { objectApiName, nameField = \"name\", parentField = \"parent\", filters = [], value, onChange, ...rest } = props;\n    const fields = [nameField, parentField]\n    const object = Objects.getObject(objectApiName);\n    if (object.isLoading) return (<div><Spin/></div>);\n    let treeData = [];\n    const recordList: any = object.getRecordList(filters, fields);\n    if (recordList.isLoading) return (<div><Spin/></div>);\n    const recordListData = recordList.data;\n    if (recordListData && recordListData.value && recordListData.value.length > 0) {\n        treeData = getTreeDataFromRecords(recordListData.value, nameField, parentField);\n    }\n    return (\n      <TreeSelect\n        style={{ width: '100%' }}\n        value={value}\n        dropdownStyle={{ maxHeight: 400, overflow: 'auto' }}\n        treeData={treeData}\n        placeholder=\"请选择\"\n        // treeDefaultExpandAll\n        onChange={onChange}\n        {...rest}\n      />\n    );\n});\n\nexport const lookup = {\n    render: (text: any, props: any) => {\n        return (<LookupField {...props} mode=\"read\"></LookupField>)\n    },\n    renderFormItem: (text: any, props: any) => {\n        return (<LookupField {...props} mode=\"edit\"></LookupField>)\n    }\n}","import React from 'react';\nimport {LookupField} from './lookup'\n\n// 和lookup相同\nexport const master_detail = {\n  render: (text: any, props: any) => {\n      return (<LookupField {...props} mode=\"read\"></LookupField>)\n  },\n  renderFormItem: (text: any, props: any) => {\n      return (<LookupField {...props} mode=\"edit\"></LookupField>)\n  }\n}","import _ from 'lodash';\nimport React, { useState } from 'react';\nimport { Grid, GridItem, Flex, Box } from '@chakra-ui/layout'\n\nimport { ObjectField } from '../components/ObjectField';\nimport BaseForm from '@ant-design/pro-form/lib/BaseForm';\nimport { Form as AntForm } from 'antd';\nimport { FieldSection } from '@steedos/builder-form';\n\n/**\n * 对象字段类型组件\n * 定义对象的key,value键值对结构，可在界面编辑该对象结构的数据并保存到数据库中\n * 组件支持属性\n * - name: string\n * - sub_fields: [{name: xx, type: xx, reference_to: xx, multiple: xx, ...}, ...], 字段数组,其元素是每个字段的字义\n * 比如华炎魔方cms_posts对象中有一个members字段，其yml文件定义如下：\n *   members:\n      type: object\n      label: Members\n      is_wide: true\n    members.users:\n      type: lookup\n      label: User Members\n      reference_to: users\n      multiple: true\n      filterable: true\n    members.organizations:\n      type: lookup\n      label: Organization Members\n      reference_to: organizations\n      multiple: true\n      filterable: true\n * 保存到cms_posts表记录中对应为以下效果：\n    \"members\" : {\n        \"users\" : [ \n            \"5fdbe2a67447ff11ed5851e5\"\n        ],\n        \"organizations\" : [ \n            \"WNpmGhCzhq5H2y5yZ\"\n        ]\n    }\n * 在这里对应的组件属性为：\n    sub_fields: [{\n      name: \"members.organizations\",\n      type: \"lookup\",\n      reference_to: \"organizations\",\n      multiple: true\n    },{\n      name: \"members.users\",\n      type: \"lookup\",\n      reference_to: \"users\",\n      multiple: true\n    }]\n */\nexport const ObjectFieldObject = (props:any) => {\n  const [form] = AntForm.useForm();\n\n  const {mode='read', text =[], fieldProps={}} = props;\n  const { field_schema: fieldSchema = {}, depend_field_values: dependFieldValues={} } = fieldProps;\n  const {value:initialValues, onChange} = fieldProps;\n  const {sub_fields={}, columns = 2} = fieldSchema;\n  const label = fieldSchema.label? fieldSchema.label: fieldSchema.name\n\n  const getFields = ()=> {\n    const fields = [];\n    _.forEach(sub_fields, (field:any, fieldName)=>{\n      const fieldItemProps = {\n        key: fieldName,\n        name: fieldName,\n        fieldName: fieldName,\n        label: field.label?field.label:fieldName,\n        fieldSchema: field,\n      };\n      fields.push(<ObjectField {...fieldItemProps} />)\n    })\n    return fields;\n  }\n\n  const boxOptions = {\n    templateColumns: [`repeat(1, 1fr)`, `repeat(${columns}, 1fr)`],\n    gridColumn: 'span 2/span 2',\n    gap: '0.5rem 2rem',\n  }\n\n  return (\n    <BaseForm \n      // formFieldComponent = {ObjectField}\n      className='object-sub-form'\n      initialValues={initialValues}\n      labelAlign='left'\n      // mode={mode}\n      form={form}\n      component={false}  //子表单不创建 html form tag\n      submitter={false}\n      onValuesChange = {(changedValues:any, allValues:any)=>{\n        if (onChange) onChange(allValues)\n      }} \n      // layout={layout}\n      // onFinish={onFinish}\n    >\n      <Grid {...boxOptions}>\n        {getFields()}\n      </Grid>\n    </BaseForm>\n  )\n}\n\nexport const object = {\n  render: (text: any, props: any) => {\n    return (\n        <ObjectFieldObject {...props} mode='read'/>\n    )\n  },\n  renderFormItem: (_: any, props: any) => {\n    return (\n        <ObjectFieldObject {...props} mode='edit'/>\n    )\n  }\n}","import _ from 'lodash';\nimport { v4 as uuidv4 } from 'uuid';\nimport ProField from \"@ant-design/pro-field\";\nimport Dropdown from '@salesforce/design-system-react/components/menu-dropdown'; \nimport Button from '@salesforce/design-system-react/components/button'; \nimport Popover from '@salesforce/design-system-react/components/popover'; \n\nimport {AgGridColumn, AgGridReact} from '@ag-grid-community/react';\n\nimport React, { useState, useEffect, forwardRef, useImperativeHandle, useRef } from 'react';\n\nimport 'ag-grid-community/dist/styles/ag-grid.css';\nimport 'ag-grid-community/dist/styles/ag-theme-balham.css';\n\nimport './aggrid.less';\n\nconst ProFieldRenderer = (props: any) => {\n  const { \n    value, \n    valueType = 'text',\n    fieldSchema,\n  } = props;\n  return (\n    \n    <ProField \n      mode='read'\n      valueType={valueType} \n      fieldProps={{\n        field_schema: fieldSchema\n      }}\n      text={value}\n      emptyText=''\n      />\n  ) \n}\n\nconst ProFieldEditor = forwardRef((props: any, ref) => {\n  const { \n    valueType = 'text',\n    fieldSchema\n  } = props;\n  const [value, setValue] = useState(props.value);\n\n  /* Component Editor Lifecycle methods */\n  useImperativeHandle(ref, () => {\n    return {\n        getValue() {\n            return value;\n        },\n        isPopup() {\n          return true;\n        }\n    };\n  });\n  \n  return (\n    <section className=\"slds-popover slds-popover slds-popover_edit\" role=\"dialog\">\n      <div className=\"slds-popover__body\">\n        <ProField \n          mode='edit'\n          valueType={valueType} \n          value={value}\n          onChange={(newValue)=>{\n            if (newValue?.currentTarget?.value)\n              setValue(newValue?.currentTarget?.value)\n            else\n              setValue(newValue)\n          }}\n          fieldProps={{\n            field_schema: fieldSchema\n          }}\n          />\n      </div>\n    </section>\n  ) \n});\n\n// 表格类型字段，\n// value格式：{ gridField: [{subField1: 666, subField2: 'yyy'}] }\n// 编辑时调用 editable protable，要求行可拖拉调整顺序\n// 显示时调用只读 protable\n// props.fields [] 列数组\nexport const ObjectFieldGrid = (props) => {\n  \n  const {mode='read', text =[], fieldProps={}} = props;\n  const { field_schema: fieldSchema = {}, depend_field_values: dependFieldValues={}, value:initialValue, onChange } = fieldProps;\n\n  _.forEach(initialValue, (row)=>{\n    if (!row._id)\n      row._id=uuidv4()\n  })\n  const [value, setValue] = useState<any>(initialValue && _.isArray(initialValue)? initialValue : [])\n  const [gridApi, setGridApi] = useState<any>(null)\n\n  const addRow = () => {\n    const newRow = {\n      _id: uuidv4(),\n    }\n    value.push(newRow)\n    gridApi.setRowData(value);\n    onChange(value)\n  }\n\n  const deleteRow = (props) => {\n    const selectedId = props.data?._id\n    const newValue = value.filter(function (dataItem) {\n      return dataItem._id != selectedId\n    });\n    props.api.setRowData(newValue);\n    onChange(newValue)\n  }\n\n  const RowActions = (props: any) => {\n    return (\n      <Dropdown\n        assistiveText={{ icon: 'Options' }}\n        iconCategory=\"utility\"\n        iconName=\"down\"\n        iconVariant=\"border-filled\"\n        iconSize='x-small'\n        width='x-small'\n        menuPosition=\"overflowBoundaryElement\"\n        onSelect={(option) => {\n          if (option.value === 'delete') {\n            deleteRow(props)\n          }\n        }}\n        options={[\n          { label: '删除', value: 'delete' }\n        ]}\n      />\n    )\n  }\n\n  const onCellClicked = ($event) => {\n    if (mode == 'read')\n      return;\n    $event.api.startEditingCell({\n      rowIndex: $event.rowIndex,\n      colKey: $event.column.colId\n    });\n  };\n\n  const onRowDragEnd = (e) => {\n    var rowData = [];\n    e.api.forEachNode(function (node) {\n      rowData.push(node.data);\n    });\n    onChange(rowData)\n  };\n\n  const getRowNodeId = function (data) {\n    return data._id;\n  };\n\n  const getColumns = ()=>{\n\n    const {sub_fields=[]} = fieldSchema;\n\n    const columns:any[] = [{\n      rowDrag: mode == 'edit',\n      hide: !(mode == 'edit'),\n      resizable: false,\n      width: 35,\n      maxWidth: 35,\n      minWidth: 35,\n    }];\n    _.forEach(sub_fields, (field, fieldName)=>{\n      columns.push({\n        field: fieldName,\n        headerName: field.label?field.label:fieldName,\n        width: field.is_wide? 300: 150,\n        minWidth: field.is_wide? 300: 150,\n        resizable: true,\n        filter: true,\n        cellRenderer: 'proFieldRenderer',\n        cellRendererParams: {\n          fieldSchema: field,\n          valueType: field.type,\n          mode\n        },\n        cellEditor: 'proFieldEditor',\n        cellEditorParams: {\n          fieldSchema: field,\n          valueType: field.type,\n          mode,\n        },\n        // key: fieldName,\n        // dataIndex: fieldName,\n        // title: field.label?field.label:fieldName,\n        // valueType: field.type,\n        editable: !field.readonly,\n      })\n    });\n    // 操作按钮\n    columns.push({\n      hide: !(mode == 'edit'),\n      width: 50,\n      maxWidth: 50,\n      minWidth: 50,\n      resizable: false,\n      cellRenderer: 'rowActions',\n      cellEditor: 'rowActions',\n    });\n    return columns\n  }\n  return (\n    <div className=\"ag-theme-balham steedos-grid\">\n      <AgGridReact\n        immutableData={true}\n        getRowNodeId={getRowNodeId}\n        rowDragManaged={true}\n        animateRows={true}\n        rowData={value}\n        columnDefs={getColumns()}\n        stopEditingWhenGridLosesFocus={true}\n        onRowDragEnd={onRowDragEnd.bind(this)}\n        onCellClicked={onCellClicked}\n        onGridReady={(params) => {\n          setGridApi(params.api);\n          params.api.sizeColumnsToFit();\n        }}\n        suppressNoRowsOverlay={true}\n        frameworkComponents = {{\n          proFieldRenderer: ProFieldRenderer,\n          proFieldEditor: ProFieldEditor,\n          rowActions: RowActions,\n        }}\n      />\n      { mode == 'edit' && (\n        <Button\n          iconCategory=\"utility\"\n          iconName=\"add\"\n          iconPosition=\"left\"\n          label=\"新建\"\n          variant=\"base\"\n          onClick={()=>addRow()}\n        />\n      )}\n    </div>\n  )\n}\n\nexport const grid = {\n  render: (text: any, props: any) => {\n    return (\n        <ObjectFieldGrid {...props} mode='read'/>\n    )\n  },\n  renderFormItem: (_: any, props: any) => {\n    return (\n        <ObjectFieldGrid {...props} mode='edit'/>\n    )\n  }\n}","import React, { useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { Upload, Button, message } from 'antd';\nimport { Image } from \"antd\";\nimport { Settings , API} from '@steedos/builder-store';\nimport FieldImage from '@ant-design/pro-field/es/components/Image';\nimport { observer } from \"mobx-react-lite\";\n\n/*\n * 对象字段类型组件\n * 定义对象的key,value键值对结构，可在界面编辑该对象结构的数据并保存到数据库中\n * 组件支持属性\n * - id : string\n * - name: string\n * 比如华炎魔方space_users对象中有一个avatar字段\n *  avatar:\n *    type: \"avatar\"\n *    label: \"头像\"\n *    name: \"avatra\"\n * 对应的组件属性具体为\n * - type: \"image\"\n * - multiple: true\n * \n * 保存到spa_lfa1表记录中对应为以下效果\n *    \"imgs__c\": \"iHXH3SrYP5ZcarQbX\"\n*/\n\nexport const ImageField = observer((props: any) => {\n    const { fieldProps = {} ,mode ,text, fileType} = props;\n    let { onChange } = fieldProps;\n\n    if (mode === 'read') {\n        let url = Settings.rootUrl + '/api/files/'+fileType+'/' + text;\n        return (<Image alt=\"图片\" width={32} src={url} />)\n        // return (<FieldImage {...proFieldProps} />)\n    }\n    if (mode === 'edit') {\n        // props.name = \"file\" //TODO Upload组件中会自动将参数 name 的 value 作为一个参数传递给后端\n        const proProps = Object.assign({}, props, {name:\"file\"});\n        const [fileList, setFileList] = useState([]);\n        const onPreview = async file => {\n            let src = file.url;\n            if (!src) {\n                src = await new Promise(resolve => {\n                    const reader = new FileReader();\n                    reader.readAsDataURL(file.originFileObj);\n                    reader.onload = () => resolve(reader.result);\n                });\n            }\n            const image = new window.Image();\n            image.src = src;\n            const imgWindow = window.open(src);\n            imgWindow.document.write(image.outerHTML);\n        };\n        const propsOther = {\n            // http://127.0.0.1:5080/s3/images\n            action: Settings.rootUrl + '/s3/'+fileType,\n            listType: 'picture-card',\n            fileList,\n            onPreview,\n            type: 'file',\n            method: 'post',\n            accept: 'image/png, image/jpeg, image/jpg, image/gif',\n            // maxCount: '1',\n            data: {\n                space: Settings.tenantId,\n                owner: Settings.userId\n            },\n            headers: {\n                'X-User-Id': Settings.userId,\n                'X-Auth-Token': Settings.authToken\n            },\n            onChange: (options: any) => {\n                const { file, fileList: newFileList } = options;\n                setFileList(newFileList);\n                if (file.status === \"done\") {\n                    onChange(file.response._id)\n                }\n            }\n        }\n        return (\n            <Upload {...proProps} {...propsOther}>\n                {fileList.length < 1 && '+ Upload'}\n            </Upload>\n        );\n    }\n});\n\nexport const image = {\n    render: (text: any, props: any) => {\n        return (<ImageField {...props} mode=\"read\" fileType=\"images\"></ImageField>)\n    },\n\n    renderFormItem: (text: any, props: any) => {\n        return (<ImageField {...props} mode=\"edit\" fileType=\"images\"></ImageField>)\n    }\n}","import { boolean } from './boolean';\nimport { currency } from './currency';\nimport { datetime } from './datetime';\nimport { email } from './email';\nimport { number } from './number';\nimport { percent } from './percent';\nimport { select } from './select';\nimport { toggle } from './toggle';\nimport { url } from './url';\nimport { lookup } from './lookup';\nimport { master_detail } from './master_detail';\nimport { object } from './object';\nimport { grid } from './aggrid';\nimport { image } from './image';\nimport { avatar } from './avatar';\nimport { formula } from './formula';\nimport { summary } from './summary';\nimport { autonumber } from './autonumber';\n\nexport const valueTypes = {\n    boolean,\n    currency,\n    datetime,\n    email,\n    number,\n    percent,\n    select,\n    toggle,\n    url,\n    lookup,\n    master_detail,\n    image,\n    avatar,\n    object,\n    grid,\n    formula,\n    summary,\n    autonumber,\n};","import React from 'react';\nimport {ImageField} from './image'\n\n// 和image相同, 唯一不同的是 fileType 值。\nexport const avatar = {\n  render: (text: any, props: any) => {\n    return (<ImageField {...props} mode=\"read\" fileType=\"avatars\"></ImageField>)\n  },\n  renderFormItem: (text: any, props: any) => {\n    return (<ImageField {...props} mode=\"edit\" fileType=\"avatars\"></ImageField>)\n  }\n}\n\n","import React from 'react';\n\n// 公式类型类型字段\n// value 值为服务端自动生成的字符串\n// 编辑时只读。显示时直接显示 value\nexport const formula = {\n  render: (text: any, props: any) => {\n    return (<span>{text}</span>)\n  },\n  renderFormItem: (_: any, props: any) => {\n    return (<span></span>)\n  }\n}","import React from 'react';\n\nexport const summary = {\n  render: (text: any, props: any) => {\n    return (<span>{text}</span>)\n  },\n  renderFormItem: (_: any, props: any) => {\n    return (<span></span>)\n  }\n}","import React from 'react';\n\n// 自动编号类型字段\n// value 值为服务端自动生成的字符串\n// 编辑时只读。显示时直接显示 value\nexport const autonumber = {\n  render: (text: any, props: any) => {\n    return (<span>{text}</span>)\n  },\n  renderFormItem: (_: any, props: any) => {\n    return (<span></span>)\n  }\n}","import React from \"react\";\nimport { QueryClient, QueryClientProvider } from \"react-query\";\nimport { ObjectContext, ObjectContextValueType, RecordQueryRequestParams } from \"./ObjectContext\";\nimport { FormProvider } from \"@steedos/builder-form\";\nimport {valueTypes} from '../valueTypes'\n\n/* 通过 valueTypeMap，支持给Form传入第三方自定义控件 */\ntype ObjectProviderProps = ObjectContextValueType & {\n  children: any,\n}\n\nconst defaultQueryClientConfig: any = {\n  defaultOptions: {\n    queries:{\n      refetchOnWindowFocus: false\n    }\n  }\n}\n\nexport function ObjectProvider(props: ObjectProviderProps) {\n  const {\n    locale,\n    requestObject,\n    requestRecords,\n    updateRecord,\n    insertRecord,\n    queryClient = new QueryClient(defaultQueryClientConfig),\n    children,\n  } = props;\n\n  return (\n    <ObjectContext.Provider value={{\n      queryClient,\n      requestObject,\n      requestRecords,\n      updateRecord,\n      insertRecord\n    }}>\n      <QueryClientProvider client={queryClient}>\n        <FormProvider locale={locale} valueTypeMap={valueTypes}>\n          {children}\n        </FormProvider>\n      </QueryClientProvider>\n    </ObjectContext.Provider>\n  )\n}","\nimport React from \"react\";\n\nimport { getSnapshot } from \"mobx-state-tree\";\nimport { SteedosClient } from '@steedos/builder-sdk';\nimport { SteedosContext } from '..';\nimport { ObjectProvider } from \"@steedos/builder-object\";\nimport { Settings, API } from \"@steedos/builder-store\";\nimport { SteedosIconSettings } from \"@steedos/builder-lightning\";\n\n/*\n参数：\n- locale: zh_CN, en_US, zh_TW  TODO: 和steedos的locale值不一样，获取user之后需要转换。\n\n*/\nexport function SteedosProvider(props: any) {\n\n  const {\n    rootUrl,\n    tenantId = localStorage.getItem('steedos:spaceId'),\n    userId = localStorage.getItem('steedos:userId'),\n    authToken = localStorage.getItem('steedos:token'),\n    locale,\n  } = props;\n\n  Settings.setRootUrl(rootUrl);\n  Settings.setTenantId(tenantId);\n  Settings.setUserId(userId);\n  Settings.setAuthToken(authToken);\n  Settings.setLocale(locale);\n\n\n  const objectProviderProps = {\n    locale,\n    requestObject: API.requestObject,\n    requestRecords: API.requestRecords,\n    updateRecord: API.updateRecord,\n    insertRecord: API.insertRecord\n  }\n\n  return (\n    <SteedosContext.Provider value={{}}>\n      <SteedosIconSettings>\n        <ObjectProvider {...objectProviderProps}>\n          {props.children}\n        </ObjectProvider>\n      </SteedosIconSettings>\n    </SteedosContext.Provider>\n  )\n}","import React, {useContext} from \"react\";\n\n\nexport const SteedosContext = React.createContext<any>(null);\n\n","export const getCookie = (name: string) => {\n    let pattern = RegExp(name + \"=.[^;]*\")\n    let matched = document.cookie.match(pattern)\n    if (matched) {\n        let cookie = matched[0].split('=')\n        return cookie[1]\n    }\n    return ''\n}","// eslint-disable-next-line\nimport React, { useEffect, useState } from \"react\"\n// import logo from \"./logo.svg\"\nimport \"./App.css\"\n\nimport { SteedosProvider } from \"@steedos/builder-object\"\nimport { ObjectExpandTable } from \"@steedos/builder-object\"\n\nimport { Button } from \"antd\"\nimport ProCard from \"@ant-design/pro-card\"\nimport queryString from \"querystring\"\nimport { getAuthToken, getSpaceId, getUserId } from \"./accounts\"\nimport { Settings } from '@steedos/builder-store'\nimport useAntdMediaQuery from 'use-media-antd-query';\n\n\nfunction App(props: any) {\n  let queryObject = queryString.parse(window.location.search.slice(1))\n  const providerProps = {\n    rootUrl: queryObject.rooturl || Settings.rootUrl || \"/\",\n    tenantId:\n      queryObject.spaceid || getSpaceId() || Settings.tenantId, //REACT_APP_STEEDOS_TENANT_ID,\n    userId: queryObject.userid || getUserId() || Settings.userId,\n    authToken:\n      queryObject.authtoken || getAuthToken() || Settings.authToken,\n    locale: Settings.locale,\n  }\n\n  const [selectedUser, setSelectedUsers] = useState([])\n  const [selectedUserInTab1, setSelectedUsersInTab1] = useState([])\n  const [selectedUserInTab2, setSelectedUsersInTab2] = useState([])\n\n  const handleOnTab1Change = (users: any) => {\n    setSelectedUsersInTab1(users)\n  }\n  const handleOnTab2Change = (users: any) => {\n    setSelectedUsersInTab2(users)\n  }\n\n  useEffect(() => {\n    setSelectedUsers([...selectedUserInTab1, ...selectedUserInTab2])\n  }, [selectedUserInTab1, selectedUserInTab2])\n\n  // const handleOnChange = (users: any) => {\n  //   setSelectedUsers(users)\n  //   // setSelectedEmails(users.map(({ name, email }) => `${name}<${email}>`))\n  // }\n  const confirmChose = () => {\n    ;(window.opener || window.parent).postMessage(\n      {\n        ...queryObject,\n        selection: selectedUser.map(({ name, email }) => ({ name, email })),\n      },\n      \"*\"\n    )\n\n    window.close()\n    // setSelectedEmails(users.map(({ name, email }) => `${name}<${email}>`))\n  }\n  const colSize = useAntdMediaQuery();\n  const isMobile = (colSize === 'sm' || colSize === 'xs');\n  const organizationColumns = isMobile ? [\n    {\n      fieldName: \"name\",\n      hideInSearch: true,\n      sorter: true,\n    },\n    {\n      fieldName: \"email\",\n      hideInSearch: true,\n    },\n    {\n      fieldName: \"organizations_parents\",\n      hideInTable: true\n    }\n  ] : [\n    {\n      fieldName: \"name\",\n      sorter: true,\n    },\n    {\n      fieldName: \"email\",\n    },\n    {\n      fieldName: \"organizations_parents\",\n      hideInTable: true,\n      expandType: \"tree\",\n      expandReference: \"organizations\",\n      expandNameField: \"name\",\n      expandParentField: \"parent\"\n    }\n  ];\n  const groupColumns = isMobile ? [\n    {\n      fieldName: \"name\",\n      sorter: true,\n      hideInSearch: true,\n    },\n    {\n      fieldName: \"email\",\n      hideInSearch: true,\n    },\n    {\n      fieldName: \"group\",\n      hideInTable: true\n    },\n  ] : [\n    {\n      fieldName: \"name\",\n      sorter: true,\n    },\n    {\n      fieldName: \"email\",\n    },\n    {\n      fieldName: \"group\",\n      hideInTable: true,\n      expandType: \"list\",\n      expandReference: \"contacts_group\",\n      expandNameField: \"name\"\n    }\n  ];\n  return (\n    <SteedosProvider {...providerProps}>\n      <div className=\"App\">\n        <ProCard\n          className=\"main-container\"\n          title=\"\"\n          split=\"horizontal\"\n          bordered\n          headerBordered\n        >\n          <ProCard\n            tabs={{\n              type: \"card\",\n            }}\n          >\n            <ProCard.TabPane\n              key=\"tab1\"\n              tab={`用户${\n                selectedUserInTab1.length > 0\n                  ? \"(\" + selectedUserInTab1.length + \")\"\n                  : \"\"\n              }`}\n            >\n              <ObjectExpandTable\n                onChange={handleOnTab1Change}\n                objectApiName=\"space_users\"\n                search={{\n                  filterType: 'light',\n                }}\n                columnFields={organizationColumns}\n              />\n            </ProCard.TabPane>\n            <ProCard.TabPane\n              key=\"tab2\"\n              tab={`联系人${\n                selectedUserInTab2.length > 0\n                  ? \"(\" + selectedUserInTab2.length + \")\"\n                  : \"\"\n              }`}\n            >\n              <ObjectExpandTable\n                onChange={handleOnTab2Change}\n                rowKey=\"_id\"\n                objectApiName=\"contacts__c\"\n                search={{\n                  filterType: 'light',\n                }}\n                columnFields={groupColumns}\n              />\n            </ProCard.TabPane>\n          </ProCard>\n          <ProCard\n            style={{ height: \"60px\" }}\n            bodyStyle={{\n              display: \"flex\",\n              justifyContent: \"flex-end\",\n              alignItems: \"center\",\n            }}\n          >\n            <Button\n              disabled={selectedUser.length <= 0}\n              onClick={confirmChose}\n              type=\"primary\"\n            >\n              确定\n            </Button>\n          </ProCard>\n        </ProCard>\n      </div>\n    </SteedosProvider>\n  )\n}\n\nexport default App\n","import { getCookie } from './cookie';\n\nexport const getUserId = () => {\n    return getCookie(\"X-User-Id\");\n}\n\nexport const getAuthToken = () => {\n    return getCookie(\"X-Auth-Token\");\n}\n\nexport const getSpaceId = () => {\n    return getCookie(\"X-Space-Id\");\n}","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\n\nReactDOM.render(\n  // <React.StrictMode>\n    <App />\n  // </React.StrictMode>,\n  ,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import _ from 'lodash';\nexport function saveEval(js: string){\n\ttry{\n\t\treturn eval(js)\n\t}catch (e){\n\t\tconsole.error(e, js);\n\t}\n};\n\nconst getFieldSchema = (fieldName: any, objectConfig: any)=>{\n  let fieldSchema: any = {};\n  const field = objectConfig.fields[fieldName];\n  const fieldType = field && field.type;\n  let sub_fields: any;\n  // fieldName变量中可能带$和.符号，需要转换成RegExp匹配的带转义符的字符\n  const fieldNameForReg = fieldName.replace(/\\$/g,\"\\\\$\").replace(/\\./g,\"\\\\.\");\n  switch(fieldType){\n    case \"object\":\n      // 根据对象的子表字段信息，返回子表配置属性\n      sub_fields = {};\n      _.each(objectConfig.fields, (fieldItem, key) => {\n        const reg = new RegExp(`^${fieldNameForReg}\\\\.\\\\\\w+$`); //以fieldName开头，且用.号连接下一个字段名\n        // if(key.startsWith(`${fieldName}.`)){\n        if(reg.test(key)){\n          // members.users、instances.$._id、sharing.$之类的复合字段中取出最后一个.字段名，但是不匹配$结尾的字段名\n          let matches = key.match(/.(\\w+)$/g);\n          let lastFieldKey = matches && matches[0].replace(\".\", \"\");\n          if(lastFieldKey){\n            sub_fields[lastFieldKey] = getFieldSchema(key, objectConfig);   ;                           \n          }\n        }\n      });\n      fieldSchema = Object.assign({}, field, {sub_fields});\n      break;\n    case \"grid\":\n      // 根据对象的子表字段信息，返回子表配置属性\n      sub_fields = {};\n      _.each(objectConfig.fields, (fieldItem, key) => {\n        const reg = new RegExp(`^${fieldNameForReg}\\\\.\\\\$\\\\.\\\\\\w+$`); //以fieldName开头，且后面接着用.$.号连接下一个字段名\n        // if(key.startsWith(`${fieldName}.$.`)){\n        if(reg.test(key)){\n          // members.users、instances.$._id、sharing.$之类的复合字段中取出最后一个.字段名，但是不匹配$结尾的字段名\n          let matches = key.match(/.(\\w+)$/g);\n          let lastFieldKey = matches && matches[0].replace(\".\", \"\");\n          if(lastFieldKey){\n            sub_fields[lastFieldKey] = getFieldSchema(key, objectConfig);                           \n          }\n        }\n      });\n      fieldSchema = Object.assign({}, field, {sub_fields});\n      break;\n    case \"lookup\":\n      if(field.reference_to === \"users\"){\n        fieldSchema = Object.assign({}, field, {\n          reference_to: \"space_users\",\n          reference_to_field: \"user\"\n        });\n      }\n      else if(field._reference_to){\n        // 如果只有_reference_to， 那就给field增加一个reference_to属性。\n        let reference_to = saveEval(`(${field._reference_to})`);\n        fieldSchema = Object.assign({}, field, {reference_to});\n      }\n      else{\n        fieldSchema = field;\n      }\n      // TODO: 暂时将以下两个属性代码注释，后期优化放开\n      // if(field._filtersFunction){\n      //   let filtersFunction = saveEval(`(${fieldSchema._filtersFunction})`);\n      //   fieldSchema = Object.assign({}, fieldSchema, {filtersFunction});\n      // }\n      // if(field._optionsFunction){\n      //   let optionsFunction = saveEval(`(${fieldSchema._optionsFunction})`);\n      //   fieldSchema = Object.assign({}, field, {optionsFunction});\n      // }\n      break;\n    default:\n      fieldSchema = field;\n      break;\n  }\n  return fieldSchema;\n}\n\n/**\n * 转换传入的objectConfig中的 object, grid 类型字段，生成 sub_fields 属性，相关函数为字段串格式转换为函数\n * @param objectConfig 对象配置文件中字段所属对象的配置\n * @returns 转换后的fields\n */\n export function getFieldsSchema(objectConfig: any) {\n  let fieldsSchema: any = {}\n  // console.log(\"convertFieldsSchema===\", objectConfig.name, JSON.stringify(objectConfig.fields));\n  _.each(objectConfig.fields, (field, fieldName) => {\n    if(/\\w+\\.($\\.)?(\\w+)?/.test(fieldName)){\n      // 所有的members.users、instances.$._id、sharing.$之类的复合字段会根据需要自动加到sub_fields中，所以不用再加到fieldsSchema中\n      return;\n    }\n    const fieldSchema = getFieldSchema(fieldName, objectConfig);\n    if(fieldSchema){\n      fieldsSchema[fieldName] = fieldSchema;\n    }\n  });\n  // console.log(\"convertFieldsSchema====fieldsSchema===\", objectConfig.name, fieldsSchema);\n  return fieldsSchema;\n}\n\n\n/**\n  视图过虑器需要支持function，后台转成字符串，前台eval成函数\n  让过虑器支持两种function方式：\n  1. 整个filters为function:\n  如：\n  filters: ()->\n    return [[[\"object_name\",\"=\",\"project_issues\"],'or',[\"object_name\",\"=\",\"tasks\"]]]\n  2. filters内的filter.value为function\n  如：\n  filters: [[\"object_name\", \"=\", ()->\n    return \"project_issues\"\n  ]]\n  或\n  filters: [{\n    \"field\": \"object_name\"\n    \"operation\": \"=\"\n    \"value\": ()->\n      return \"project_issues\"\n  }]\n */\nconst getListViewSchema = (listView: any)=>{\n  if(listView._filters){\n    let filters = saveEval(`(${listView._filters})`);\n    return Object.assign({}, listView, {filters});\n  }\n  else if(_.isArray(listView.filters)){\n    _.forEach(listView.filters, function(filter: any, _index) {\n      if (_.isArray(filter)) {\n        if (filter.length === 4 && _.isString(filter[2]) && filter[3] === \"FUNCTION\") {\n          filter[2] = saveEval(\"(\" + filter[2] + \")\");\n          filter.pop();\n        }\n        if (filter.length === 4 && _.isString(filter[2]) && filter[3] === \"DATE\") {\n          filter[2] = new Date(filter[2]);\n          return filter.pop();\n        }\n      } else if (_.isObject(filter) as any) {\n        if (_.isString(filter && filter._value)) {\n          return filter.value = saveEval(\"(\" + filter._value + \")\");\n        } else if (filter._is_date === true) {\n          return filter.value = new Date(filter.value);\n        }\n      }\n    });\n    return listView;\n  }\n  else{\n    return listView;\n  }\n}\n\n/**\n * 转换传入的objectConfig中list_views，相关函数为字段串格式转换为函数\n * @param objectConfig 对象配置文件中列表视图所属对象的配置\n * @returns 转换后的list_views\n */\n export function getListViewsSchema(objectConfig: any) {\n  let listViewsSchema: any = {}\n  _.each(objectConfig.list_views, (listView, listName) => {\n    const listViewSchema = getListViewSchema(listView);\n    if(listViewSchema){\n      listViewsSchema[listName] = listViewSchema;\n    }\n  });\n  return listViewsSchema;\n}\n\n/**\n * 转换传入的objectConfig中的fields及list_views\n * @param objectConfig 对象配置文件中该字段所属对象的配置\n * @returns 转换后的对象\n */\n export function convertObjectSchema(objectConfig: any) {\n  objectConfig.fields = getFieldsSchema(objectConfig);\n  // console.log(\"convertObjectSchema====objectConfig.fields===\", objectConfig.name, objectConfig.fields);\n  objectConfig.list_views = getListViewsSchema(objectConfig);\n  // console.log(\"convertObjectSchema====objectConfig.list_views===\", objectConfig.name, objectConfig.list_views);\n}\n\nexport function getObjectOdataExpandFields(object: any,columns: string[]) {\n  var expand_fields, fields:[];\n  expand_fields = [];\n  fields = object.fields;\n  if (!columns || columns.length ==0) {\n    columns = _.keys(fields);\n  }\n  _.each(columns,(n)=>{\n    var ref1, ref2;\n    if(fields){\n      if (((ref1 = fields[n]) != null ? ref1.type : void 0) === \"master_detail\" || ((ref2 = fields[n]) != null ? ref2.type : void 0) === \"lookup\") {\n        return expand_fields.push(n)\n      }\n    }\n  })\n  return expand_fields.join(\",\");\n}\n\nexport function convertRecordsForLookup(data, fieldsSchema) {\n  /* TODO: lookup组件中reference_to是数组时，初始化值需要 {o:'contract_types',ids:['fcxTeWMEvgdMQnvwZ'],labels:[\"合同分类1\"]} 这种格式，\n  故 将以下格式转换下。\n  contracts_reference_to_func: {\n    \"reference_to._o\": \"contract_types\",\n    \"reference_to.o\": \"contract_types\",\n    '_NAME_FIELD_VALUE': \"合同分类1\",\n    '_id': \"fcxTeWMEvgdMQnvwZ\"\n  }, \n  当lookup组件中 reference_to不是数组，初始化值需要 string || [] ; 也就是 '_id' 的值。\n  */\n  let recoreds=data && data.value;\n  if(recoreds && recoreds.length){\n    data.value = recoreds.map((record: any)=>{\n      _.each(record, (fieldValue, key)=>{\n        if(fieldValue){\n          const fieldSchema = fieldsSchema && fieldsSchema[key];\n          if(fieldSchema && ['lookup', 'master_detail'].indexOf(fieldSchema.type) > -1 && fieldSchema.reference_to){\n            let fieldReferenceTo :any;\n            if(fieldSchema.reference_to){\n              fieldReferenceTo=fieldSchema.reference_to;\n              if(_.isFunction(fieldReferenceTo)){\n                fieldReferenceTo = fieldReferenceTo();\n              }\n            }\n            if(fieldReferenceTo && fieldReferenceTo.length){\n              if(!_.isArray(fieldValue)){\n                fieldValue=[fieldValue];\n              }\n              let referenceTo:any, ids=[], labels=[];\n              \n              _.forEach(fieldValue,(val)=>{\n                referenceTo=val['reference_to.o'];\n                if(referenceTo){\n                  const id = val[\"_id\"];\n                  const label = val[\"_NAME_FIELD_VALUE\"];\n                  if(id){\n                    ids.push(id)\n                  }\n                  if(label){\n                    labels.push(label)\n                  }\n                }\n              })\n              if(referenceTo){\n                if( _.isArray(fieldReferenceTo)){\n                  record[key].o = referenceTo;\n                  if(ids && ids.length){\n                    record[key].ids = ids;\n                  }\n                  if(labels && labels.length){\n                    record[key].labels = labels;\n                  }\n                  delete record[key][\"reference_to._o\"];\n                  delete record[key][\"reference_to.o\"];\n                  delete record[key]._NAME_FIELD_VALUE;\n                  delete record[key]._id;\n                }else{\n                  record[key] = fieldSchema.multiple ? ids : ids[0];\n                }\n              }\n            }\n          }\n        }\n      });\n      return record;\n    });\n  }\n  return data;\n}","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-9-2!./Field.less\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".builder-form .ant-form-item.field {\\n  margin-bottom: 0;\\n  padding-bottom: 2px;\\n  padding-top: 2px;\\n}\\n.builder-form .ant-form-item.field.mode-read {\\n  border-bottom: 1px solid #dddbda;\\n}\\n.builder-form .ant-form-item.field.mode-edit {\\n  padding-bottom: 4px;\\n  padding-top: 4px;\\n}\\n.builder-form .ant-form-item.field.mode-edit .ant-input-number {\\n  width: 100%;\\n}\\n.builder-form .ant-form-item.field.mode-edit .ant-picker {\\n  width: 100%;\\n}\\n.builder-form .ant-form-vertical .ant-form-item-label {\\n  padding: 0;\\n}\\n.builder-form .ant-form-item-control-input {\\n  min-height: 16px;\\n}\\n.builder-form .ant-form-item .ant-form-item-label {\\n  white-space: inherit;\\n  padding-bottom: 0;\\n}\\n.builder-form .ant-form-item .ant-form-item-label > label {\\n  font-size: 12px;\\n  height: 24px;\\n  color: var(--lwc-colorTextLabel, #3e3e3c);\\n  height: auto;\\n  white-space: inherit;\\n}\\n.builder-form .slds-section__title {\\n  font-weight: inherit;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://../builder-form/src/components/Field.less\"],\"names\":[],\"mappings\":\"AAAA;EAEI,gBAAA;EACA,mBAAA;EACA,gBAAA;AAAJ;AACI;EACE,gCAAA;AACN;AAOI;EAOE,mBAAA;EACA,gBAAA;AAXN;AAGI;EAEI,WAAA;AAFR;AAAI;EAKI,WAAA;AAFR;AAjBA;EA2BI,UAAA;AAPJ;AApBA;EA8BI,gBAAA;AAPJ;AAvBA;EAqCM,oBAAA;EACA,iBAAA;AAXN;AA3BA;EAwCQ,eAAA;EACA,YAAA;EACA,yCAAA;EACA,YAAA;EACA,oBAAA;AAVR;AAlCA;EAyDI,oBAAA;AApBJ\",\"sourcesContent\":[\".builder-form {\\n  .ant-form-item.field {\\n    margin-bottom: 0;\\n    padding-bottom: 2px;\\n    padding-top: 2px;\\n    &.mode-read {\\n      border-bottom: 1px solid #dddbda;\\n      // &.type-object {\\n      //   border-bottom: 0\\n      // }\\n      // &.type-grid {\\n      //   border-bottom: 0\\n      // }\\n    }\\n    &.mode-edit {\\n      .ant-input-number {\\n        width: 100%\\n      }\\n      .ant-picker {\\n        width: 100%\\n      }\\n      padding-bottom: 4px;\\n      padding-top: 4px;\\n    }\\n  }\\n  \\n  .ant-form-vertical .ant-form-item-label {\\n    padding: 0;\\n  }\\n  .ant-form-item-control-input {\\n    min-height: 16px;\\n  }\\n\\n\\n  .ant-form-item {\\n\\n    .ant-form-item-label {\\n      white-space: inherit;\\n      padding-bottom: 0;\\n      > label {\\n        font-size: 12px;\\n        height: 24px;\\n        color: var(--lwc-colorTextLabel,rgb(62, 62, 60));\\n        height: auto;\\n        white-space: inherit;\\n      }\\n    }\\n\\n    // &.field.type-object > .ant-form-item-label {\\n    //   display: none;\\n    // }\\n    // &.field.type-grid > .ant-form-item-label {\\n    //   display: none;\\n    // }\\n  }\\n\\n  .slds-section__title {\\n    font-weight: inherit\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-9-2!./ObjectForm.less\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".object-form {\\n  padding: 0;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://../builder-object/src/components/ObjectForm.less\"],\"names\":[],\"mappings\":\"AAAA;EACE,UAAA;AACF\",\"sourcesContent\":[\".object-form {\\n  padding: 0;\\n  // .ant-form-item {\\n  //   margin-bottom: 0;\\n  // }\\n  // .ant-form-vertical .ant-form-item-label {\\n  //   padding: 0;\\n  // }\\n  // .ant-form-item-control-input {\\n  //   min-height: 16px;\\n  // }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-9-2!./ObjectTable.less\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".object-table .ant-pro-table-list-toolbar-container {\\n  padding: 8px;\\n  padding-bottom: 8px;\\n}\\n.object-table .ant-pro-table-list-toolbar-filter .ant-form .ant-pro-form-light-filter .ant-pro-form-light-filter-container {\\n  overflow: hidden;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://../builder-object/src/components/ObjectTable.less\"],\"names\":[],\"mappings\":\"AAAA;EAmCI,YAAA;EACA,mBAAA;AAjCJ;AAHA;EA2CU,gBAAA;AArCV\",\"sourcesContent\":[\".object-table {\\n  // .ant-pro-table-search {\\n  //   // margin-bottom: 0;\\n  //   // padding-left: 0;\\n  //   // padding-right: 0;\\n  //   form {\\n  //     width: 100%;\\n  //     .ant-row {\\n  //       width: 100%;\\n  //     }\\n  //   }\\n  //   .ant-form-item {\\n  //     -webkit-box-sizing: border-box;\\n  //     box-sizing: border-box;\\n  //     margin: 0;\\n  //     padding: 0;\\n  //     color: rgba(0, 0, 0, 0.85);\\n  //     font-size: 14px;\\n  //     font-variant: tabular-nums;\\n  //     line-height: 1.5715;\\n  //     list-style: none;\\n  //     -webkit-font-feature-settings: \\\"tnum\\\";\\n  //     font-feature-settings: \\\"tnum\\\", \\\"tnum\\\";\\n  //     margin-bottom: 24px;\\n  //     vertical-align: top;\\n  //   }\\n  // }\\n  // .ant-card-body {\\n  //   padding-left: 0;\\n  //   padding-right: 0;\\n  // }\\n  // .ant-table-tbody > tr:last-child > td {\\n  //   border: none;\\n  // }\\n  .ant-pro-table-list-toolbar-container {\\n    padding: 8px;\\n    padding-bottom: 8px;\\n  }\\n  .ant-pro-table-list-toolbar-filter{\\n    .ant-form{\\n      .ant-pro-form-light-filter{\\n        .ant-pro-form-light-filter-container{\\n          // 列表过滤条件区域，如果最后一个过滤字段是下拉框字段会显示水平滚动条\\n          overflow: hidden;\\n        }\\n      }\\n    }\\n  }\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-9-2!./ObjectTree.less\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ant-tree-treenode {\\n  width: 100%;\\n  display: flex;\\n  justify-content: flex-start;\\n}\\n.ant-tree-node-content-wrapper {\\n  flex: 1;\\n  text-align: left;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://../builder-object/src/components/ObjectTree.less\"],\"names\":[],\"mappings\":\"AAAA;EACE,WAAA;EACA,aAAA;EACA,2BAAA;AACF;AACA;EACE,OAAA;EACA,gBAAA;AACF\",\"sourcesContent\":[\".ant-tree-treenode {\\n  width: 100%;\\n  display: flex;\\n  justify-content: flex-start;\\n}\\n.ant-tree-node-content-wrapper {\\n  flex: 1;\\n  text-align: left;\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-9-2!./ObjectList.less\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".object-list-item {\\n  margin-bottom: 4px;\\n  padding: 4px;\\n  display: flex;\\n  justify-content: flex-start;\\n  align-items: center;\\n  user-select: none;\\n  cursor: pointer;\\n  padding: 0 4px;\\n  transition: all 0.3s;\\n  background: transparent;\\n  border-radius: 2px;\\n}\\n.object-list-item:hover {\\n  background-color: #f5f5f5;\\n}\\n.object-list-item.selected {\\n  background-color: #bae7ff;\\n}\\n.object-list-item > :first-child {\\n  margin-right: 8px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://../builder-object/src/components/ObjectList.less\"],\"names\":[],\"mappings\":\"AAAA;EACE,kBAAA;EACA,YAAA;EACA,aAAA;EACA,2BAAA;EACA,mBAAA;EACA,iBAAA;EACA,eAAA;EACA,cAAA;EACA,oBAAA;EACA,uBAAA;EACA,kBAAA;AACF;AACE;EACE,yBAAA;AACJ;AACE;EACE,yBAAA;AACJ;AAEE;EACE,iBAAA;AAAJ\",\"sourcesContent\":[\".object-list-item {\\n  margin-bottom: 4px;\\n  padding: 4px;\\n  display: flex;\\n  justify-content: flex-start;\\n  align-items: center;\\n  user-select: none;\\n  cursor: pointer;\\n  padding: 0 4px;\\n  transition: all 0.3s;\\n  background: transparent;\\n  border-radius: 2px;\\n\\n  &:hover {\\n    background-color: #f5f5f5;\\n  }\\n  &.selected {\\n    background-color: #bae7ff;\\n  }\\n\\n  & > :first-child {\\n    margin-right: 8px;\\n  }\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n"],"sourceRoot":""}