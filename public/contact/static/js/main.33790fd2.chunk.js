(this["webpackJsonpreact-demo-app"]=this["webpackJsonpreact-demo-app"]||[]).push([[0],{442:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildQueryString=void 0,t.buildQueryString=function(e){var t=Object.keys(e);if(0===t.length)return"";for(var n="?",r=0;r<t.length;r++){var a=t[r];n+=a+"="+encodeURIComponent(e[a]),r<t.length-1&&(n+="&")}return n}},478:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.HEADER_X_VERSION_ID=t.DEFAULT_LIMIT_BEFORE=t.DEFAULT_LIMIT_AFTER=t.SteedosClient=void 0;var o=i(n(838));t.SteedosClient=o.default,Object.defineProperty(t,"DEFAULT_LIMIT_AFTER",{enumerable:!0,get:function(){return o.DEFAULT_LIMIT_AFTER}}),Object.defineProperty(t,"DEFAULT_LIMIT_BEFORE",{enumerable:!0,get:function(){return o.DEFAULT_LIMIT_BEFORE}}),Object.defineProperty(t,"HEADER_X_VERSION_ID",{enumerable:!0,get:function(){return o.HEADER_X_VERSION_ID}})},521:function(e,t,n){},522:function(e,t,n){},838:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function c(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(c){i=[6,c],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},c=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){a={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o},s=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ClientError=t.DEFAULT_LIMIT_AFTER=t.DEFAULT_LIMIT_BEFORE=t.HEADER_X_VERSION_ID=void 0;var l=u(n(839)),d=n(840),f=n(442),p=u(n(841)),h=u(n(850)),b="X-Cluster-Id";t.HEADER_X_VERSION_ID="X-Version-Id";t.DEFAULT_LIMIT_BEFORE=30,t.DEFAULT_LIMIT_AFTER=30;var m=function(){function e(){var e=this;this.LOGIN_TOKEN_KEY="Meteor.loginToken",this.LOGIN_TOKEN_EXPIRES_KEY="Meteor.loginTokenExpires",this.USER_ID_KEY="Meteor.userId",this.logToConsole=!1,this._lastLoginTokenWhenPolled=null,this.loginExpirationInDays=null,this.serverVersion="",this.clusterId="",this.token="",this.spaceId="",this.authToken="",this.csrf="",this.url="",this.urlVersion="",this.userAgent=null,this.enableLogging=!1,this.defaultHeaders={"Content-Type":"application/json"},this.userId="",this.diagnosticId="",this.includeCookies=!0,this.isRudderKeySet=!1,this.translations={connectionError:"There appears to be a problem with your internet connection.",unknownError:"We received an unexpected status code from the server."},this.sobjects={},this.graphql=new h.default(this),this.getTranslations=function(t){return e.doFetch(t,{method:"get"})},this.logClientError=function(e,t){void 0===t&&(t="ERROR")},this.login=function(t,n,r,a){void 0===r&&(r=""),void 0===a&&(a=""),e.trackEvent("api","api_users_login");var i={device_id:a,user:t,password:n,token:r,locale:"zh-cn"};return e.doFetch(e.getAccountsRoute()+"/password/login",{method:"POST",body:JSON.stringify(i)})},this.createUser=function(t,n,r,a){e.trackEvent("api","api_users_createUser");var i={};return n&&(i.t=n),r&&(i.iid=r),a&&(i.r=a),e.doFetch(e.getAccountsRoute()+"/password/register"+f.buildQueryString(i),{method:"POST",body:JSON.stringify(t)})},this.createSpace=function(t){e.trackEvent("api","api_users_createTenant");return e.doFetch(e.getBaseRoute()+"/api/v4/spaces/register/tenant"+f.buildQueryString({}),{method:"POST",body:JSON.stringify({name:t})})},this.sendVerificationToken=function(t){e.trackEvent("api","api_users_verify");var n={user:t};return e.doFetch(e.getAccountsRoute()+"/password/sendVerificationCode",{method:"POST",body:JSON.stringify(n)})},this.getSettings=function(){return e.doFetch(e.getAccountsRoute()+"/settings",{method:"get"})},this.getMe=function(){return e.doFetch(e.getAccountsRoute()+"/user",{method:"get"})},this.getMySpaces=function(){return e.doFetch(e.getAccountsRoute()+"/user/spaces",{method:"get"})},this.logout=function(){return i(e,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return this.trackEvent("api","api_users_logout"),[4,this.doFetchWithResponse(this.getAccountsRoute()+"/logout",{method:"post"})];case 1:return(e=t.sent().response).ok&&(this.token=""),this.serverVersion="",[2,e]}}))}))},this.doFetch=function(t,n){return i(e,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.doFetchWithResponse(t,n)];case 1:return[2,e.sent().data]}}))}))},this.doFetchWithResponse=function(n,r){return i(e,void 0,void 0,(function(){var e,a,i,u,d,f,p;return o(this,(function(o){switch(o.label){case 0:return[4,l.default(n,this.getOptions(r))];case 1:e=o.sent(),a=function(e){var t=new Map,n=new Map;return e.forEach((function(e,r){var a=r.replace(/\b[a-z]/g,(function(e){return e.toUpperCase()})),i=e;if(e&&e.match(/\n\S+:\s\S+/)){var o=e.split("\n");i=o.shift();var u=new Map(o.map((function(e){return e.split(/:\s/)})));n=new Map(s(s([],c(n)),c(u)))}t.set(a,i)})),new Map(s(s([],c(t)),c(n)))}(e.headers),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,e.json()];case 3:return i=o.sent(),[3,5];case 4:throw o.sent(),new v(this.getUrl(),{message:"Received invalid response from the server.",intl:{id:"mobile.request.invalid_response",defaultMessage:"Received invalid response from the server."},url:n});case 5:if(a.has(t.HEADER_X_VERSION_ID)&&!a.get("Cache-Control")&&(u=a.get(t.HEADER_X_VERSION_ID))&&this.serverVersion!==u&&(this.serverVersion=u),a.has(b)&&(d=a.get(b))&&this.clusterId!==d&&(this.clusterId=d),e.ok)return[2,{response:e,headers:a,data:i}];throw f=i&&i.error?i.error:i,p=f.message||"",this.logToConsole&&console.error(p),new v(this.getUrl(),{message:p,server_error_id:i.id,status_code:f.code,url:n})}}))}))},this.changePassword=function(t,n){return e.doFetch(e.getAccountsRoute()+"/password/changePassword",{method:"POST",body:JSON.stringify({oldPassword:t,newPassword:n})})},this.verifyEmail=function(t,n){return e.doFetch(e.getAccountsRoute()+"/password/verify/email",{method:"POST",body:JSON.stringify({email:t,code:n})})},this.verifyMobile=function(t,n){return e.doFetch(e.getAccountsRoute()+"/password/verify/mobile",{method:"POST",body:JSON.stringify({mobile:t,code:n})})},this.sobject=function(e){return this.sobjects=this.sobjects||{},this.sobjects[e]=this.sobjects[e]||new p.default(this,e)}}return e.prototype.getUrl=function(){if(!this.url){var e=new URL(window.location.href).pathname.split("/accounts"),t="";return e.length>1&&(t=e[0]),t}return this.url},e.prototype.getAbsoluteUrl=function(e){return"string"===typeof e&&e.startsWith("/")?this.getUrl()+e:e},e.prototype.setUrl=function(e){this.url=e},e.prototype.setUserAgent=function(e){this.userAgent=e},e.prototype.getToken=function(){return this.token},e.prototype.setToken=function(e){this.token=e,this.authToken=this.getSpaceId()+","+e},e.prototype.getSpaceId=function(){return this.spaceId},e.prototype.setSpaceId=function(e){this.spaceId=e,this.authToken=e+","+this.getToken()},e.prototype.getAuthToken=function(){return this.authToken},e.prototype.setCSRF=function(e){this.csrf=e},e.prototype.setAcceptLanguage=function(e){this.defaultHeaders["Accept-Language"]=e},e.prototype.setEnableLogging=function(e){this.enableLogging=e},e.prototype.setIncludeCookies=function(e){this.includeCookies=e},e.prototype.setUserId=function(e){this.userId=e},e.prototype.setUserRoles=function(e){this.userRoles=e},e.prototype.setDiagnosticId=function(e){this.diagnosticId=e},e.prototype.enableRudderEvents=function(){this.isRudderKeySet=!0},e.prototype.getServerVersion=function(){return this.serverVersion},e.prototype.getUrlVersion=function(){return this.urlVersion},e.prototype.getBaseRoute=function(){return""+this.getUrl()+this.urlVersion},e.prototype.getAccountsRoute=function(){return this.getBaseRoute()+"/accounts"},e.prototype.getBootstrapRoute=function(){return this.getUrl()+"/api/bootstrap/"+this.getSpaceId()},e.prototype.getCSRFFromCookie=function(){if("undefined"!==typeof document&&"undefined"!==typeof document.cookie)for(var e=document.cookie.split(";"),t=0;t<e.length;t++){var n=e[t].trim();if(n.startsWith("MMCSRF="))return n.replace("MMCSRF=","")}return""},e.prototype.getOptions=function(e){var t,n=a({},e),r=a(((t={})["X-Requested-With"]="XMLHttpRequest",t),this.defaultHeaders);this.authToken&&(r.Authorization="Bearer "+this.authToken);var i=this.csrf||this.getCSRFFromCookie();return e.method&&"get"!==e.method.toLowerCase()&&i&&(r["X-CSRF-Token"]=i),this.includeCookies&&(n.credentials="include"),this.userAgent&&(r["User-Agent"]=this.userAgent),n.headers&&Object.assign(r,n.headers),a(a({},n),{headers:r})},e.prototype.trackEvent=function(e,t,n){if(this.isRudderKeySet)Object.assign({category:e,type:t,user_actual_id:this.userId},n)},e}();t.default=m;var v=function(e){function t(t,n){var r=e.call(this,n.message+": "+d.cleanUrlForLogging(t,n.url||""))||this;return r.message=n.message,r.url=n.url,r.intl=n.intl,r.server_error_id=n.server_error_id,r.status_code=n.status_code,Object.defineProperty(r,"message",{enumerable:!0}),r}return r(t,e),t}(Error);t.ClientError=v},839:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(396),a={},i={};t.default=function(e,t){if(void 0===e&&(e=null),void 0===t&&(t={headers:{}}),e=e||t.url,"GET"===t.method||!t.method){var n=i[e],o=a[""+e+n];return n&&(t.headers["If-None-Match"]=n),r(e,t).then((function(t){if(304===t.status)return o.clone();if(200===t.status){var n=t.headers.get("Etag");n&&(a[""+e+n]=t.clone(),i[e]=n)}return t}))}return Reflect.apply(r,void 0,[e,t])}},840:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cleanUrlForLogging=void 0,t.cleanUrlForLogging=function(e,t){var n=t,r=(n=n.substring(e.length)).indexOf("?");-1!==r&&(n=n.substring(0,r));var a=["api","v4","users","teams","scheme","name","members","channels","posts","reactions","commands","files","preferences","hooks","incoming","outgoing","oauth","apps","emoji","brand","image","data_retention","jobs","plugins","roles","system","timezones","schemes","redirect_location","patch","mfa","password","reset","send","active","verify","terms_of_service","login","logout","ids","usernames","me","username","email","default","sessions","revoke","all","audits","device","status","search","switch","authorized","authorize","deauthorize","tokens","disable","enable","exists","unread","invite","batch","stats","import","schemeRoles","direct","group","convert","view","search_autocomplete","thread","info","flagged","pinned","pin","unpin","opengraph","actions","thumbnail","preview","link","delete","logs","ping","config","client","license","websocket","webrtc","token","regen_token","autocomplete","execute","regen_secret","policy","type","cancel","reload","environment","s3_test","file","caches","invalidate","database","recycle","compliance","reports","cluster","ldap","test","sync","saml","certificate","public","private","idp","elasticsearch","purge_indexes","analytics","old","webapp","fake"];return n=n.split("/").map((function(e){return""!==e&&-1===a.indexOf(e)?"<filtered>":e})).join("/"),-1!==r&&(n+="?<filtered>"),n}},841:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function c(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(c){i=[6,c],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(842),o=n(442),c=n(206),s=function(){function e(e,t){this.client=e,this.objectName=t}return e.prototype.getFilter=function(e){return c.isArray(e)?i.formatFiltersToODataQuery(e):e},e.prototype.getSelect=function(e){return c.isArray(e)?e.toString():e},e.prototype.getQueryParams=function(e,t,n){var r={},a=this.getFilter(e);a&&(r.$filter=a);var i=this.getSelect(t);return i&&(r.$select=i),n&&(n.pageSize&&(r.$top=n.pageSize),n.current&&(r.$skip=n.current*n.pageSize),"string"===typeof n.sort&&(r.$orderby=n.sort)),r},e.prototype.getConfig=function(){return r(this,void 0,void 0,(function(){var e,t;return a(this,(function(n){switch(n.label){case 0:return this.config?[3,2]:(e=this.client.getBootstrapRoute()+"/"+this.objectName,t=this,[4,this.client.doFetch(e,{method:"get"})]);case 1:t.config=n.sent(),n.label=2;case 2:return[2,this.config]}}))}))},e.prototype.find=function(e,t,n){return r(this,void 0,void 0,(function(){var r,i;return a(this,(function(a){switch(a.label){case 0:return r=this.getQueryParams(e,t,n),i=this.client.getBaseRoute()+"/api/v4/".concat(this.objectName)+o.buildQueryString(r),[4,this.client.doFetch(i,{method:"get"})];case 1:return[2,a.sent()]}}))}))},e.prototype.findOne=function(e,t,n){return r(this,void 0,void 0,(function(){return a(this,(function(e){return[2]}))}))},e.prototype.record=function(e,t){return r(this,void 0,void 0,(function(){return a(this,(function(e){return[2]}))}))},e.prototype.retrieve=function(e,t){return r(this,void 0,void 0,(function(){return a(this,(function(e){return[2]}))}))},e.prototype.insert=function(e){return r(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return t=this.client.getBaseRoute()+"/api/v4/"+this.objectName,[4,this.client.doFetch(t,{method:"POST",body:JSON.stringify(e)})];case 1:return[2,n.sent().value]}}))}))},e.prototype.update=function(e,t){return r(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return n=this.client.getBaseRoute()+"/api/v4/"+this.objectName+"/"+e,[4,this.client.doFetch(n,{method:"put",body:JSON.stringify(t)})];case 1:return[2,r.sent().value]}}))}))},e.prototype.delete=function(e){return r(this,void 0,void 0,(function(){return a(this,(function(e){return[2]}))}))},e.prototype.count=function(e){return r(this,void 0,void 0,(function(){return a(this,(function(e){return[2]}))}))},e}();t.default=s},850:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function c(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(c){i=[6,c],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(206),o=function(){function e(e){this.client=e}return e.prototype.query=function(e){return r(this,void 0,void 0,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:return t=this.client.getBaseRoute()+"/graphql",n={query:e},[4,this.client.doFetch(t,{method:"POST",body:JSON.stringify(n)})];case 1:return[2,r.sent()]}}))}))},e.prototype.insert=function(e,t){return r(this,void 0,void 0,(function(){var n,r,o;return a(this,(function(a){switch(a.label){case 0:return n=this.client.getBaseRoute()+"/graphql",r=t,i.isString(r)||(r=JSON.stringify(t)),o={query:"mutation {\n                "+e+"__insert(data:"+r+")\n            }"},console.log("insert body",o),[4,this.client.doFetch(n,{method:"POST",body:JSON.stringify(o)})];case 1:return[2,a.sent()]}}))}))},e.prototype.update=function(e,t,n){return r(this,void 0,void 0,(function(){var r,o,c;return a(this,(function(a){switch(a.label){case 0:return r=this.client.getBaseRoute()+"/graphql",o=n,i.isString(o)||(o=JSON.stringify(n)),c={query:"mutation {\n                "+e+'__update(_id:"'+t+'", data:'+o+")\n            }"},[4,this.client.doFetch(r,{method:"POST",body:JSON.stringify(c)})];case 1:return[2,a.sent()]}}))}))},e.prototype.delete=function(e,t){return r(this,void 0,void 0,(function(){var n,r;return a(this,(function(a){switch(a.label){case 0:return n=this.client.getBaseRoute()+"/graphql",r={query:"mutation {\n                "+e+'__delete(_id:"'+t+'")\n            }'},[4,this.client.doFetch(n,{method:"POST",body:JSON.stringify(r)})];case 1:return[2,a.sent()]}}))}))},e}();t.default=o},854:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(37),o=n.n(i),c=(n(521),n(232)),s=n(101),u=n(69),l=(n(522),n(87)),d=Object(r.createContext)(null),f=n(36),p=(f.a.model({id:f.a.identifier,name:f.a.string,required:f.a.boolean,readonly:f.a.boolean}),f.a.model({id:f.a.identifier,mode:f.a.union(f.a.string,f.a.undefined)}).actions((function(e){return{setMode:function(t){e.mode=t}}}))),h=f.a.model({id:f.a.identifier}).actions((function(e){return{}})),b=f.a.model({id:f.a.identifier,datasource:f.a.string,json:f.a.string}),m=f.a.model({currentObjectApiName:f.a.union(f.a.string,f.a.undefined,f.a.null),currentRecordId:f.a.union(f.a.string,f.a.undefined,f.a.null),forms:f.a.optional(f.a.map(p),{}),tables:f.a.optional(f.a.map(h),{}),objects:f.a.optional(f.a.map(b),{})}).actions((function(e){return{setCurrentObjectApiName:function(t){e.currentObjectApiName=t},setCurrentRecordId:function(t){e.currentRecordId=t},getCurrentObjectApiName:function(t){return e.currentObjectApiName},getCurrentRecordId:function(t){return e.currentRecordId=t},setInitialState:function(t){Object.assign(e,t)}}})).create({currentObjectApiName:null,currentRecordId:null,forms:{},tables:{},objects:{}});function v(e){var t=e.initialState,n=void 0===t?{}:t,r=e.children;return m.setInitialState(n),a.a.createElement(d.Provider,{value:m},r)}function y(){var e=Object(r.useContext)(d);if(null===e)throw new Error("Store cannot be null, please add a context provider");return e}Object(l.a)((function(e){var t=e.children,n=(function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n])}(e,["children"]),y());n.currentObjectApiName,n.currentRecordId;return a.a.createElement("div",null,t)}));var g=n(13),O=n(96),j=n.n(O),_=n(8),E=n(145);function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var S=Object(l.a)((function(e){var t=y(),n=e.name,r=void 0===n?"default":n,i=e.mode,o=void 0===i?"read":i,c=e.layout,s=e.children,u=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["name","mode","layout","children"]);t.forms[r]||(t.forms[r]=p.create({id:r,mode:o}));var l="horizontal"===c?{labelAlign:"left",labelCol:{span:8},wrapperCol:{span:16}}:null,d="read"!==t.forms[r].mode&&{searchConfig:{resetText:"\u53d6\u6d88",submitText:"\u63d0\u4ea4"},resetButtonProps:{onClick:function(){t.forms[r].setMode("read")}}},f=T({name:r,mode:t.forms[r].mode,layout:c},l,u,{submitter:d,contentRender:function(e,t){return a.a.createElement(a.a.Fragment,null,e,t)}});return a.a.createElement(E.a,f,s)}));S.propTypes={name:_.string,mode:_.string,layout:_.string,initialValues:_.object};var w=n(119),x=n(866),R=n(867),k=n(864),N=n(865),C=n(61),F=n(303);function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function A(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var P=Object(l.a)((function(e){var t=y(),n=a.a.useContext(C.a),r=n.name?n.name:"default",i=e.attributes,o=e.readonly,c=e.valueType,s=e.options,u=A(e,["attributes","readonly","mode","valueType","options"]),d=t.forms[r].mode,f=I({},i,{style:{borderBottom:"read"==d?"1px solid #dddbda":""}}),p={options:s};"select"==c&&(p.showSearch=!0,p.showArrow=!0),"switch"!=c&&(p.style={width:"100%"});var h=Object(l.a)((function(e){var t=y(),n=e.readonly,i=e.mode,o=A(e,["readonly","mode"]),c=I({readonly:n,emptyText:""},o);if(!n&&"edit"===i)return a.a.createElement(w.a,I({mode:"edit"},c));var s=function(){t.forms[r].setMode("edit")},u=n?a.a.createElement(k.a,{color:"gray.600",opacity:.4,_groupHover:{opacity:1}}):a.a.createElement(N.a,{color:"gray.600",opacity:.4,_groupHover:{opacity:1},onClick:function(){s()}});return a.a.createElement(x.a,I({},{},{role:"group",onDoubleClick:function(){n||s()}}),a.a.createElement(R.a,{flex:"1"},a.a.createElement(w.a,I({mode:"read"},c))),a.a.createElement(R.a,{width:"16px"},u))})),b=Object(F.a)((function(e){return a.a.createElement(h,I({valueType:c,fieldProps:e.fieldProps},e,{mode:d,readonly:o}))}),{valueType:c});return Object.assign(p,u),a.a.createElement(b,I({},u,{mode:d,formItemProps:f,fieldProps:p}))}));P.propTypes={name:_.string,label:_.string,valueType:_.string};n(59),n(230);var L=n(298),D=a.a.createContext({}),U=n(182),q=n(84);function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var B={href:{render:function(e,t){t.fieldProps;return a.a.createElement("a",{href:e},e)},renderFormItem:function(e,t){return a.a.createElement(q.a,M({placeholder:"\u8bf7\u8f93\u5165\u94fe\u63a5"},null==t?void 0:t.fieldProps))}},email:{render:function(e,t){t.fieldProps;var n="mailto:"+e;return a.a.createElement("a",{href:n},e)},renderFormItem:function(e,t){return a.a.createElement(q.a,z({placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1\u5730\u5740"},null==t?void 0:t.fieldProps))}}},V=n(12),H=n(6),K=n(227),J=n.n(K),W=n(472),X=n.n(W);function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function G(e){var t=e.locale,n=e.valueTypeMap,r=e.children,i={intl:Q({},Y(t)),valueTypeMap:Q({},B,n)},o={locale:$(t)},c=re(t);return a.a.createElement(D.Provider,{value:{intl:c,valueTypeMap:n}},a.a.createElement(H.b,o,a.a.createElement(V.b.Provider,{value:i},r)))}var $=function(e){switch(e){case"en_US":case"zh_CN":return J.a;case"zh_TW":return X.a;default:return J.a}},Y=function(e){switch(e){case"en_US":return V.c;case"zh_CN":return V.e;case"zh_TW":return V.f;default:return V.e}};function Z(e,t,n){var r,a=t.replace(/\[(\d+)\]/g,".$1").split("."),i=e,o=n,c=Object(U.a)(a);try{for(c.s();!(r=c.n()).done;){var s=r.value;if(o=Object(i)[s],i=Object(i)[s],void 0===o)return n}}catch(u){c.e(u)}finally{c.f()}return o}var ee=function(e,t){return{getMessage:function(n,r){var a=Z(t,n,r);return a||(a=Y(e).getMessage(n,"")),a||(a=Z($(e),n)),a||r},locale:e}},te=ee("zh_CN",{form:{save:"\u4fdd\u5b58",cancel:"\u53d6\u6d88"}}),ne=ee("en_US",{form:{save:"Save",cancel:"Cancel"}}),re=function(e){switch(e){case"en_US":return ne;case"zh_CN":case"zh_TW":default:return te}};var ae=n(875),ie=n(872),oe=n(870),ce=n(296),se=n(234),ue=(n(650),n(474)),le=n.n(ue),de=(n(652),n(475)),fe=n.n(de),pe=(n(654),n(297)),he=n.n(pe),be=n(125),me=(n(664),n(476),n(338),n(209),n(667),n(477),n(398),n(211)),ve=n.n(me),ye=(n(483),Object(l.a)((function(e){var t=y(),n=e.name,i=void 0===n?"default":n,o=e.mode,c=void 0===o?"edit":o,s=e.layout,u=void 0===s?"vertical":s,l=Object(g.e)(e,["name","mode","layout"]);t.forms[i]||(t.forms[i]=p.create({id:i,mode:c}));var d=Object(r.useContext)(Ae),f=e.objectApiName;if(!f)return a.a.createElement("div",null,"\u8bf7\u8f93\u5165\u5bf9\u8c61\u540d");var h=e.recordId||"",b=["_id","=",h],m=["name","type","number_of_employees","description","email","industry","rating","salutation","startdate__c","datetime__c","state","summary__c","website","annual_revenue","fn__c"],v=Object(ae.a)([{queryKey:f,queryFn:function(){return Object(g.b)(void 0,void 0,void 0,(function(){return Object(g.c)(this,(function(e){switch(e.label){case 0:return[4,d.requestObject(f)];case 1:return[2,e.sent()]}}))}))}},{queryKey:[f,b,m],queryFn:function(){return Object(g.b)(void 0,void 0,void 0,(function(){return Object(g.c)(this,(function(e){switch(e.label){case 0:return[4,d.requestRecords(f,b,m)];case 1:return[2,e.sent()]}}))}))}}]),O=v[0],_=O.isLoading;O.error;var E=O.data;O.isFetching;var T=v[1],w=T.isLoading;T.error;var x=T.data;if(T.isFetching,_||w)return a.a.createElement("div",null,"Object Loading...");var R=E,k=x;je(j.a.keys(R.fields));var N={};if(k.value&&k.value.length>0){var C=k.value[0];m.map((function(e){N[e]=C[e]}))}var F=e.children;if(!F){var I="add"===c?"edit":c;F=a.a.createElement(a.a.Fragment,null,j.a.map(R.fields,(function(e,t){var n={key:t,objectApiName:f,fieldName:t,required:e.required,readonly:e.readonly,mode:I};return a.a.createElement(ge,Object(g.a)({},n))})))}return a.a.createElement(S,Object(g.a)({initialValues:N,mode:c,layout:u,onFinish:function(e){return Object(g.b)(void 0,void 0,void 0,(function(){return Object(g.c)(this,(function(t){switch(t.label){case 0:return"add"!==c?[3,2]:(console.log(e),[4,d.insertRecord(f,e)]);case 1:return t.sent()&&alert("\u6dfb\u52a0\u6210\u529f\uff01"),[3,4];case 2:return h?[4,d.updateRecord(f,h,e)]:[2];case 3:t.sent()&&alert("\u8868\u5355\u4fee\u6539\u6210\u529f\uff01"),t.label=4;case 4:return[2]}}))}))}},l),F)})),function(e,t,n){var r=t.type;switch(r){case"datetime":e.valueType="dateTime",e.readonly=n;break;case"boolean":e.valueType="switch",e.readonly=n;break;case"number":e.valueType="digit",e.readonly=n;break;case"currency":e.valueType="money",e.readonly=n;break;case"autonumber":e.valueType="index",e.readonly=n;break;case"url":e.valueType="href";break;case"lookup":e.valueType="lookup",e.readonly=!1,e.referenceTo=t.reference_to;break;case"master_detail":return a.a.createElement("div",null,"\u672a\u5b9e\u73b0\u5b57\u6bb5\u7c7b\u578b"+r+"\u7684\u7ec4\u4ef6")}return e}),ge=Object(l.a)((function(e){var t=y(),n=Object(r.useContext)(Ae),i=Object(r.useContext)(C.a),o=i.name?i.name:"default",c=e.fieldName;e.required,e.readonly;var s=e.objectApiName,u=Object(ie.a)(s,(function(){return Object(g.b)(void 0,void 0,void 0,(function(){return Object(g.c)(this,(function(e){switch(e.label){case 0:return[4,n.requestObject(s)];case 1:return[2,e.sent()]}}))}))}));u.isLoading,u.error;var l=u.data;if(u.isFetching,!s||!c)return a.a.createElement("div",null,"\u8bf7\u8f93\u5165\u5bf9\u8c61\u540d\u548c\u5b57\u6bb5\u540d");var d=l;if(!d)return a.a.createElement("div",null,"Field Loading...");var f=j.a.find(d.fields,(function(e,t){return c===t}));if(!f)return a.a.createElement("div",null,"\u5bf9\u8c61"+s+"\u4e0a\u672a\u5b9a\u4e49\u5b57\u6bb5"+c);var p=f.type,h=t.forms[o].mode,b={name:c,mode:h,label:f.label,placeholder:f.help,hidden:f.hidden,valueType:p,required:f.required,options:f.options,readonly:f.readonly};return"edit"==b.mode?f.omit&&(b.hidden=!0):"read"==b.mode&&f.omit&&(b.readonly=!0),"formula"===p?(f.data_type,b=ye(b,Object.assign({},f,{type:f.data_type}),!0)):b="summary"===p?ye(b,f.summary_type,!0):ye(b,f,b.readonly),b.required&&(b.rules=[{required:!0,message:"\u8bf7\u8f93\u5165"+b.label+"..."}]),a.a.createElement(P,Object(g.a)({},b))})),Oe={name:"Steedos:ObjectField",inputs:[{name:"required",type:"boolean",friendlyName:"\u5fc5\u987b"},{name:"readonly",type:"boolean",friendlyName:"\u53ea\u8bfb"}],canHaveChildren:!1},je=function(e){var t=j.a.clone(Oe.inputs);t.unshift({name:"fieldName",type:"string",enum:e,helperText:"\u8bf7\u9009\u62e9\u5b57\u6bb5\u540d"});var n=Object.assign({},Oe,{inputs:t});se.a.registerComponent(ge,n)};function _e(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}_e('.object-table .ant-pro-table-search {\n  margin-bottom: 0;\n  padding-left: 0;\n  padding-right: 0;\n}\n.object-table .ant-pro-table-search form {\n  width: 100%;\n}\n.object-table .ant-pro-table-search form .ant-row {\n  width: 100%;\n}\n.object-table .ant-pro-table-search .ant-form-item {\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n  color: rgba(0, 0, 0, 0.85);\n  font-size: 14px;\n  font-variant: tabular-nums;\n  line-height: 1.5715;\n  list-style: none;\n  -webkit-font-feature-settings: "tnum";\n  font-feature-settings: "tnum", "tnum";\n  margin-bottom: 24px;\n  vertical-align: top;\n}\n.object-table .ant-card-body {\n  padding-left: 0;\n  padding-right: 0;\n}\n.object-table .ant-table-tbody > tr:last-child > td {\n  border: none;\n}\n');var Ee=function(e,t,n,r){switch(t){case"text":e.valueType="text",e.readonly=n;break;case"password":e.valueType="password",e.readonly=n;break;case"email":e.valueType="text",e.readonly=n;break;case"percent":e.valueType="percent",e.readonly=n;break;case"avatar":e.valueType="avatar",e.readonly=n;break;case"select":e.valueType="select",e.fieldProps.options=r.options,e.readonly=n;break;case"textarea":e.valueType="textarea",e.hideInSearch=!0,e.copyable=!0,e.ellipsis=!0,e.readonly=n;break;case"date":e.valueType="date",e.readonly=n;break;case"datetime":e.valueType="dateTime",e.readonly=n;break;case"boolean":e.valueType="switch",e.hideInSearch=!0,e.readonly=n;break;case"number":e.valueType="digit",e.readonly=n;break;case"currency":e.valueType="money",e.readonly=n;break;case"autonumber":e.valueType="index",e.hideInSearch=!0,e.readonly=n;break;case"url":e.valueType="href";break;case"lookup":case"master_detail":e.render=function(){return a.a.createElement("div",null,"\u672a\u5b9e\u73b0\u5b57\u6bb5\u7c7b\u578b"+t+"\u7684\u7ec4\u4ef6")}}return e},Te=Object(l.a)((function(e){var t=Object(r.useContext)(Ae),n=y(),i=e.name,o=void 0===i?"default":i,c=e.objectApiName,s=e.columnFields,u=void 0===s?[]:s,l=e.filters;e.defaultClassName;var d=e.onChange,f=Object(g.e)(e,["name","objectApiName","columnFields","filters","defaultClassName","onChange"]);n.forms[o]||(n.forms[o]=h.create({id:o}));var p=Object(ie.a)(c+"_schema",(function(){return Object(g.b)(void 0,void 0,void 0,(function(){return Object(g.c)(this,(function(e){switch(e.label){case 0:return[4,t.requestObject(c)];case 1:return[2,e.sent()]}}))}))}));p.isLoading,p.error;var b=p.data;p.isFetching;var m=b,v=Object(g.d)(Object(r.useState)([]),2),O=v[0],_=v[1];Object(r.useEffect)((function(){if(m){var e=[];we(j.a.keys(m.fields));var t=m.fields;t&&j.a.forEach(u,(function(n){var r=n.fieldName,a=Object(g.e)(n,["fieldName"]);if(!a.hideInTable){var i=function(e){if(!e)return null;var t=e.type,n={title:e.label,dataIndex:e.name,formItemProps:{},fieldProps:{}};return e.required&&(n.formItemProps.required=!0),e.sortable&&(n.sorter=!0),"formula"===t?Ee(n,e.data_type,!0,e):"summary"===t?Ee(n,e.summary_type,!0,e):Ee(n,t,e.readonly||!1,e)}(t[r]);i&&e.push(Object(g.a)(Object(g.a)({},i),a))}})),_(e)}}),[m]);var E=Object(r.useRef)(null);return a.a.createElement(L.a,Object(g.a)({request:function(e,n,r){return Object(g.b)(void 0,void 0,void 0,(function(){var r,a,i,o;return Object(g.c)(this,(function(s){switch(s.label){case 0:return console.log(e),e.current,e.pageSize,r=Object(g.e)(e,["current","pageSize"]),a=Object.keys(r).map((function(e){return"contains("+e+",'"+r[e]+"')"})),i=u.map((function(e){return e.fieldName})),[4,t.requestRecords(c,Object(g.f)([l?"("+l+")":""],Object(g.d)(a)).filter((function(e){return e})).join(" and "),i,{pageSize:e.pageSize,current:e.current,sort:n?Object.keys(n).map((function(e){return[e,"ascend"==n[e]?"asc":"desc"]})):[]})];case 1:return[2,{data:(o=s.sent()).value,success:!0,total:o["@odata.count"]}]}}))}))},columns:O,rowKey:f.rowKey||"_id",rowSelection:f.rowSelection||{onChange:d},pagination:Object(g.a)(Object(g.a)({},f.pagination),{hideOnSinglePage:!0}),options:!1,actionRef:f.actionRef||E},f,{onChange:function(){(f.actionRef||E).current.reload()},className:["object-table",f.className].join(" ")}))})),Se={name:"Steedos:ObjectTable",inputs:[{name:"objectApiName",type:"text",friendlyName:"\u5bf9\u8c61\u540d"}],canHaveChildren:!1},we=function(e){var t=j.a.clone(Se.inputs);t.push({name:"columnFields",type:"list",subFields:[{name:"fieldName",type:"string",enum:e,defaultValue:"name"},{name:"wrap",type:"boolean",defaultValue:!1}],helperText:"\u8bf7\u9009\u62e9\u8981\u663e\u793a\u7684\u5217\u5b57\u6bb5"});var n=Object.assign({},Se,{inputs:t});se.a.registerComponent(Te,n)};_e(".ant-tree-treenode {\n  width: 100%;\n  display: flex;\n  justify-content: flex-start;\n}\n.ant-tree-node-content-wrapper {\n  flex: 1;\n  text-align: left;\n}\n");var xe=Object(l.a)((function(e){var t=Object(r.useContext)(Ae);e.name;var n=e.objectApiName,i=e.nameField,o=e.parentField;e.releatedColumnField;var c=e.rootNodeValue,s=e.filters,u=e.checkable,l=e.onChange,d=Object(g.e)(e,["name","objectApiName","nameField","parentField","releatedColumnField","rootNodeValue","filters","checkable","onChange"]);void 0==u&&(u=!0);var f=Object(ie.a)(n+"_schema",(function(){return Object(g.b)(void 0,void 0,void 0,(function(){return Object(g.c)(this,(function(e){switch(e.label){case 0:return[4,t.requestObject(n)];case 1:return[2,e.sent()]}}))}))}));f.isLoading,f.error;var p=f.data;f.isFetching,p&&ke(j.a.keys(p.fields));var h=Object(g.d)(Object(r.useState)([]),2),b=h[0],m=h[1],v=Object(g.d)(Object(r.useState)([]),2),y=v[0],O=v[1],_=Object(ie.a)([n+"_records",i,o,c,s,u],(function(){return Object(g.b)(void 0,void 0,void 0,(function(){var e;return Object(g.c)(this,(function(r){switch(r.label){case 0:return e=Object.values(p.fields).filter((function(e){return!e.hidden})).map((function(e){return e.name})),[4,t.requestRecords(n,s,e)];case 1:return[2,r.sent()]}}))}))}),{enabled:!!p}).data;return Object(r.useEffect)((function(){if(_){var e=[],t=[],n={},r=c;_.value.forEach((function(a){var c=a._id,s=Object(g.e)(a,["_id"]),u=s[o||"parent"];n[c]=Object(g.a)(Object(g.a)({value:c,key:c,title:a[i||"name"],children:[],_id:c},s),n[c]||{}),t.push(c),u?n[u]?n[u].children.push(n[c]):n[u]={children:[n[c]]}:u||(e=[n[c]],r=c)})),r&&(e=n[r]&&[n[r]]||[]),m(e),O([r])}}),[_]),a.a.createElement(le.a,Object(g.a)({style:{width:"100%"},expandedKeys:y,treeData:b,onExpand:function(e,t){t.expanded,t.node,O(e)},onSelect:function(e,t){var n=t.selectedNodes;l&&l(n)}},d))})),Re={name:"Steedos:ObjectTree",inputs:[{name:"objectApiName",type:"text",friendlyName:"\u5bf9\u8c61\u540d"}],canHaveChildren:!1},ke=function(e){var t=j.a.clone(Re.inputs);t.unshift({name:"fieldName",type:"string",enum:e,helperText:"\u8bf7\u9009\u62e9\u5b57\u6bb5\u540d"});var n=Object.assign({},Re,{inputs:t});se.a.registerComponent(xe,n)};_e(".object-list-item {\n  margin-bottom: 4px;\n  padding: 4px;\n  display: flex;\n  justify-content: start;\n  align-items: center;\n  user-select: none;\n  cursor: pointer;\n  padding: 0 4px;\n  transition: all 0.3s;\n  background: transparent;\n  border-radius: 2px;\n}\n.object-list-item:hover {\n  background-color: #f5f5f5;\n}\n.object-list-item.selected {\n  background-color: #bae7ff;\n}\n.object-list-item > :first-child {\n  margin-right: 8px;\n}\n");var Ne=Object(l.a)((function(e){var t=Object(r.useContext)(Ae),n=y().currentObjectApiName;n||(n=t.currentObjectApiName),e.name;var i=e.objectApiName,o=e.nameField,c=e.filters,s=e.checkable,u=e.onChange,l=Object(g.e)(e,["name","objectApiName","nameField","filters","checkable","onChange"]);i=i||n;var d=Object(ie.a)(i+"_schema",(function(){return Object(g.b)(void 0,void 0,void 0,(function(){return Object(g.c)(this,(function(e){switch(e.label){case 0:return[4,t.requestObject(i)];case 1:return[2,e.sent()]}}))}))}));d.isLoading,d.error;var f=d.data;d.isFetching,f&&Fe(j.a.keys(f.fields));var p=Object(g.d)(Object(r.useState)([]),2),h=p[0],b=p[1],m=Object(g.d)(Object(r.useState)([]),2),v=m[0],O=m[1],_=Object(ie.a)([i+"_records",o,c,s],(function(){return Object(g.b)(void 0,void 0,void 0,(function(){var e;return Object(g.c)(this,(function(n){switch(n.label){case 0:return e=Object.values(f.fields).filter((function(e){return!e.hidden})).map((function(e){return e.name})),[4,t.requestRecords(i,c,e)];case 1:return[2,n.sent()]}}))}))}),{enabled:!!f}).data;Object(r.useEffect)((function(){_&&b(_.value)}),[_]);return a.a.createElement(he.a,Object(g.a)({style:{width:"100%"},dataSource:h,itemLayout:"vertical",renderItem:function(e){return a.a.createElement(he.a.Item,{onClick:function(t){!function(e){var t=Object(g.f)([],Object(g.d)(v)),n=t.findIndex((function(t){return t._id==e._id}));n>=0?t.splice(n,1):s?t.push(e):t=[e],O(t),u&&u(t)}(e)},className:"object-list-item "+(v.some((function(t){return t._id==e._id}))?"selected":"")},s?a.a.createElement(fe.a,{checked:v.some((function(t){return t._id==e._id}))}):a.a.createElement(a.a.Fragment,null),e[o])}},l))})),Ce={name:"Steedos:ObjectList",inputs:[{name:"objectApiName",type:"text",friendlyName:"\u5bf9\u8c61\u540d"}],canHaveChildren:!1},Fe=function(e){var t=j.a.clone(Ce.inputs);t.unshift({name:"fieldName",type:"string",enum:e,helperText:"\u8bf7\u9009\u62e9\u5b57\u6bb5\u540d"});var n=Object.assign({},Ce,{inputs:t});se.a.registerComponent(Ne,n)};_e(".object-expand-table > .ant-pro-card-body {\n  position: relative;\n}\n.object-expand-table .expand-part {\n  margin-right: 12px;\n  background-color: #f0f0f0;\n  height: 100%;\n  overflow-x: hidden;\n  display: inlin;\n  position: absolute;\n}\n.object-expand-table .expand-part .ant-tree {\n  background: transparent;\n}\n.object-expand-table .expand-part .ant-pro-card-body {\n  padding: 12px;\n  padding-left: 4px;\n}\n.object-expand-table .table-part {\n  padding-left: 12px;\n  margin-left: 30%;\n}\n.object-expand-table .table-part .ant-pro-table-search {\n  margin-bottom: 0;\n  padding-left: 0;\n  padding-right: 0;\n  padding-top: 12px;\n}\n.object-expand-table .table-part .ant-card-body {\n  padding-right: 0;\n}\n.object-expand-table .table-part .ant-table-tbody > tr:last-child > td {\n  border: none;\n}\n");var Ie=Object(l.a)((function(e){var t=Object(r.useContext)(Ae),n=y().currentObjectApiName;n||(n=t.currentObjectApiName),e.name;var i=e.onChange,o=Object(g.e)(e,["name","onChange"]),c=Object(g.d)(Object(r.useState)([]),2);c[0],c[1];var s=Object(g.d)(Object(r.useState)([]),2),u=s[0],l=s[1],d=function(e){var t,n=[];e.forEach((function(e){var t=e._id;n=Object(g.f)(Object(g.f)([],Object(g.d)(n)),[t])})),n=j.a.uniq(n),l(n),null===(t=f.current)||void 0===t||t.reload()},f=Object(r.useRef)();Object(r.useEffect)((function(){var e;null===(e=f.current)||void 0===e||e.reload()}),[f.current]);var p,h,b=Object(g.d)(Object(r.useState)(null),2),m=b[0],v=b[1];return Object(r.useEffect)((function(){var t=e.columnFields.find((function(e){var t=e.expandType,n=e.expandReference,r=e.expandNameField,a=e.expandParentField,i=e.fieldName;if(t)return{expandType:t,expandReference:n,expandNameField:r,expandParentField:a,fieldName:i}}));v(t&&{type:t.expandType,objectApiName:t.expandReference,nameField:t.expandNameField,parentField:t.expandParentField,releatedColumnField:t.fieldName})}),[e.columnFields]),a.a.createElement(a.a.Fragment,null,a.a.createElement(be.a,{split:"vertical",className:["object-expand-table",o.className].join(" ")},m&&m.type&&a.a.createElement(be.a,{colSpan:"30%",className:"expand-part"},"tree"==m.type&&a.a.createElement(xe,Object(g.a)({},m,{onChange:d})),"list"==m.type&&a.a.createElement(Ne,Object(g.a)({},(m.parentField,m.releatedColumnField,Object(g.e)(m,["parentField","releatedColumnField"])),{onChange:d}))),a.a.createElement(be.a,{className:"table-part",ghost:!0},a.a.createElement(Te,Object(g.a)({},o,{filters:m&&(p=u.length>0?u:[],h=m.releatedColumnField,p.map((function(e){return"contains("+(h||"_id")+",'"+e+"')"})).join(" or ")),actionRef:f,onChange:function(e,t){i&&i(t)}})))))})),Ae=(ve.a.Option,a.a.createContext({requestObject:function(e){return Object(g.b)(void 0,void 0,void 0,(function(){return Object(g.c)(this,(function(t){throw new Error("requestObject "+e+" failed, you should impl this function in ObjectProvider.")}))}))},requestRecords:function(e,t,n,r){return Object(g.b)(void 0,void 0,void 0,(function(){return Object(g.c)(this,(function(t){throw new Error("requestRecords "+e+" failed, you should impl this function in ObjectProvider.")}))}))},updateRecord:function(e,t,n){return Object(g.b)(void 0,void 0,void 0,(function(){return Object(g.c)(this,(function(n){throw new Error("submitForm "+e+" update id: "+t+" failed, you should impl this function in ObjectProvider.")}))}))},insertRecord:function(e,t){return Object(g.b)(void 0,void 0,void 0,(function(){return Object(g.c)(this,(function(t){throw new Error("submitForm "+e+" add record failed, you should impl this function in ObjectProvider.")}))}))}}));function Pe(e){var t=e.currentObjectApiName,n=e.currentRecordId,r=e.requestObject,i=e.requestRecords,o=e.updateRecord,c=e.insertRecord,s=e.queryClient,u=void 0===s?new oe.a:s,l=e.children;return a.a.createElement(Ae.Provider,{value:{currentObjectApiName:t,currentRecordId:n,queryClient:u,requestObject:r,requestRecords:i,updateRecord:o,insertRecord:c}},a.a.createElement(ce.a,{client:u},l))}var Le=a.a.createContext(null),De=n(21),Ue=n.n(De),qe=n(478);function Me(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function ze(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Me(i,r,a,o,c,"next",e)}function c(e){Me(i,r,a,o,c,"throw",e)}o(void 0)}))}}var Be=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}),Ve=Be.STEEDOS_ROOT_URL,He=Be.STEEDOS_TENANT_ID,Ke=Be.STEEDOS_USER_ID,Je=Be.STEEDOS_AUTH_TOKEN,We=Be.STEEDOS_LOCALE,Xe=void 0===We?"zh_CN":We;function Qe(e){var t=e.rootUrl,n=void 0===t?Ve:t,r=e.tenantId,i=void 0===r?He:r,o=e.userId,c=void 0===o?Ke:o,s=e.authToken,u=void 0===s?Je:s,l=e.user,d=void 0===l?{}:l,f=e.locale,p=void 0===f?Xe:f,h=e.children,b=e.initialState?e.initialState:{},m=new qe.SteedosClient;m.setUrl(n),m.setUserId(c),m.setToken(u),m.setSpaceId(i);var y={rootUrl:n,tenantId:i,userId:c,authToken:u,user:d,locale:p,client:m},g={requestObject:function(){var e=ze(Ue.a.mark((function e(t){var n;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,m.sobject(t).getConfig();case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),requestRecords:function(){var e=ze(Ue.a.mark((function e(t,n,r,a){var i;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.sobject(t).find(n,r);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),updateRecord:function(){var e=ze(Ue.a.mark((function e(t,n,r){var a;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.sobject(t).update(n,r);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),insertRecord:function(){var e=ze(Ue.a.mark((function e(t,n){var r;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.sobject(t).insert(n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()};return a.a.createElement(v,{initialState:b},a.a.createElement(Le.Provider,{value:y},a.a.createElement(Pe,g,a.a.createElement(G,{locale:p},h))))}var Ge=n(66),$e=n(479),Ye=n.n($e),Ze=function(e){var t=RegExp(e+"=.[^;]*"),n=document.cookie.match(t);return n?n[0].split("=")[1]:""},et=n(89),tt=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}),nt=tt.REACT_APP_STEEDOS_ROOT_URL,rt=tt.REACT_APP_STEEDOS_TENANT_ID,at=tt.REACT_APP_STEEDOS_USER_ID,it=tt.REACT_APP_STEEDOS_AUTH_TOKEN,ot=tt.REACT_APP_STEEDOS_LOCALE,ct=void 0===ot?"zh_CN":ot;var st=function(e){var t=Ye.a.parse(window.location.search.slice(1)),n={rootUrl:t.rooturl||nt||"/",tenantId:t.spaceid||Ze("X-Space-Id")||rt,userId:t.userid||Ze("X-User-Id")||at,authToken:t.authtoken||Ze("X-Auth-Token")||it,locale:ct},a=Object(r.useState)([]),i=Object(u.a)(a,2),o=i[0],l=i[1],d=Object(r.useState)([]),f=Object(u.a)(d,2),p=f[0],h=f[1],b=Object(r.useState)([]),m=Object(u.a)(b,2),v=m[0],y=m[1];return Object(r.useEffect)((function(){l([].concat(Object(s.a)(p),Object(s.a)(v)))}),[p,v]),Object(et.jsx)(Qe,Object(c.a)(Object(c.a)({},n),{},{children:Object(et.jsx)("div",{className:"App",children:Object(et.jsxs)(be.a,{className:"main-container",title:"",split:"horizontal",bordered:!0,headerBordered:!0,children:[Object(et.jsxs)(be.a,{tabs:{type:"card"},children:[Object(et.jsx)(be.a.TabPane,{tab:"\u7528\u6237".concat(p.length>0?"("+p.length+")":""),children:Object(et.jsx)(Ie,{onChange:function(e){h(e)},objectApiName:"space_users",columnFields:[{fieldName:"name",sorter:!0},{fieldName:"email"},{fieldName:"organizations_parents",expandType:"tree",expandReference:"organizations",expandNameField:"name",expandParentField:"parent",hideInTable:!0}]})},"tab1"),Object(et.jsx)(be.a.TabPane,{tab:"\u8054\u7cfb\u4eba".concat(v.length>0?"("+v.length+")":""),children:Object(et.jsx)(Ie,{onChange:function(e){y(e)},rowKey:"_id",objectApiName:"contacts",columnFields:[{fieldName:"name",sorter:!0},{fieldName:"email"},{fieldName:"group",expandType:"list",expandReference:"contacts_group",expandNameField:"name",hideInTable:!0}]})},"tab2")]}),Object(et.jsx)(be.a,{style:{height:"60px"},bodyStyle:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:Object(et.jsx)(Ge.a,{disabled:o.length<=0,onClick:function(){(window.opener||window.parent).postMessage(Object(c.a)(Object(c.a)({},t),{},{selection:o.map((function(e){return{name:e.name,email:e.email}}))}),"*"),window.close()},type:"primary",children:"\u786e\u5b9a"})})]})})}))},ut=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,876)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),i(e),o(e)}))};o.a.render(Object(et.jsx)(st,{}),document.getElementById("root")),ut()}},[[854,1,2]]]);
//# sourceMappingURL=main.33790fd2.chunk.js.map